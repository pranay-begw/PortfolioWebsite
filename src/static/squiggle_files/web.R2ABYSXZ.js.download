import{a as rs,b as Jl,c as Xl}from"https://app.framerstatic.com/chunk-TOVFHLPY.js";import{a as ss}from"https://app.framerstatic.com/chunk-LESMOJ5W.js";import{a as zl}from"https://app.framerstatic.com/chunk-JJPWYG3X.js";import{a as os}from"https://app.framerstatic.com/chunk-IN4FYOBJ.js";import"https://app.framerstatic.com/chunk-7RHHWOHP.js";import{A as jl,B as sn,C as Qr,D as Nl,E as Ul,a as ai,b as pi,c as yr,d as bi,e as Xa,f as d,g as pl,h as ul,i as Rr,j as dl,k as Po,l as ml,m as fl,n as gl,o as Gr,p as Kr,q as Pl,r as kl,s as St,t as Il,u as rn,v as Tl,w as Ml,x as Jr,y as Ll,z as xl}from"https://app.framerstatic.com/chunk-I7LONOTP.js";import"https://app.framerstatic.com/chunk-TLS7V72S.js";import"https://app.framerstatic.com/chunk-5CKQHI5W.js";import"https://app.framerstatic.com/chunk-Z2GD5BRE.js";import{$ as or,Da as rl,Ea as sl,Fa as nl,Ga as il,Ha as al,Oa as cl,Wa as ro,bb as zr,g as en,na as oo}from"https://app.framerstatic.com/chunk-7PQAIEHW.js";import{b as ci,f as Qa,u as el,v as tl,w as ol}from"https://app.framerstatic.com/chunk-NGFGETKZ.js";import"https://app.framerstatic.com/chunk-GWGV2SM2.js";import"https://app.framerstatic.com/chunk-2IC3GVIY.js";import"https://app.framerstatic.com/chunk-ZDCWUUYC.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import"https://app.framerstatic.com/chunk-JIRXICKD.js";import{$d as Va,Be as Za,Cc as Aa,Ce as cf,Dc as Ma,Q as Sa,Qc as La,Rd as _r,Sc as xa,Tc as ja,Vd as Ha,Wd as Wa,Yc as Ba,_d as qa,a as ri,b as Vs,c as si,d as ni,e as ii,f as li,fe as Xs,g as ui,h as di,i as mi,ke as Ra,me as za,mh as l,ne as Ga,o as Ri,oe as Qs,pe as Ka,qe as y,re as dt,se as Ot}from"https://app.framerstatic.com/chunk-RS2RRRHS.js";import"https://app.framerstatic.com/chunk-EXCXJW4X.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import"https://app.framerstatic.com/chunk-YNETUNJC.js";import"https://app.framerstatic.com/chunk-XL4HHLKU.js";import"https://app.framerstatic.com/chunk-RAGJTGMK.js";import{a as Hr,b as yt,c as to}from"https://app.framerstatic.com/chunk-W66XY4S7.js";import"https://app.framerstatic.com/chunk-LHQNGCRQ.js";import{a as x}from"https://app.framerstatic.com/chunk-GTCYFT32.js";import"https://app.framerstatic.com/chunk-XAUM5LZA.js";import"https://app.framerstatic.com/chunk-D3OBDKBI.js";import{a as Al}from"https://app.framerstatic.com/chunk-CRQ4NOLA.js";import"https://app.framerstatic.com/chunk-I5VN5FR4.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import"https://app.framerstatic.com/chunk-DKJCSWIN.js";import"https://app.framerstatic.com/chunk-HQAT3FDZ.js";import"https://app.framerstatic.com/chunk-NRIBSGP2.js";import"https://app.framerstatic.com/chunk-4QCXYVYE.js";import{j as Ea}from"https://app.framerstatic.com/chunk-CX24N5DJ.js";import{c as $a}from"https://app.framerstatic.com/chunk-EHXLNBHY.js";import"https://app.framerstatic.com/chunk-EUICA64L.js";import"https://app.framerstatic.com/chunk-EXENIPD2.js";import{f as Na,h as Js,i as Ua,j as Fa,k as Oa}from"https://app.framerstatic.com/chunk-TFTCXAGX.js";import{a as Ta}from"https://app.framerstatic.com/chunk-275HL4PF.js";import"https://app.framerstatic.com/chunk-Q6LLKHPR.js";import"https://app.framerstatic.com/chunk-BH63GPCX.js";import"https://app.framerstatic.com/chunk-NBEFPMVE.js";import"https://app.framerstatic.com/chunk-VGYC2ZXH.js";import{a as Ja}from"https://app.framerstatic.com/chunk-2S35SSJW.js";import"https://app.framerstatic.com/chunk-GSHWBSOS.js";import"https://app.framerstatic.com/chunk-NLCKVBR5.js";import"https://app.framerstatic.com/chunk-LFL4HJM5.js";import{a as yo}from"https://app.framerstatic.com/chunk-A2XM7CWL.js";import"https://app.framerstatic.com/chunk-LRFMZAIA.js";import{a as oi,d as Br,l as Da}from"https://app.framerstatic.com/chunk-FIYP577F.js";import{Bo as Pa,Ed as Mr,Fa as Ti,Fd as Yi,Gd as Ji,Hf as ta,If as Ks,Nd as Xi,Nj as ba,O as Ci,Od as Lr,Xq as Fr,da as wi,es as wa,fa as Si,hg as oa,ib as Ai,ja as ki,kb as W,ko as va,lb as wt,lo as ya,mb as Gi,os as Or,p as Pi,sm as Ys,va as Ii,yd as Zi,yo as Ur}from"https://app.framerstatic.com/chunk-M45VXM4I.js";import"https://app.framerstatic.com/chunk-CKP2GXTU.js";import"https://app.framerstatic.com/chunk-ZAVCCCEM.js";import{a as Ol,b as _l,c as Hl,d as Wl,e as ql,f as Vl,g as $l,h as Gl,i as Kl,j as Zl,k as Yl}from"https://app.framerstatic.com/chunk-KAWTYTG6.js";import"https://app.framerstatic.com/chunk-TP2U2DCW.js";import{a as ec}from"https://app.framerstatic.com/chunk-GQAGB7R5.js";import{c as Rl}from"https://app.framerstatic.com/chunk-DS3C6ULA.js";import{a as es}from"https://app.framerstatic.com/chunk-NA62C2CW.js";import{a as nn,b as Ql}from"https://app.framerstatic.com/chunk-EWV5UM7Y.js";import"https://app.framerstatic.com/chunk-KCKKCK4H.js";import{a as ts,b as Fl,d as Bl}from"https://app.framerstatic.com/chunk-JI24HTDH.js";import{e as tn,f as hl,g as bl,n as vl,o as Cl,p as El,q as Dl}from"https://app.framerstatic.com/chunk-LJLE4LZ3.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import{c as Xr}from"https://app.framerstatic.com/chunk-N4OW6ETH.js";import"https://app.framerstatic.com/chunk-LDGTEC22.js";import"https://app.framerstatic.com/chunk-4223VURI.js";import{a as yl}from"https://app.framerstatic.com/chunk-VXHGBDKW.js";import"https://app.framerstatic.com/chunk-KCRDHQ4E.js";import{c as _a}from"https://app.framerstatic.com/chunk-TOBIBHGH.js";import{a as vo}from"https://app.framerstatic.com/chunk-VYA5VL6Z.js";import"https://app.framerstatic.com/chunk-WEOIH4N7.js";import{f as Je}from"https://app.framerstatic.com/chunk-M7KOZKAL.js";import{a as qe}from"https://app.framerstatic.com/chunk-LL55HCXN.js";import"https://app.framerstatic.com/chunk-C6MBLJJ7.js";import{b as E}from"https://app.framerstatic.com/chunk-PJYER2FJ.js";import{a as Zr,b as wl,c as Yr,d as Sl,e as on}from"https://app.framerstatic.com/chunk-6XQ2OCME.js";import"https://app.framerstatic.com/chunk-HJSTTHYZ.js";import"https://app.framerstatic.com/chunk-EKWQMBYQ.js";import{a as w}from"https://app.framerstatic.com/chunk-V6DZVKDR.js";import"https://app.framerstatic.com/chunk-CY6IDPVE.js";import{a as Ia}from"https://app.framerstatic.com/chunk-BRGVFFSG.js";import{a as De}from"https://app.framerstatic.com/chunk-ES5JO7AL.js";import{c as ll}from"https://app.framerstatic.com/chunk-MZKPIUFN.js";import{c as $r}from"https://app.framerstatic.com/chunk-KPKDJDRD.js";import{d as Wr,f as qr,h as Vr}from"https://app.framerstatic.com/chunk-YH66AAEI.js";import{a as ka}from"https://app.framerstatic.com/chunk-FYHUPFEQ.js";import"https://app.framerstatic.com/chunk-AL5W2DML.js";import"https://app.framerstatic.com/chunk-KQURWOV5.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import{b as yi}from"https://app.framerstatic.com/chunk-M5JBPS3M.js";import{b as zi,f as Qi,j as ke,m as ea}from"https://app.framerstatic.com/chunk-ED23XP4C.js";import{a as Ya}from"https://app.framerstatic.com/chunk-BILZATDT.js";import{b as Ki}from"https://app.framerstatic.com/chunk-IEH5QJIZ.js";import"https://app.framerstatic.com/chunk-7DPOW67T.js";import{A as st,C as ma,D as fa,E as ga,H as ha,K as nt,L as We,O as Nr,W as bo,e as ra,g as sa,h as xr,i as Zs,j as jr,k as Er,l as Ut,m as na,n as Dr,o as er,p as ia,q as tr,r as aa,s as eo,t as la,u as ca,v as pa,w as Ft,x as ho,y as ua,z as da}from"https://app.framerstatic.com/chunk-3MSLF32W.js";import{b as Pr,d as Ca,h as F}from"https://app.framerstatic.com/chunk-CJ5LZKVI.js";import{$b as Sr,$g as he,Ab as Li,Ah as Xt,Ai as $i,Bb as xi,Ch as jt,Ci as Qo,De as Ni,Df as Fi,Di as Gs,Gb as S,Hb as ji,Pf as Oi,Ra as vi,Rc as Rs,Sa as Cr,Sc as zs,Sf as Bi,Vh as Et,Wh as Dt,Zh as vt,_g as _i,ac as Yo,ai as Ct,bh as Y,ch as fo,dh as ut,ed as bt,fi as Nt,ja as Se,jh as Jt,kh as v,ld as Jo,li as go,oa as Yt,oh as Hi,oi as Vi,pd as Ei,qh as Tr,rd as kr,rh as Ar,sd as Di,sh as Wi,tf as Ui,th as xt,ti as Qt,vh as Te,vi as Xo,wb as A,xd as mo,xh as qi,yb as uo,yd as Ir,zb as Zo}from"https://app.framerstatic.com/chunk-MFLONCUE.js";import{k as Ye,m as wr,r as Mi}from"https://app.framerstatic.com/chunk-BU6JUTXA.js";import"https://app.framerstatic.com/chunk-XBQHBV7C.js";import{a as T}from"https://app.framerstatic.com/chunk-H4IIIHXS.js";import"https://app.framerstatic.com/chunk-UXB4YBAD.js";import{b as Ve,g as ti,j as ht}from"https://app.framerstatic.com/chunk-NEN2GU72.js";import{O as hi,a as we,b as Ie,f as fi,i as N,j as gi,l as $s,m as Zt,p as rt}from"https://app.framerstatic.com/chunk-7GSQJDMV.js";import{e as k,g as pt,h as Go,i as Ko}from"https://app.framerstatic.com/chunk-G6RVR2BI.js";var gr=k(T());var pf={track:!0};function tc(t){let e={...t,event:"file_save"};Pr(e,pf)}var uf={track:!0};function oc(t){let e={...t,event:"preview_hand_change"};Pr(e,uf)}var He=k(T());var rr,so,Bt,Co,ns=class{constructor(e){this.localHandler=e;Go(this,rr,void 0);Go(this,so,{});Go(this,Bt,null);Go(this,Co,null);this.socketStats=null}get treeSchema(){return this.localHandler.treeSchema}get treeVersion(){return this.localHandler.treeVersion()}setSendFunction(e){Ko(this,Bt,e)}setUploadSnapshotFunction(e){Ko(this,Co,e)}setGetUserInfoFunction(e){this.localHandler.getUserInfo=e}sendMessage(e){pt(this,Bt)&&pt(this,Bt).call(this,e)}uploadDocument(e){pt(this,Co)&&pt(this,Co).call(this,e)}onConnect(){this.localHandler.setRemoteConnection(this)}onDisconnect(e){this.localHandler.setRemoteConnectionFailure(e)}onMessage(e){switch(e.type){case"leave":this.localHandler.handleLeave(e.id);break;case"lock":this.localHandler.handleLock(e.id,e.value);break;case"state":e.id===pt(this,rr)&&Object.assign(pt(this,so),e.value),this.localHandler.handleUserStateUpdate(e.id,e.value);break;case"treeMessage":this.localHandler.handleTreeMessage(e.id,e.value);break;case"treeUpdate":this.localHandler.handleTreeUpdate(e.id,e.value);break;case"treeVerify":this.localHandler.handleTreeVerify(e.value);break;case"welcome":{let{userId:o,userStates:r}=e.value;Ko(this,rr,o),Ko(this,so,{...r[o]});for(let[s,i]of Object.entries(r))this.localHandler.handleUserStateUpdate(s,i);break}}}setSocketStats(e){this.socketStats=e}rtt(){return this.socketStats?this.socketStats.rtt():NaN}updateUserState(e){if(!pt(this,Bt))return;let o=!1,r={};for(let s of Object.keys(e))e[s]!==void 0&&(Ci(e[s],pt(this,so)[s],!0)||(r[s]=e[s],o=!0));o&&(Object.assign(pt(this,so),r),pt(this,Bt).call(this,{type:"state",value:r}))}};rr=new WeakMap,so=new WeakMap,Bt=new WeakMap,Co=new WeakMap;var no=k(T());async function rc(t,e,o,r){let s=`upload${Math.random()}`;try{r({type:"add",key:s,variant:"progress",icon:o,text:"Uploading remote file\u2026",duration:1/0,showCloseButton:"never"});let i=await w.post(t,{url:e});return r({type:"add",key:s,variant:"success",text:"File has been uploaded",duration:1e4,icon:"success",moveToTop:!0}),i}catch(i){throw r({type:"add",key:s,variant:"error",text:"Error uploading file",duration:3e4,icon:"error",moveToTop:!0}),i}}var _t=rt("useAPI"),df=Vr()&&navigator.userAgent.includes("Version/16"),sc=window.CompressionStream&&!df,an=class{constructor(e,o,r,s){this.apiBaseURL=e;this.socket=o;this.projectId=r;this.dispatch=s;this.packagesPerPage=36}wait(e){w.wait(e)}getACL(){w.get(`/web/projects/${this.projectId}/acl/`).then(({users:e,invites:o})=>{this.dispatch({type:"updateACL",reset:!0,acl:[...e,...o]})}).catch(e=>_t.error("Failed to get ACL:",e))}setInitialProject(e){e.then(o=>{this.dispatch({type:"setProject",project:o})}).catch(o=>_t.error("Failed to set initial project:",o))}getProject(){w.get(`/web/projects/${this.projectId}`).then(e=>{this.dispatch({type:"setProject",project:e})}).catch(e=>_t.error("Failed to get project:",e))}async pollProject({intervalMillis:e,attempts:o,stopCondition:r}){for(let s=0;s<o;++s){let i=await w.get(`/web/projects/${this.projectId}`);if(r(i)){this.dispatch({type:"setProject",project:i}),this.notifyProjectChange("metadata");return}await new Promise(n=>setTimeout(n,e))}throw new Error("pollProject exceeded the number of attempts")}async inviteByEmail({email:e,role:o,permissions:r}){let s=await w.post(`/web/projects/${this.projectId}/acl`,{email:e,role:o,permissions:r!=null?r:void 0});return this.dispatch({type:"updateACL",acl:[s]}),this.notifyProjectChange("acl"),s}async removeInvite({id:e}){await w.deleteRaw(`/web/projects/${this.projectId}/invites/${e}`),this.notifyProjectChange("acl"),this.getACL()}async updateUserPermissions({id:e,role:o,permissions:r}){await w.post(`/web/projects/${this.projectId}/acl/${e}`,{role:o,permissions:r!=null?r:void 0}),this.notifyProjectChange("acl"),this.getACL()}async removeUserPermissions({id:e}){await w.deleteRaw(`/web/projects/${this.projectId}/acl/${e}`),this.notifyProjectChange("acl"),this.getACL()}async updateProject(e){return this.dispatch({type:"updateProject",changes:e}),w.postRaw(`/web/projects/${this.projectId}`,JSON.stringify(e),"application/json").then(()=>{this.getProject(),this.notifyProjectChange("metadata")}).catch(o=>{throw _t.error("Failed to update project:",o),o})}async updateShareLink(e){let{id:o,...r}=e;return w.post(`/web/projects/sharelinks/${o}`,r).then(()=>{this.getProject(),this.notifyProjectChange("metadata")}).catch(s=>{throw _t.error("Failed to update project:",s),s})}async getThreads({archived:e=!1}={}){return w.get(`/web/projects/${this.projectId}/threads/?archived=${e?"true":"false"}`)}async getThread({id:e}){return w.get(`/web/projects/${this.projectId}/threads/${e}`)}async createThread(e){return w.post(`/web/projects/${this.projectId}/threads/`,e)}async updateThread(e){let{id:o,...r}=e;return w.post(`/web/projects/${this.projectId}/threads/${o}`,r)}async markAsSeen({threadId:e,...o}){return w.post(`/web/projects/${this.projectId}/threads/${e}/seen`,o)}async createComment({threadId:e,text:o}){return w.post(`/web/projects/${this.projectId}/threads/${e}/comments/`,{text:o})}async updateComment(e){let{id:o,threadId:r,text:s}=e;return w.post(`/web/projects/${this.projectId}/threads/${r}/comments/${o}`,{text:s})}async deleteComment(e){let{id:o,threadId:r}=e;return w.delete(`/web/projects/${this.projectId}/threads/${r}/comments/${o}`)}async subscribeToNotifications(){await w.postRaw(`/web/projects/${this.projectId}/threads/notifications/subscribe`)}async unsubscribeFromNotifications(){await w.postRaw(`/web/projects/${this.projectId}/threads/notifications/unsubscribe`)}async getAssets(){let e=await w.get(`/web/projects/${this.projectId}/assets/`);if(!Array.isArray(e.assets)){let o=new Error("malformed /projects/./assets/ response");throw _t.reportError(o,e),o}return e}async uploadAsset(e,o){let r=new URL(`/web/projects/${this.projectId}/assets`,this.apiBaseURL).href,s=await El(r,"file",e,"image",o!=null?o:qe);return s&&this.notifyProjectChange("assets"),s}async uploadAssetByURL(e,o){let r=await rc(`/web/projects/${this.projectId}/assets/fetch`,e,"image",o!=null?o:qe);return r&&this.notifyProjectChange("assets"),r}async duplicateAssets(e,o){if(this.projectId===o)return _t.warn("Attempted to duplicate assets for current project"),[];let r=await w.post(`/web/projects/${this.projectId}/assets/duplicate`,{sourceProjectId:o,keys:e});return r&&this.notifyProjectChange("assets"),r.assets}async deleteAsset(e){let o=await w.deleteRaw(`/web/projects/${this.projectId}/assets/${e}`);return o&&this.notifyProjectChange("assets"),o}async createModule(e){let o=new FormData;return this.addModuleRequestToForm(e,o),await w.postRaw("/modules/v1/modules/",o).then(s=>s.json())}async deleteModule({moduleId:e}){return await w.deleteRaw(`/modules/v1/modules/${e}`).then(r=>r.json())}async getModule({moduleId:e,saveId:o}){let r;return o?r=`/modules/v1/modules/${e}/saves/${o}`:r=`/modules/v1/modules/${e}`,w.get(r)}async getModuleDependencies({moduleId:e,saveId:o}){return w.get(`/modules/v1/modules/${e}/saves/${o}/dependencies/`)}async listModules({types:e}){let o=new URLSearchParams;if(e)for(let s of e)o.append("type",s);return await w.get(`/modules/v1/modules/?${o.toString()}`,{projectId:this.projectId})}async listNamespaces(){return await w.get("/modules/v1/namespaces/")}async listPublishedModules({namespace:e}){let o=`/modules/v1/modules/namespaces/${encodeURIComponent(e)}/published/`;return await w.get(o)}async lookUpModules(e){return w.post("/modules/v1/modules/batch/lookup/",e)}async publishModule({namespace:e,name:o,...r}){let s=`/modules/v1/namespaces/${encodeURIComponent(e)}/published/${encodeURIComponent(o)}`;return await w.post(s,r)}async updateModule({moduleId:e,...o}){return await w.post(`/modules/v1/modules/${e}`,o)}async saveModule(e){let o=new FormData;return await this.addModuleRequestToForm(e,o),await w.postRaw(`/modules/v1/modules/${e.moduleId}/saves/`,o).then(s=>s.json())}async saveModules({batch:e}){let o=new FormData;return await Promise.all(e.map(s=>this.addModuleRequestToForm(s,o))),await w.postRaw("/modules/v1/modules/batch/saves/",o).then(s=>s.json())}async addModuleRequestToForm(e,o){let{files:r,...s}=e,i=o.getAll("metadata").length;sc&&window.CompressionStream&&(s.transferEncoding="gzip"),o.append("metadata",JSON.stringify({...s,projectId:this.projectId,files:r.map(({content:n,...p})=>p)})),await Promise.all(r.map(async n=>{let p=new Blob([n.content]);if(sc&&window.CompressionStream){let a=new window.CompressionStream("gzip"),c=p.stream();p=await new Response(c.pipeThrough(a)).blob();let u=n.content.length-p.size,m=u/n.content.length*100;_t.debug("Saved",u,"bytes",`(${m.toFixed(1)}%)`,"compressing",n.name)}o.append(`files[${i}]`,new File([p],n.name))}))}async getFileList(){return w.getRaw(`/web/vekter/projects/${this.projectId}/files`)}async getFile(e){return w.getRaw(`/web/vekter/projects/${this.projectId}/files/${e}`)}async saveFile(e,o){let r=new FormData,s=new File([o],e,{type:"text/plain"});return r.set("file",s),w.postRaw(`/web/vekter/projects/${this.projectId}/files/${e}`,r,void 0)}async deleteFile(e){return w.deleteRaw(`/web/vekter/projects/${this.projectId}/files/${e}`)}async getBuildOutput(e){return w.getRaw(`/web/projects/${this.projectId}/files/${e}`)}async getPackage(e){let{fromPublicPackages:o,packageName:r}=e;return w.get(`/store/packages${o?"":"/private"}/${r}`)}async deletePackage(e){let{fromPublicPackages:o,packageName:r}=e;await w.deleteRaw(`/store/packages${o?"":"/private"}/${r}`)}async getPackageVersionStatus(e){let{isPrivate:o,packageName:r,version:s}=e;return w.get(`/store/packages${o?"/private":""}/${r}/version/${s}`)}async preflightPackage(e){let{fromPublicPackages:o,body:r}=e;return w.post(`/store/packages${o?"":"/private"}/preflight`,r)}async findPackage(e){let{fromPublicPackages:o,friendlyName:r,spaceId:s}=e;return w.getRaw(`/store/packages${o?"":"/private"}/find-by-slugify`,{name:r,spaceId:s})}async findPackages(e){let{fromPublicPackages:o,query:r,offset:s,spaceIds:i}=e;return w.getRaw(`/store/packages${o?"":"/private"}/search`,{query:r,offset:s,limit:this.packagesPerPage,spaceIds:i})}async favoritePackage(e){let{fromPublicPackages:o,packageName:r}=e;return w.postRaw(`/store/packages${o?"":"/private"}/${r}/favorite`)}async unfavoritePackage(e){let{fromPublicPackages:o,packageName:r}=e;return w.deleteRaw(`/store/packages${o?"":"/private"}/${r}/favorite`)}async getPackages(e){let{fromPublicPackages:o,section:r,offset:s,spaceIds:i}=e;return w.getRaw(`/store/packages${o?"":"/private"}/${r||""}`,{offset:s,limit:this.packagesPerPage,spaceIds:i})}async getPopularPackages(e){let{fromPublicPackages:o,offset:r,days:s,spaceIds:i}=e;return w.getRaw(`/store/packages${o?"":"/private"}/popular`,{offset:r,days:s,limit:this.packagesPerPage,spaceIds:i})}async getFeaturedPackages(e){let{fromPublicPackages:o,offset:r}=e;return w.getRaw(`/store/packages${o?"":"/private"}/`,{featured:!0,offset:r,limit:this.packagesPerPage})}async getPublisherPackages(e){let{publisherId:o,offset:r}=e;return w.getRaw(`/store/packages/published-by/${o}`,{offset:r,limit:this.packagesPerPage})}async getTrendingPackages(){return w.getRaw("/store/packages/trending")}async getPackagesMetadata(e){return w.post("/store/meta/get-many",e)}async getCollectionsMany(e){return w.post("/web/collections/spaces/get-many",e)}async listPhotos(e){return w.get("/web/unsplash/photos",e)}async searchPhotos(e){return w.get("/web/unsplash/search/photos",e)}async getRandomPhoto(e){return w.get("/web/unsplash/photos/random",e)}async downloadPhoto(e){return w.get(`/web/unsplash/photos/${e.id}/download`)}notifyProjectChange(e){this.socket.send({type:"notifyProjectChange",value:{scope:e}})}};function nc(t,e,o,r){let s=(0,no.useMemo)(()=>new an(t,e,o.projectId,r),[t,e,o.projectId,r]);(0,no.useEffect)(()=>{s.getACL()},[s]);let i=(0,no.useRef)(o);return i.current=o,(0,no.useEffect)(()=>e.onMessage(n=>{let p=i.current;if(n.type==="join"){if(p.aclById[n.id])return}else if(n.type==="welcome"){if(p.acl.length===0)return;let a=!1;for(let c of p.activeIds)if(!p.aclById[c]){a=!0;break}if(!a)return}else return;s.getACL()}),[s,e]),s}var is=k(T());function ic(t,e){let[o,r]=(0,is.useReducer)((s,i)=>{let n=Br(s,p=>mf(p,i));return l.processWhenReady(()=>l.projectStore.update(n)),n},t,s=>({acl:[],aclById:{},activeIds:new Set,projectId:s,userStates:{}}));return(0,is.useEffect)(()=>e.onMessage(s=>{r({type:"handleMessage",message:s})}),[e]),[o,r]}function mf(t,e){if(e.type==="handleMessage"){let{message:o}=e;if(o.type==="join"){if(t.activeIds.has(o.id)){console.warn("User joined twice:",o.id);return}else t.activeIds.add(o.id);t.userStates[o.id]={}}else if(o.type==="leave"){if(t.activeIds.has(o.id))t.activeIds.delete(o.id);else{console.warn("Unknown user left:",o.id);return}delete t.userStates[o.id]}else if(o.type==="state"){let r=t.userStates[o.id];if(!r){console.warn("Got user state data for unknown user:",o.id);return}Object.assign(r,o.value)}else o.type==="welcome"&&(t.activeIds=new Set(Object.keys(o.value.userStates)),t.userStates=o.value.userStates)}else if(e.type==="updateACL"){let o={};for(let r of e.acl)o[r.user.id]=r;if(e.reset){t.acl=e.acl,t.aclById=o;return}t.aclById={...t.aclById,...o},t.acl=Object.keys(t.aclById).map(r=>t.aclById[r])}else e.type==="updateProject"?(we(t.project,"Project must be set before updating it"),Object.assign(t.project,e.changes)):e.type==="setProject"?t.project===void 0?t.project=e.project:Object.assign(t.project,e.project):Ie(e)}var ac=k(T());var as=class{constructor(e){this.api=e}async getThreads(e){return this.api.getThreads(e)}async createThread(e){return{thread:await this.api.createThread(e)}}async updateThread(e){return{thread:await this.api.updateThread(e)}}async markAsSeen(e){return{thread:await this.api.markAsSeen(e)}}async createComment(e){return{comment:await this.api.createComment(e)}}async updateComment(e){return{comment:await this.api.updateComment(e)}}async deleteComment(e){return{comment:await this.api.deleteComment(e)}}};function lc({api:t,channel:e}){(0,ac.useEffect)(()=>{if(e)return si.on(e).register(new as(t))},[t,e])}var pc=k(T());async function sr(t){if(t.status>=200&&t.status<300)return t;throw new Error(t.statusText)}async function ln(t){return t.json()}function cc(t){return{type:t.dir?"directory":"file",path:t.path,content:t.content}}var ls=class{constructor(e,o,r){this.projectId=e;this.api=o;this.fileUpdatesService=r;this.buildOutputEmitter=new ht;this.buildOutputStream=this.buildOutputEmitter.newStream;this.buildRequestFileMap=new Map}async saveFile(e){let o=performance.now(),r=!1;try{let{path:s,content:i}=e,n=(this.buildRequestFileMap.get(s)||0)+1;this.buildRequestFileMap.set(s,n);let p=await this.api.saveFile(s,i);await sr(p),this.broadcast([{path:s,type:"added"}]),W.isOn("codeModules")||ke.isOn("disableStoreAndLegacyCode")||await this.handleBuildOutputResponse(p,s,n)}catch(s){throw r=!0,s}finally{tc({durationMs:Math.round(performance.now()-o),failed:r,filename:e.path,fileSize:e.content.length})}}async deleteFile(e){let{path:o}=e,r=(this.buildRequestFileMap.get(o)||0)+1;this.buildRequestFileMap.set(o,r);let s=await this.api.deleteFile(o);await sr(s),this.broadcast([{path:o,type:"deleted"}]),W.isOn("codeModules")||ke.isOn("disableStoreAndLegacyCode")||await this.handleBuildOutputResponse(s,o,r)}async getFile(e){let o=await this.api.getFile(e.path);await sr(o);let r=await ln(o);return{file:cc(r)}}async getFileList(){let e=await this.api.getFileList();await sr(e);let{files:o}=await ln(e);return{fileList:o.map(cc)}}async handleBuildOutputResponse(e,o,r){let s=await ln(e);if(r!==this.buildRequestFileMap.get(o))return;let i=[];for(let n in s.chunks){let p=s.chunks[n];p&&i.push({filename:n,contents:p})}this.buildOutputEmitter.emit({files:i})}async getBuildOutput(e){let{path:o}=e,r=await this.api.getBuildOutput(o);await sr(r);let s=await r.text();return{file:{type:"file",path:o,content:s}}}broadcast(e){this.fileUpdatesService.notify({files:e}).catch(N)}};function uc({projectId:t,api:e,channel:o,fileUpdatesService:r}){(0,pc.useEffect)(()=>{if(o)return ni.on(o).register(new ls(t,e,r))},[t,e,o,r])}var wo=k(T());var cs=class{constructor(e){this.socket=e;this.fileUpdatesEmitter=new ht;this.fileUpdatesStream=this.fileUpdatesEmitter.newStream;this.socket.onMessage(o=>{if(o.type==="fileUpdate"){let r=o.value;this.fileUpdatesEmitter.emit(r)}})}async notify(e){this.socket.send({type:"fileUpdate",value:e})}};function dc({channel:t,socket:e}){let o=(0,wo.useRef)((0,wo.useMemo)(()=>new cs(e),[e]));return(0,wo.useEffect)(()=>{if(t)return ii.on(t).register(o.current)},[t]),o.current}var fc=k(T());var cn="http://127.0.0.1:37263",Ht=class{static async getVersion(){try{return await fetch(`${cn}/version`,{mode:"cors"}).then(e=>e.json())}catch{throw new Error("Framer Tools app is not found")}}static async sampleColor(){return await Ht.getVersion(),fetch(`${cn}/sample_color`,{mode:"cors"}).then(e=>e.json())}static async getPermissions(){return await Ht.getVersion(),fetch(`${cn}/permissions`,{mode:"cors"}).then(e=>e.json()).catch(()=>({}))}};var mc={type:"add",variant:"info",icon:"color-wheel",action:{title:"Install",onClick:ma},text:"To sample colors, please use the new desktop app",key:"install-desktop-app",duration:5e3};function gc({channel:t,toast:e}){(0,fc.useEffect)(()=>{if(!t)return;let o={async sampleColor(){if(window.EyeDropper)return{color:(await new EyeDropper().open().catch(i=>{if((i==null?void 0:i.name)==="AbortError")return{sRGBHex:""};throw i})).sRGBHex};if(Vr())return e(mc),{};try{let r=await Ht.getPermissions();return(r==null?void 0:r.screen)===!1?(e({type:"add",variant:"info",icon:"apple",action:{title:"Learn More",onClick:()=>{st("https://www.framer.com/support/using-framer/color-picker-access/")}},text:"Framer Tools requires Screen Recording access",key:"screen-permissions",duration:5e3}),{}):await Ht.sampleColor()}catch(r){return r instanceof Error&&r.message!=="Framer Tools app is not found"?{}:(e(mc),{})}}};return ri.on(t).register(o)},[t,e])}var hc=k(T());function bc({channel:t,api:e,socket:o,fileUpdatesService:r}){(0,hc.useEffect)(()=>{if(!t)return;let s=new ht,i=o.onMessage(async a=>{if(a.type!=="moduleEvents")return;let c=await Promise.all(a.value.events.map(async u=>{if(u.type==="delete")return u;if(u.type==="save")return{type:"save",module:await e.getModule({moduleId:u.id})};Ie(u)}));s.emit({events:c})});function n(a){o.send({type:"moduleEvents",value:{events:a}})}let p=li.on(t).register({async create(a){let c=await e.createModule(a);return n([{type:"save",id:c.id,saveId:c.saveId}]),r.notify({files:[{type:"added",path:c.name}]}),c},async delete(a){let c=await e.deleteModule(a);return n([{type:"delete",id:c.id}]),r.notify({files:[{type:"deleted",path:c.name}]}),c},async getModuleDependencies(a){return e.getModuleDependencies(a)},async list(a){return await e.listModules(a)},async listNamespaces(){return await e.listNamespaces()},async listPublishedModules(a){return await e.listPublishedModules(a)},async lookUpModules(a){return await e.lookUpModules(a)},moduleEventsStream:s.newStream,async publish(a){return await e.publishModule(a)},async save(a){let c=await e.saveModule(a);return n([{type:"save",id:c.id,saveId:c.saveId}]),r.notify({files:[{type:"changed",path:c.name}]}),c},async saveBatch(a){let c=await e.saveModules(a);return n(c.data.map(u=>({type:"save",id:u.id,saveId:u.saveId}))),r.notify({files:c.data.map(u=>({type:"changed",path:u.name}))}),c},async update(a){let c=await e.updateModule(a);return n([{type:"save",id:c.id,saveId:c.saveId}]),c}});return()=>{i(),p()}},[t,o,e,r])}var yc=k(T());var vc=t=>{let{["private"]:e,tags:o,...r}=t;return{...r,tags:o||[],isPrivate:!!e}},Wt=async t=>({packages:(await t.json()).map(vc),totalCount:Number(t.headers.get("x-total-count"))||0}),nr=class{constructor(e){this.api=e;this.usingPublicPackages=!0}async findByName(e){return this.api.getPackage({fromPublicPackages:this.usingPublicPackages,...e}).then(vc)}async containsPackage(e){return this.api.findPackage({fromPublicPackages:this.usingPublicPackages,...e}).then(o=>({contained:o.status===200}))}async toggleFavorite(e){let{favorite:o}=e;try{await(o?this.api.favoritePackage({fromPublicPackages:this.usingPublicPackages,...e}):this.api.unfavoritePackage({fromPublicPackages:this.usingPublicPackages,...e}))}finally{}return this.findByName(e)}async fetchRecents(e){return this.api.getPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(Wt)}async fetchPackagesBySection(e){return this.api.getPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(Wt)}async fetchPackagesByPublisher(e){return this.api.getPublisherPackages(e).then(Wt)}async fetchPackagesByPopularity(e){return this.api.getPopularPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(Wt)}async fetchTrendingPackages(e){return this.api.getTrendingPackages().then(Wt)}async fetchFeaturedPackages(e){return this.api.getFeaturedPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(Wt)}async search(e){let{query:o}=e;return(o===""?this.api.getPackages({fromPublicPackages:this.usingPublicPackages,offset:0,spaceIds:e.spaceIds}):this.api.findPackages({fromPublicPackages:this.usingPublicPackages,...e})).then(Wt)}async getPublishStatus(e){return this.api.getPackageVersionStatus(e).then(o=>["pending","queued","in_progress"].includes(o.status)?{...o,status:"pending"}:o)}async fetchPreflight(e){return this.api.preflightPackage({fromPublicPackages:this.usingPublicPackages,body:e}).then(o=>({ok:!0,...o})).catch(o=>{var i;let{message:r}=o;return{ok:!1,errorMessage:((i=JSON.parse(r).error)==null?void 0:i.message)||""}})}async removePackage(e){return this.api.deletePackage({fromPublicPackages:this.usingPublicPackages,...e})}async fetchMeta(e){let{name:o,dependencies:r=[]}=e,s=o?[o,...r]:r,i={};if(s.length===0)return{dependenciesMeta:i};let n=await this.api.getPackagesMetadata({packageNames:s}),p={dependenciesMeta:i};return Object.keys(n).forEach(a=>{let c=n[a];if(!c)return;let{["private"]:u,...m}=c,f={...m,isPrivate:!!u};a===o?p.meta=f:i[a]=f}),p}},ps=class extends nr{constructor(){super(...arguments);this.usingPublicPackages=!1}async fetchFeaturedPackages(o){return this.api.getFeaturedPackages({fromPublicPackages:this.usingPublicPackages,...o}).then(Wt)}};function Pc({api:t,channel:e}){(0,yc.useEffect)(()=>{if(!e)return;let o=pi.on(e).register(new nr(t)),r=ci.on(e).register(new ps(t));return()=>{o(),r()}},[t,e])}var Cc=k(T());var us=class{constructor(e){this.api=e}async listPhotos(e){return this.api.listPhotos(e)}async searchPhotos(e){return this.api.searchPhotos(e)}async getRandomPhoto(e){return this.api.getRandomPhoto(e)}async downloadPhoto(e){return this.api.downloadPhoto(e)}};function wc({api:t,channel:e}){(0,Cc.useEffect)(()=>{if(e)return ui.on(e).register(new us(t))},[t,e])}var mt=k(T());var It=k(T());var kc=k(T()),So={},kt=window,pn=new class{updateActionManager(t){kt&&(kt.actionManager=t)}hotKeysDisabled(){if(l.chromeStore.isProjectMenuOpen)return!0;switch(l.chromeStore.mainView){case 3:return!0;default:return!1}}};function Ic(t){if("_bridge"in t)return;kt=t;function e(s,i){var n;if(l.documentSettings.hasDarkAppearance=s,!i){let p=window.frames;for(let a=0;a<p.length;a++)(n=p[a])==null||n.postMessage({appearance:s?"dark":"light"},"*")}}kt._bridge=(s,...i)=>{var n;So[s]&&((n=So[s])==null||n.forEach(p=>p(...i)))};function o(s){kt==null||kt._bridge("error",s)}kt.addEventListener("error",o);function r(s){!s.data||!s.data.appearance||e(s.data.appearance==="dark",!1)}kt.addEventListener("message",r)}function Tc(t){(0,kc.useEffect)(()=>(t((e,o)=>{var r;So[e]||(So[e]=[]),(r=So[e])==null||r.push(o)}),()=>{So={}}),[t])}var Ac="container_c1m6xhbt";var gf=Da(l.canvasStore.assetMap);Ai({assetResolver:gf,fetchGoogleFontsList:Ja,enableFontStore:!0,executionTimeBudgets:{frame:500,component:150},experiments:ke,projectFeatures:W});if(l.chromeStore.userIsEmployee||ua.isDevelopment)window.Vekter=en.Vekter;else{let t=["e96bd9c5-e994-4069-955c-a665e70135ef"];(window==null?void 0:window.framerUser.spaces.some(o=>We(o)&&o.organization&&t.includes(o.organization.id)))&&Object.defineProperty(window,"Vekter",{get(){return fi("\u201CVekter\u201D is an internal API. Using it is deprecated and it will be replaced soon."),en.Vekter}})}Pi({target:"CANVAS"});var Mc=It.default.memo(()=>{let{isDarkMode:t,setDarkMode:e,setOverrideSystem:o}=De(),r=(0,It.useRef)(!0);return It.default.useEffect(()=>{l.documentSettings.onSetHasDarkAppearance=s=>{e(s),o(!0)}},[]),It.default.useEffect(()=>{l.documentSettings.hasDarkAppearance=t},[t]),r.current&&(l.documentSettings.hasDarkAppearance=t,r.current=!1),Ic(window),window.addEventListener("touchmove",hf,{passive:!1}),It.default.createElement("div",{className:Ac},It.default.createElement(Xa,null,It.default.createElement(Nl,null)))});function hf(t){t.preventDefault(),t.stopPropagation()}function Lc({socket:t,projectId:e,userId:o,documentConnection:r}){let{documentURL:s,imageBaseURL:i,projectServerURL:n}=os({projectId:e});return Ul({documentURL:s,imageBaseURL:i,projectURL:n}),(0,mt.useEffect)(()=>{r.setSendFunction(u=>{t.send(u)}),r.setUploadSnapshotFunction(u=>{let m=l.treeStore.designDocumentURL;u.force!==void 0&&m.searchParams.set("force",u.force?"true":"false"),u.migration!==void 0&&m.searchParams.set("migration",u.migration?"true":"false"),m.searchParams.set("treeVersion",u.treeVersion.toString()),fetch(m.href,{method:"POST",credentials:"include",headers:Ia,body:JSON.stringify(u.tree)}).catch(C=>{console.warn("Failed to send snapshot:",C)})});let p=t.onConnect(u=>{r.onConnect(),u||l.modulesStore.refresh().catch(N)}),a=t.onDisconnect(u=>r.onDisconnect(u)),c=t.onMessage(u=>r.onMessage(u));return t.connect(),()=>{p(),a(),c()}},[r,t,e,o]),(0,mt.useEffect)(()=>t.onDisconnect(a=>{switch(a){case"AccessDenied":{window.location.reload();break}case"DocumentNotFound":{E({type:"add",variant:"error",key:"document-not-found",text:"The project data could not be loaded. If this error persists, please notify Framer Support.",duration:1/0,icon:"error",showCloseButton:"never"});break}case"UnsupportedSchema":{E({type:"add",variant:"error",key:"unsupported-schema",text:"Outdated document version. Opening this document is no longer supported.",duration:1/0,icon:"error",showCloseButton:"never"});break}}}),[t,e]),mt.default.createElement(es,{location:"vekter",title:"Failed to load editor",description:mt.default.createElement(mt.default.Fragment,null,mt.default.createElement(v,null,"Something unexpected happened while loading the editor. Try disabling any ad-blocking browser extensions and reload the page."),mt.default.createElement("br",null),mt.default.createElement("br",null))},mt.default.createElement(Mc,null))}var L=k(T());var xc={label:"File",submenu:[{type:"separator"},{label:"Create With AI",role:"generateWebPage",ellipsis:!0,visible:ke.isOn("aiAndTheming")},{label:"New Web Page",role:"newWebPage"},{label:"New Canvas Page",role:"newPage"},{type:"separator"},{label:d.importSketch,ellipsis:!0,role:"importSketch"},{label:d.importFigma,ellipsis:!0,role:"importFigma",accelerator:y.importFigma},{type:"separator"}]},vf={label:"Edit",submenu:[{label:d.undo,role:"undo"},{label:d.redo,role:"redo"},{type:"separator"},{label:d.cut,role:"cut",requiresUserInteraction:!0},{label:"Copy",submenu:[{label:d.copy,role:"copy",requiresUserInteraction:!0},{label:d.copyStyle,role:"copyStyle",accelerator:y.copyStyle,requiresUserInteraction:!0},{label:d.copyImage,role:"copyImage",accelerator:y.copyImage,requiresUserInteraction:!0},{label:d.copyImport,role:"copyImport",requiresUserInteraction:!0},{label:d.copyLink,role:"copyLink",requiresUserInteraction:!0},{label:d.copyCSS,role:"copyCSS",requiresUserInteraction:!0},{label:d.copySVG,role:"copySVG",requiresUserInteraction:!0},{label:d.copyText,role:"copyText",requiresUserInteraction:!0},{label:d.copyGrid,role:"copyGrid",requiresUserInteraction:!0},{label:d.copyPageEffects,role:"copyPageEffects",requiresUserInteraction:!0},{type:"separator"},{label:d.copyCodeComponentIdentifier,role:"copyCodeComponentIdentifier",requiresUserInteraction:!0}]},{label:"Paste",submenu:[{label:d.paste,role:"paste",requiresUserInteraction:!0},{label:d.pasteStyle,role:"pasteStyle",accelerator:y.pasteStyle,requiresUserInteraction:!0},{label:d.pastePageEffects,role:"pastePageEffects",requiresUserInteraction:!0},{label:d.pasteGrid,role:"pasteGrid",requiresUserInteraction:!0}]},{label:d.duplicate,role:"duplicate",accelerator:y.duplicate},{label:d.delete,role:"delete"},{type:"separator"},{label:d.rename,role:"rename",accelerator:y.rename},{label:d.toggleLayerLock,role:"toggleLayerLock",accelerator:y.toggleLayerLock},{label:d.toggleLayerVisible,role:"toggleLayerVisible",accelerator:y.toggleLayerVisible},{type:"separator"},{label:d.selectMostRecentPage,role:"selectMostRecentPage",accelerator:y.selectMostRecentPage},{label:d.selectGroundNode,role:"selectGroundNode",acceleratorLabel:y.selectGroundNode,acceleratorLabelWindows:dt.selectGroundNode},{label:d.selectParent,role:"selectParent",acceleratorLabel:y.selectParent},{label:d.selectAll,role:"selectAll"},{label:d.selectSiblings,role:"selectSiblings",accelerator:y.selectSiblings},{label:d.selectChildren,role:"selectChildren",accelerator:y.selectChildren},{label:d.selectAllTopParents,role:"selectAllTopParents"},{label:d.selectTextNodes,role:"selectTextNodes"}]},yf={label:"Tool",submenu:[{label:"Insert",role:"toggleInsert",accelerator:y.toggleInsert},{label:"Library",role:"toggleLibraryModal",acceleratorLabel:y.toggleLibraryModal},{type:"separator"},{label:"Layout",visible:W.isOn("sites"),submenu:[{label:d[x.actionForCase(20)],role:x.actionForCase(20),accelerator:y[x.actionForCase(20)]},{label:d[x.actionForCase(21)],role:x.actionForCase(21),accelerator:y[x.actionForCase(21)]},{label:d[x.actionForCase(22)],role:x.actionForCase(22),accelerator:y[x.actionForCase(22)]},{label:d[x.actionForCase(23)],role:x.actionForCase(23),accelerator:y[x.actionForCase(23)]},{label:d[x.actionForCase(25)],role:x.actionForCase(25)},{label:d[x.actionForCase(24)],role:x.actionForCase(24)}]},{label:d[x.actionForCase(12)],role:x.actionForCase(12),accelerator:y[x.actionForCase(12)]},{label:d[x.actionForCase(10)],role:x.actionForCase(10),accelerator:y[x.actionForCase(10)]},{label:d[x.actionForCase(11)],role:x.actionForCase(11),accelerator:y[x.actionForCase(11)]},{label:d[x.actionForCase(14)],role:x.actionForCase(14),accelerator:y[x.actionForCase(14)]},{label:d.startLinkTool,role:"startLinkTool",accelerator:y.startLinkTool},{label:d[x.actionForCase(19)],role:x.actionForCase(19),accelerator:y[x.actionForCase(19)]},{label:d[x.actionForCase(26)],role:x.actionForCase(26)},{label:d[x.actionForCase(27)],role:x.actionForCase(27)},{label:d[x.actionForCase(13)],role:x.actionForCase(13),accelerator:y[x.actionForCase(13)]},{label:d[x.actionForCase(33)],role:x.actionForCase(33),accelerator:y[x.actionForCase(33)]},{label:d[x.actionForCase(16)],role:x.actionForCase(16),accelerator:y[x.actionForCase(16)]},{label:d[x.actionForCase(15)],role:x.actionForCase(15),accelerator:y[x.actionForCase(15)]},{label:d[x.actionForCase(17)],role:x.actionForCase(17)},{label:d[x.actionForCase(18)],role:x.actionForCase(18)},{type:"separator"},{label:d[x.actionForCase(4)],role:x.actionForCase(4),accelerator:y[x.actionForCase(4)]},{label:d[x.actionForCase(40)],role:x.actionForCase(40),accelerator:y[x.actionForCase(40)]},{label:d[x.actionForCase(39)],role:x.actionForCase(39),accelerator:"/"},{label:d.sampleColor,role:"sampleColor",accelerator:y.sampleColor}]},Pf={label:"Layout",submenu:[{label:d.addEnclosingFrame,role:"addEnclosingFrame",accelerator:y.addEnclosingFrame},{label:d.addEnclosingStack,role:"addEnclosingStack",accelerator:y.addEnclosingStack},{label:d.removeFramePreservingChildren,role:"removeFramePreservingChildren",accelerator:y.removeFramePreservingChildren},{type:"separator"},{label:d.autoSize,role:"autoSize",accelerator:y.autoSize},{label:d.sizeToFitContent,role:"sizeToFitContent",accelerator:y.sizeToFitContent},{type:"separator"},{label:d.moveToFront,role:"moveToFront",accelerator:y.moveToFront},{label:d.moveForward,role:"moveForward",accelerator:y.moveForward},{label:d.moveBackward,role:"moveBackward",accelerator:y.moveBackward},{label:d.moveToBack,role:"moveToBack",accelerator:y.moveToBack},{type:"separator"},{label:"Align",submenu:[{label:d.alignLeft,role:"alignLeft",accelerator:y.alignLeft},{label:d.alignCenter,role:"alignCenter",accelerator:y.alignCenter},{label:d.alignRight,role:"alignRight",accelerator:y.alignRight},{type:"separator"},{label:d.alignTop,role:"alignTop",accelerator:y.alignTop},{label:d.alignMiddle,role:"alignMiddle",accelerator:y.alignMiddle},{label:d.alignBottom,role:"alignBottom",accelerator:y.alignBottom},{type:"separator"},{label:d.distributeHorizontal,role:"distributeHorizontal",accelerator:y.distributeHorizontal,acceleratorWindows:dt.distributeHorizontal},{label:d.distributeVertical,role:"distributeVertical",accelerator:y.distributeVertical,acceleratorWindows:dt.distributeVertical},{type:"separator"},{label:d.alignToSelection,role:"alignToSelection"},{label:d.alignToParent,role:"alignToParent"}]}]},Cf={label:"Text",submenu:[{label:d.makeBold,role:"makeBold",accelerator:y.makeBold},{label:d.makeItalic,role:"makeItalic",accelerator:y.makeItalic},{label:d.makeUnderlined,role:"makeUnderlined",accelerator:y.makeUnderlined},{label:d.chooseTypeface,role:"chooseTypeface",accelerator:y.chooseTypeface},{label:d.rewriteText,ellipsis:!0,role:"rewriteText"},{label:d.rewriteTextInPlace,role:"rewriteTextInPlace"}]},wf={label:"Graphic",submenu:[{label:"Group",role:"group",accelerator:y.group},{label:"Ungroup",role:"ungroup",accelerator:y.ungroup},{type:"separator"},{label:d.flipHorizontal,role:"flipHorizontal"},{label:d.flipVertical,role:"flipVertical"},{type:"separator"},{label:"Flatten",role:"flattenPath"},{label:"Reverse Path Direction",role:"reversePath"}]},Sf={label:"Component",submenu:[{label:d.makeComponent,ellipsis:!0,role:"makeComponent",accelerator:y.makeComponent},{label:d.makeCodeComponent,ellipsis:!0,role:"makeCodeComponent",accelerator:y.makeCodeComponent},{type:"separator"},{label:d.showComponentMaster,role:"showComponentMaster"},{label:d.detachComponentInstanceFromMaster,role:"detachComponentInstanceFromMaster"},{label:d.updateComponentMasterFromInstance,role:"updateComponentMasterFromInstance"},{type:"separator"},{label:d.resetComponentInstanceOverrides,role:"resetComponentInstanceOverrides"}]},kf={label:"Preview",submenu:[{role:"showPreview",accelerator:y.showPreview},{role:"showPreviewNewWindow",accelerator:y.showPreviewNewWindow,requiresUserInteraction:!0}]},If={label:"Code",submenu:[{label:d.createCodeComponent,role:"createCodeComponent"},{label:d.createOverride,role:"createOverride"},{label:d.createDataFileFromEndpoint,ellipsis:!0,role:"createDataFileFromEndpoint",visible:W.isOn("sites")&&ke.isOn("collectionsFromCode")},{type:"separator"},{label:d.saveCodeFile,role:"saveCodeFile",acceleratorLabel:y.saveCodeFile},{type:"separator"},{label:d.showAPIDocumentation,role:"showAPIDocumentation",requiresUserInteraction:!0}]},Tf={label:"Help",submenu:[{label:d.sitesGetStarted,role:"sitesGetStarted",requiresUserInteraction:!0},{label:d.startAppTour,role:"startAppTour",requiresUserInteraction:!0},{type:"separator"},{label:d.requestFeature,role:"requestFeature",requiresUserInteraction:!0},{label:d.openCommunity,role:"openCommunity",requiresUserInteraction:!0},{label:d.openChangelog,role:"openChangelog",requiresUserInteraction:!0},{type:"separator"},{label:d.keyboardShortcuts,role:"keyboardShortcuts"},{label:d.copyVersion,role:"copyVersion",requiresUserInteraction:!0}]},jc={label:d.goToProjects,role:"goToProjects"},Af={label:d.quickActions,role:"quickActions",ellipsis:!0,accelerator:y.quickActions},Ec=t=>({visible:W.isOn("sites"),role:"publishSite",accelerator:t?y.publishSite:void 0}),ko=$s({view:()=>{let t=[{label:d.zoomIn,role:"zoomIn",accelerator:y.zoomIn},{label:d.zoomOut,role:"zoomOut",accelerator:y.zoomOut},{label:d.resetZoom,role:"resetZoom",accelerator:y.resetZoom,acceleratorWindows:dt.resetZoom},{label:d.zoomToFitAll,role:"zoomToFitAll",accelerator:y.zoomToFitAll,acceleratorWindows:dt.zoomToFitAll},{label:d.zoomToFitSelection,role:"zoomToFitSelection",accelerator:y.zoomToFitSelection,acceleratorWindows:dt.zoomToFitSelection},{label:d.collapseAllLayers,role:"collapseAllLayers",accelerator:y.collapseAllLayers}];return W.isOn("sites")&&t.push({type:"separator"},{label:d.showPages,role:"showPages",accelerator:y.showPages},{label:d.showLayers,role:"showLayers",accelerator:y.showLayers},{label:d.showAssets,role:"showAssets",accelerator:y.showAssets}),t.push({type:"separator"},{label:d.toggleInterface,role:"toggleInterface",accelerator:y.toggleInterface,acceleratorWindows:dt.toggleInterface},{label:d.toggleShowAllLinks,role:"toggleShowAllLinks"},{label:d.toggleRulers,role:"toggleRulers",accelerator:y.toggleRulers,acceleratorWindows:dt.toggleRulers},{label:d.toggleGrids,role:"toggleGrids",accelerator:y.toggleGrids,acceleratorWindows:dt.toggleGrids},{label:d.toggleCondensedTooltips,role:"toggleCondensedTooltips"},{label:d.toggleToolbarLabels,role:"toggleToolbarLabels"},{type:"separator"},{label:d.toggleShowPixelGrid,role:"toggleShowPixelGrid"}),{label:"View",submenu:t}},webViewMenu:()=>({label:"View",submenu:[{label:"Appearance",submenu:[{label:d.toggleAppearanceSystem,role:"toggleAppearanceSystem"},{role:"toggleAppearance",accelerator:y.toggleAppearance,acceleratorWindows:dt.toggleAppearance}]},{type:"separator"},...Array.isArray(ko.view.submenu)?ko.view.submenu:[]]}),webFileMenu:()=>({label:"File",submenu:[{role:"newProject",ellipsis:!0,visible:ke.isOn("insertPages"),accelerator:ke.isOn("insertPages")?y.newProject:void 0,requiresUserInteraction:!0},{role:"newProjectFromTemplate",ellipsis:!0,label:ke.isOn("insertPages")?d.newProjectFromTemplate:d.newProject,accelerator:ke.isOn("insertPages")?void 0:y.newProject},{role:"copyRemixLink",requiresUserInteraction:!0},{role:"duplicateProject",requiresUserInteraction:!0},{role:"duplicateAsSite",requiresUserInteraction:!0,badge:"new"},{role:"archiveProject"},{role:"unarchiveProject"},{role:"toggleVersionHistory",label:d.toggleVersionHistory,accelerator:y.toggleVersionHistory},{type:"separator",visible:W.isOn("sites")},Ec(!0),{visible:W.isOn("sites"),role:"openPublishedSite",accelerator:y.openPublishedSite},{type:"separator"},{role:"uploadImage",accelerator:y.uploadImage},{type:"separator"},{label:d.exportToHTML,role:"exportToHTML"},{type:"separator"},...Array.isArray(xc.submenu)?xc.submenu:[],{type:"separator"},{visible:W.isOn("sites"),role:"inviteCollaborators",ellipsis:!0},{role:"copyProjectLink",requiresUserInteraction:!0},{role:"saveProjectAsTemplate"},{role:"saveTemplateAsProject"}]}),preferencesMenu:()=>({label:"Preferences",submenu:[{label:d.useDirectSelect,role:"useDirectSelect"},{label:d.useSmartLayoutPins,role:"useSmartLayoutPins"},{label:d.reverseZoomDirection,role:"reverseZoomDirection"},{label:d.animateOnZoom,role:"animateOnZoom"},{label:d.autoSwitchToLayers,role:"autoSwitchToLayers"},{label:d.showScrollToContentToast,role:"showScrollToContentToast"},{label:"Show Packages",role:"showPackages",badge:"Legacy"},{type:"separator"},{label:d.resetDefaultFrameBackground,role:"resetDefaultFrameBackground"},{label:d.resetVideoBanners,role:"resetVideoBanners"},{type:"separator"},{label:d.nudgePreferences,role:"nudgePreferences"},{type:"separator"},{label:d.togglePerformanceMode,role:"togglePerformanceMode"}]}),settingsMenu:()=>({visible:W.isOn("sites"),label:"Site Settings",submenu:[{label:d.openSiteSettings,role:"openSiteSettings",accelerator:y.openSiteSettings},{type:"separator"},{label:d.openGeneralSettings,role:"openGeneralSettings"},{label:d.openDomainSettings,role:"openDomainSettings"},{label:d.openRedirects,role:"openRedirects"},{label:d.openVersions,role:"openVersions"},{label:d.openAnalytics,role:"openAnalytics"},{label:d.openPlans,role:"openPlans"}]})}),Mf={role:"openAccountSettings",label:d.openAccountSettings},un=$s({mobileWebAppMenu:()=>[jc,{type:"separator"},Ec(!1)],webAppMenu:()=>[jc,{type:"separator"},Af,{type:"separator"},ko.webFileMenu,vf,ko.webViewMenu,yf,Pf,Cf,wf,Sf,kf,If,ko.preferencesMenu,{type:"separator"},ko.settingsMenu,Tf,Mf]});var Pt=k(T());function Dc({onDismiss:t,onConfirm:e,unsupportedFeatures:o}){return Pt.default.createElement(Et,{visible:!0,onDismiss:t,className:Dt.container},Pt.default.createElement(S,{gap:20},Pt.default.createElement(Te,{className:Dt.title},"Duplicate as Site"),Pt.default.createElement(Te,{size:Mi.size.base,className:Dt.secondaryText},"Some features of your project are not supported and will be not be duplicated:",Pt.default.createElement("ul",null,o.map((r,s)=>Pt.default.createElement("li",{key:s},r)))),Pt.default.createElement(S,{direction:"row"},Pt.default.createElement(Y,{title:"Cancel",onClick:t,large:!0,className:Dt.grow}),Pt.default.createElement(Y,{onClick:e,variant:"primary",large:!0,className:Dt.grow},"Duplicate"))))}var Nc="dismissed-legacy-deprecation-toast",Lf=14;function Uc(t){if(t.canvasFeatures.sites)return;let e=localStorage.getItem(Nc);if(e){let i=new Date(e);if(i.setDate(i.getDate()+Lf),i>new Date)return}let o=["e96bd9c5-e994-4069-955c-a665e70135ef"],r=window==null?void 0:window.framerUser,s=r==null?void 0:r.spaces.find(i=>i.id===t.space.id);We(s)&&s.organization&&o.includes(s.organization.id)||E({type:"add",variant:"warning",icon:"warning",text:"Legacy projects will become view-only on September 30, 2023",key:"legacy-deprecation-toast",duration:1e4,action:{title:"Learn more",onClick(){F("ui_interaction",{page:"legacy-ui-deprecation-toast",id:"learn_more"}),localStorage.setItem(Nc,new Date().toISOString()),st("https://www.framer.com/learn/legacy-ui-deprecation/")}}})}var be=k(T());var Fc="modal_m1k7kvam",Oc="moveDraftTitle_m12ee7ht",Bc="moveDraftDescription_m1jpz33r",_c="moveDraftButton_mwem6zi",Hc="confirmMoveDraftButton_c1qp1m89",Wc="buttonChevron_bl7xnjh";function qc({project:t,user:e,onShowMoveProjectMenu:o,onConfirmMoveProject:r,moveProjectDestination:s,onDismiss:i}){let n=(0,be.useRef)(null),[p,a]=(0,be.useState)(!1);be.default.useEffect(()=>{F("ui_impression",{page:"deprecate-drafts-modal"})},[]);let c=(0,be.useMemo)(()=>{let f=ho(t,e),C=f.label==="Drafts"?"Choose\u2026":"Drafts";return{...f,label:C}},[t,e]);async function u(){if(n.current===null)return;let f=n.current.getBoundingClientRect();a(!0),await o({location:{x:f.left,y:f.bottom},showBackToDashboardItem:!1,skipConfirmation:!0,hideDrafts:!0}),a(!1)}let m=be.default.useCallback(async()=>{F("ui_interaction",{page:"deprecate-drafts-modal",id:"move-to-teams"}),await r(),i()},[r,i]);return be.default.createElement(Et,{hasBackdrop:!0,visible:!0,onDismiss:qe,zIndex:12,className:Fc},be.default.createElement(S,{gap:15,alignItems:"flex-start",justifyContent:"flex-start"},be.default.createElement(S,{gap:10},be.default.createElement("div",{className:Oc},"Select a Team"),be.default.createElement("div",{className:Bc},be.default.createElement(v,null,"You have multiple teams where you can"),be.default.createElement("br",null),be.default.createElement(v,null,"create projects. Please choose a team"),be.default.createElement("br",null),be.default.createElement(v,null,"for this project to continue editing."))),be.default.createElement(Y,{className:_c,large:!0,onClick:u,ref:n},be.default.createElement("div",{className:he},s||c.label),be.default.createElement("div",{className:Wc},be.default.createElement(Sr,{isActive:p}))),be.default.createElement(Y,{onClick:m,large:!0,className:Hc,variant:"primary",enabled:!!s&&s!==c.label},be.default.createElement(v,null,"Confirm"))))}var Io=k(T());var Vc="modal_m1sbcbyn",$c="title_t14j9fcj",dn="checkBoxLabel_cr11tra",mn="checkBoxLabelLink_chr9530",Rc="continueButton_chz9b7s";var xe=k(T());var jf=rt("signup");function Gc({firstName:t,lastName:e,email:o,onContinue:r}){let[s,i]=xe.default.useState(!1),[n,p]=xe.default.useState(!1),a=xe.default.useCallback(c=>{w.post("/auth/v2/signup/google-one-tap",{subscribe:n,origin:"framer-web",firstName:t,lastName:e,email:o}).then(r).catch(u=>jf.reportError(u)),c.preventDefault()},[n,o,t,e,r]);return xe.default.createElement("form",{onSubmit:a},xe.default.createElement(S,{gap:25,padding:10},xe.default.createElement("div",{className:$c},"Before you continue\u2026"),xe.default.createElement(S,{gap:20,direction:"column"},xe.default.createElement(S,{direction:"row",alignItems:"center"},xe.default.createElement(Jt,{large:!0,id:"tos-accept",value:s,onChange:i}),xe.default.createElement("label",{htmlFor:"tos-accept"},xe.default.createElement(Ef,null))),xe.default.createElement(S,{direction:"row",alignItems:"center"},xe.default.createElement(Jt,{large:!0,id:"tos-email-optin",title:"Send me updates via email. Unsubscribe any time",value:n,onChange:p}),xe.default.createElement("label",{htmlFor:"tos-email-optin"},xe.default.createElement(Te,{className:dn},"Send me updates via email. Unsubscribe any time")))),xe.default.createElement(Y,{type:"submit",large:!0,variant:"primary",title:"Continue","aria-label":"continue",enabled:s,className:Rc})))}function Ef(){return xe.default.createElement(Te,{className:dn},"I agree to the"," ",xe.default.createElement("a",{href:"https://www.framer.com/support/accounts/terms-of-service/",target:"_blank",className:mn},"Terms of Service")," ","and"," ",xe.default.createElement("a",{href:"https://www.framer.com/support/accounts/privacy-statement/",target:"_blank",className:mn},"Privacy Statement"))}function Df(t,e){var o;(o=window.dataLayer)==null||o.push({event:"eventTracking",trackingEventCategory:e,trackingEventAction:t,trackingEventLabel:"",trackingEventValue:""})}var Kc=()=>Df("Web","CompleteRegistration");function Zc({accountApi:t}){var i;let{account:e,fetchProfile:o,fetchMe:r}=t;Io.default.useEffect(()=>{Kc(),o()},[o]);let s=Io.default.useCallback(async()=>{await r(),l.modalStore.set({type:"Welcome",source:"automatic"})},[r]);return Io.default.createElement(Et,{hasBackdrop:!0,visible:!0,onDismiss:qe,className:Vc},(i=e==null?void 0:e.profile)!=null&&i.email?Io.default.createElement(Gc,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.profile.email,onContinue:s}):Io.default.createElement(vt,null))}var Jc=k(T());var Yc=new Rr;function Xc(t,e){return(0,Jc.useEffect)(()=>{let o=Yc,r=[];return t((s,i,n)=>{o.set(s,i,n),r.push(s)}),()=>{r.forEach(s=>o.remove(s))}},e),Yc}var At=k(T());var Nf=rt("useHistory"),Uf={key:"project"};function Ff(t,e){return!!(t.key==="project"&&e.key==="project"||t.key==="preview"&&e.key==="preview"&&Ba(t.previewItem,e.previewItem))}function Of(t){if(t===null)return!0;if(typeof t=="object"&&t!==null){let e=t.key;return e==="project"||e==="preview"}return!1}function op(t){return t||Uf}function Qc({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r,preview:s=!1}){let i=new URL("/projects/"+wl(t),window.location.origin);i.search=e,i.searchParams.delete("preview"),s&&i.searchParams.set("preview","1");let n=(W.isOn("codeModules")||ke.isOn("disableStoreAndLegacyCode"))&&r?r:null;return Ra(i,{nodeId:o,codeModuleLocalId:n}),i.href}function Bf({shareLinkUrl:t}){let e=new URL(t);return e.searchParams.set("editor","1"),e.href}function ep({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r,shareLinkUrl:s,previewItem:i}){let n=t.canvasFeatures.sites?Qc({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r,preview:!0}):Bf({shareLinkUrl:s});return{project:{key:"project",url:Qc({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r})},preview:{key:"preview",url:n,previewItem:i}}}function tp({url:t,...e}){(t!==window.location.href||!Ff(e,op(window.history.state)))&&window.history.replaceState(e,"",t)}function rp(t,e){let o=At.default.useRef(t),r=At.default.useRef(ep(t)),s=At.default.useRef("project");At.default.useEffect(()=>{let a=r.current,c=s.current;tp(a[c])},[]);let i=At.default.useCallback(a=>{Object.assign(o.current,a);let c=ep(o.current);r.current=c;let u=s.current;tp(c[u])},[]),n=At.default.useCallback(a=>{let c=r.current,u=s.current;if(u===a)return;let{url:m,...f}=c[a];u==="project"&&a==="preview"?(window.history.pushState(f,"",m),s.current=a):u==="preview"&&a==="project"&&window.history.back()},[]),p=At.default.useCallback(a=>{if(!Of(a.state)){Nf.warn("Unexpected history state: ",a.state);return}let c=op(a.state);s.current=c.key;let m=r.current.project.url;c.key==="project"&&m!==window.location.href&&window.history.replaceState(c,"",m),e(c)},[e]);return At.default.useEffect(()=>(window.addEventListener("popstate",p),()=>window.removeEventListener("popstate",p)),[p]),{updateHistoryData:i,setHistoryState:n}}var ds=k(T());function sp(t,e,o){let[r,s]=(0,ds.useState)(null);return(0,ds.useEffect)(()=>{let i=!0,n=t.filter(p=>nt(p)?e===p.ownerId:!0).map(({id:p})=>p);return o.getCollectionsMany({spaceIds:n}).then(p=>{i&&s(p)}).catch(()=>{}),()=>{i=!1}},[t,o,e]),{collections:r}}var qt=k(T());function np({project:t}){let[e,o]=(0,qt.useReducer)(Wf,{project:t},_f);(0,qt.useEffect)(()=>{localStorage.setItem(`shared-preview-fullscreen-${t.id}`,JSON.stringify(e.fullscreen))},[t.id,e.fullscreen]),(0,qt.useEffect)(()=>{localStorage.setItem(`shared-preview-highlights-${t.id}`,JSON.stringify(e.highlights))},[t.id,e.highlights]);let r=(0,qt.useMemo)(()=>qf(o),[]);return[e,r]}function ip({project:t,shareLink:e}){return(0,qt.useMemo)(()=>(we(t.shareLinks[0],"Cannot build share URL: empty share links"),Al({shareId:t.shareLinks[0].id,frameId:e.nodeId,title:t.title,fullscreen:e.fullscreen,highlights:W.isOn("sites")?!1:e.highlights},Zt().app)),[t,e])}function _f({project:t}){let e=t.settings.featureFlags.canHidePreviewInterface==="on",o=localStorage.getItem(`shared-preview-fullscreen-${t.id}`),r=o&&e?JSON.parse(o):!1,s=localStorage.getItem(`shared-preview-highlights-${t.id}`),i=s?JSON.parse(s):!0;return we(t.shareLinks[0],"Cannot initialize useShareLink: empty share links"),{publicAccess:t.shareLinks[0].publicAccess,fullscreen:r,highlights:i}}function Hf(t,e){e.type==="setNodeId"?t.nodeId=e.value:e.type==="setPublicAccess"?t.publicAccess=e.value:e.type==="setFullscreen"?t.fullscreen=e.value:e.type==="setHighlights"?t.highlights=e.value:Ie(e)}function Wf(t,e){return Br(t,o=>Hf(o,e))}function qf(t){return{setNodeId(e){t({type:"setNodeId",value:e})},setPublicAccess(e){t({type:"setPublicAccess",value:e})},setFullscreen(e){t({type:"setFullscreen",value:e})},setHighlights(e){t({type:"setHighlights",value:e})}}}var ap=k(T());function lp(){return(0,ap.useCallback)(async(t,e,o)=>{e&&(o||(o=l.canvasStore.getViewportCenter()),await Qa(l,[e],o,t))},[])}var ir=k(T());function cp({channel:t,project:e,canMoveProject:o,onShowMoveProjectMenu:r,onShowUpgradeOrTrialModal:s}){let i=new ht,n=(0,ir.useRef)(i);(0,ir.useEffect)(()=>{if(!t)return;let p=yr.on(t).expect();return yr.on(t).register({currentProjectStream:n.current.newStream,showMoveProjectMenu:async({location:a})=>{await r({location:a,showBackToDashboardItem:!1})},showUpgradeOrTrialModal:async({show:a,trackingPage:c})=>{let u;switch(a){case"fonts":u="fonts";break;default:Ie(a)}s(u,c)}}),()=>{yr.unregister(p)}},[t,o,r,s]),(0,ir.useEffect)(()=>{var p,a,c;n.current.emit({title:(p=e.title)!=null?p:void 0,space:{...e.space,displayName:(a=e.space.displayName)!=null?a:void 0,icon:(c=e.space.icon)!=null?c:void 0},shareLinks:e.shareLinks,canMoveProject:o})},[e,o])}var pp="moveProjectMenu_mqspbls";var up=new ht,dp=!1;function mp({channel:t,user:e,permissions:o}){if(up.emit(o),dp)return;let r={getSessionIdentity:async()=>({user:e}),permissionsStream:up.newStream};mi.on(t).register(r),dp=!0}var gs=k(T());var Vf="Settings";function fp(){let t=ml(Ta,Qi,"employeesOnlySettings");return[{label:Vf,submenu:t.options},t.actionHandlers]}var $f="Employees Only",ms=async t=>{var o;let e=(o=l.remoteDocument)==null?void 0:o.projectId;e&&(await w.post(`/web/projects/${e}`,{canvasFeatures:{[t]:!W.isOn(t)}}),window.location.reload())};function Rf(){return fl({label:"Copy Duplicate Link",role:"copyDuplicateLink",action(){if(!l.remoteDocument)return;let e=`https://${window.location.hostname.endsWith(".development.framer.com")?"development.framer.com":"framer.com"}/projects/new?duplicate=${l.remoteDocument.projectId}`;Je(e).catch(N)},requiresUserInteraction:!0},{label:"Duplicate Version\u2026",role:"duplicateProjectWithVersion",action(){l.modalStore.set({type:"DuplicateProjectWithVersion",source:"main_menu"})}},{label:"Download Document Fixture\u2026",role:"downloadDocumentFixture",action(){l.modalStore.set({type:"DownloadDocumentFixture",source:"main_menu"})}},{type:"separator"},{label:"Use Code Modules in Project",role:"toggleCodeModulesProjectFeature",async action(){var e;let t=(e=l.remoteDocument)==null?void 0:e.projectId;t&&(await w.post(`/web/projects/${t}`,{canvasFeatures:{codeModules:!W.isOn("codeModules")}}),window.location.reload())},checked:()=>W.isOn("codeModules")},{label:"Instant NPM",submenu:[{label:"Reinstall Import Map",role:"reinstallImportMap",async action(){let t="reinstall-import-map";E({type:"add",key:t,text:"Reinstalling import map dependencies",variant:"progress",duration:1/0,showCloseButton:"never"});try{let{importMap:e}=await l.modulesStore.reinstallNpmDependencies();E({type:"add",key:t,text:`Reinstalled ${Object.keys(e.imports).length} dependencies. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(e){E({type:"add",key:t,text:`Reinstall failed: ${e}`,variant:"error",duration:5e3})}}},{label:"Rebuild Import Map from Dependencies",role:"rebuildImportMap",async action(){let t="rebuild-import-map";E({type:"add",key:t,text:"Rebuilding Import Map from Dependencies.json",variant:"progress",duration:5e3});try{let{importMap:e}=await l.modulesStore.rebuildImportMapFromDependencies();E({type:"add",key:t,text:`Built an import map with ${Object.keys(e.imports).length} dependencies. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(e){console.error("Rebuild of import map failed",e),E({type:"add",key:t,text:`Rebuild of import map failed: ${e}`,variant:"error",duration:1/0})}}},{label:"Clear NPM Dependencies",role:"clearNpmDependencies",async action(){async function t(){try{await l.modulesStore.clearNpmDependencies(),E({type:"add",text:"NPM Dependencies are cleared. Reloading Project.",variant:"success",duration:5e3}),window.location.reload()}catch(e){E({type:"add",text:`Clearing Dependencies failed: ${e}`,variant:"error",duration:5e3})}}l.modalStore.set({type:"Confirmation",title:"Clear NPM Dependencies",variant:"destructive",description:"This will break any local or external components in your project that use Instant NPM. Are you sure?",onConfirm:t,confirmLabel:"Confirm",source:"main_menu"})}}]},{label:"Repair Corrupt Modules",role:"repairCorruptModules",async action(){let t=Object.values(l.modulesStore.localModules),e="repair-corrupt-modules",o={method:"HEAD",mode:"cors"},r=[];for(let[a,c]of t.entries()){E({type:"add",key:e,text:`Analyzing module ${a+1} out of ${t.length} for corruption\u2026`,duration:1/0,variant:"progress"});let u=l.modulesStore.getPersistedModuleByLocalId(c.localId);if(!u)continue;let m=[];try{for(let[f,C]of Object.entries(u.files))(await fetch(u.baseURL+C,o)).ok||m.push({type:f,name:C})}catch{continue}m.length&&r.push({localId:c.localId,type:c.type,files:m})}if(!r.length){E({type:"add",key:e,text:"No corrupt modules found.",duration:5e3,variant:"success"});return}E({type:"remove",key:e}),console.log(r);let i=["The following module(s) are corrupt. Repair?","WARNING: This will replace the corrupt files with empty content.",r.map(({localId:a,files:c})=>`${a} (${c.map(u=>u.name).join(", ")})`).join(`
`)];if(!window.confirm(i.join(`

`)))return;let n=r.length,p=0;for(let a=0;a<n;a++){let c=r[a];if(c){E({type:"add",key:e,text:`Repairing corrupt module ${a+1} out of ${n}\u2026`,duration:1/0,variant:"progress"});try{let u=l.modulesStore.forType(c.type).getByLocalId(c.localId),m=c.files.map(f=>({...f,content:""}));await u.persist({files:m})}catch(u){E({type:"add",text:`Repairing ${c.localId} failed: ${u}`,variant:"error",duration:5e3}),p++}}}E({type:"add",key:e,text:p>0?`Repaired ${n-p} out of ${n} module(s).`:`Repaired ${n} module(s).`,duration:5e3,variant:p>0?"error":"success"})}},{label:"Store Local Modules in Document",role:"toggleUseTreeForLocalModules",action(){let t=l.modulesStore.modulesStorage;t.usingLocalModulesInTree()?t.stopUsingLocalModulesInTree():t.startUsingLocalModulesInTree()},visible:()=>ke.isOn("localModulesInTree"),checked:()=>l.modulesStore.modulesStorage.usingLocalModulesInTree()},{label:"Vacuum Modules w/ Deleted Nodes",role:"vacuumModules",async action(){let t=Object.values(l.modulesStore.localModules),e=t.filter(n=>{let p=n.type;switch(p){case"canvasComponent":case"collection":case"css":case"prototype":case"screen":case"webPageMetadata":break;case"codeFile":case"componentPresets":case"config":case"siteMetadata":return!1;default:Ie(p,`Unhandled module type ${n.type}`)}let a=l.tree.get(n.name);if(!a)return!0;try{if((p==="webPageMetadata"?ja(a.id).type:La(a,l.tree))!==p)return!0}catch{return!0}return!1}),o=l.modulesStore.localModules["config/site"];o&&e.push(o);let r="vacuum-modules";if(!e.length){E({type:"add",key:r,text:"No modules to delete.",duration:5e3,variant:"success"});return}console.log(e);let s=`${e.length} out of ${t.length}`,i=e.map(n=>n.localId).join(", ");if(window.confirm(`Found ${s} unused module(s). Delete?

${i}`)){E({type:"add",key:r,text:`Deleting ${e.length} modules\u2026`,duration:1/0,variant:"progress"});try{await l.modulesStore.deleteModules(e.map(n=>n.localId)),E({type:"add",key:r,text:`Deleted ${e.length} module(s).`,duration:5e3,variant:"success"})}catch{E({type:"add",key:r,text:"Failed to delete one or more modules. See console for more details.",duration:5e3,variant:"error"})}}},visible:()=>W.isOn("codeModules")},{type:"separator"},{label:"Sites Project",role:"toggleSitesProjectFeature",action:()=>ms("sites").catch(N),checked:()=>W.isOn("sites")},{label:"Kit Project",role:"toggleKitProjectFeature",action:()=>ms("kit").catch(N),checked:()=>W.isOn("kit")},{label:"Multi Language",role:"toggleMultiLanguage",action:()=>ms("multiLanguage").catch(N),checked:()=>W.isOn("multiLanguage")},{label:"Skip Duplication Page",role:"toggleSkipInterstitial",action:()=>ms("skipInterstitial").catch(N),checked:()=>W.isOn("skipInterstitial")},{label:"Show Status Bar",role:"toggleStatusBar",accelerator:"CommandOrControl+Option+Shift+B",action(){l.chromeStore.statusBarIsVisible=!l.chromeStore.statusBarIsVisible},checked:()=>l.chromeStore.statusBarIsVisible},{label:"Show Debug Bar",role:"toggleDebugBar",accelerator:"CommandOrControl+Shift+D",action(){l.persistedUserDefaults.showDebugBar=!l.persistedUserDefaults.showDebugBar},checked:()=>l.persistedUserDefaults.showDebugBar},{label:"Display DOM Layout Debugging Panel",role:"displayDOMLayoutDebuggingPanel",action(){let t=l.persistedUserDefaults.displayDOMLayoutDebuggingPanel;l.persistedUserDefaults.displayDOMLayoutDebuggingPanel=!t},checked:()=>l.persistedUserDefaults.displayDOMLayoutDebuggingPanel})}function gp(t,e,o){let r=o.findIndex(i=>i.label===t)+1,s=[...o];return s.splice(r,0,e),s}function hp(){let[t,e]=gl(),[o,r]=fp(),[s,i]=Rf();return[{label:$f,submenu:[t,o,...s]},{...e,...r,...i}]}var gn={delete:"Delete",redo:"CommandOrControl+Shift+Z",selectAll:"CommandOrControl+A",undo:"CommandOrControl+Z"},bp={copy:"CommandOrControl+C",cut:"CommandOrControl+X",paste:"CommandOrControl+V"};Wr()||(gn.sampleColor="");var zf=new Set(["toolCreateScreen","toolCreateFrame","toolCreateText","toolCreateStack","toolNavigationLink","toolCreateScrollComponent","toolCreatePageComponent","toolCreateShapeContainer","toolPath","toolCreateRectangleShape","toolCreateOvalShape","toolCreatePolygonShape","toolCreateStarShape","toolComment","toolZoom","sampleColor","quickActions"]),Gf={saveProjectAsTemplate:"canUseCustomTemplates",duplicateTemplate:"canUseCustomTemplates"},Kf=new Set(["Delete"]),lr=class{constructor(e,o){this.onCancelledDispatch=o;this.actionHandlers={};this.acceleratorToAction={};this.bindings=new Rr;this.menu=Ka(e,r=>{if(r.type!=="normal"||!r.action)return;let s=gn[r.action];s!==void 0&&(r.accelerator=s,r.acceleratorLabelTokens=Qs(s)),r.accelerator&&(this.acceleratorToAction[r.accelerator]=r.action);let i=bp[r.action];i!==void 0&&(r.acceleratorLabelTokens=Qs(i))});for(let r in this.acceleratorToAction){if(Kf.has(r))continue;let s=this.acceleratorToAction[r];s&&this.bindings.set(r,i=>this.dispatch(s,i),s)}}updateActionHandlers(e){Object.assign(this.actionHandlers,e)}async dispatch(e,o={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1}){switch(e){case"toolCreateScreen":if(W.isOn("sites"))return!1;break;case"toggleLibraryModal":W.isOn("sites")||(e="toggleInsert");break}let r=await this.getActionHandler(e),s=r.enabled&&!r.enabled(),i=r.visible&&!r.visible();return s||i?(this.onCancelledDispatch(e,{disabled:s,hidden:i}),!1):(await r.action(o),!0)}async getActionHandler(e){let o=this.actionHandlers[e];if(o)return o;let r=this.defaultActionHandler&&await this.defaultActionHandler(e);if(!r)throw Error("Could not get action handler");return r}async handleKeyboardEvent(e){if(zr())return!0;let o=this.bindings.get(e);if(!o)return!1;let{action:r,actionName:s}=o;if(e.repeat&&zf.has(s))return e.preventDefault(),e.stopPropagation(),!0;let i=await r(e);return i&&(e.preventDefault(),e.stopPropagation()),i}async validateMenu(e){var o;for(let r of e)if(r.type==="normal"){if(r.action){let s=await this.getActionHandler(r.action);if(s.checked){let n=s.checked();n!==void 0&&(r.checked=n)}if(s.enabled&&(r.disabled=!s.enabled()),s.label){let n=s.label();n!==void 0&&(r.label=`${n}${(o=s.ellipsis)!=null&&o.call(s)?"\u2026":""}`)}if(s.visible){let n=s.visible();n!==void 0&&(r.visible=n)}let i=Gf[r.action];!r.disabled&&i&&Hr.is(i,"upsell")&&(r.badge="pro")}!r.disabled&&r.submenu&&await this.validateMenu(r.submenu)}}};function vp(t){let e=new URL(window.location.href);e.searchParams.delete("node"),Je(e.href),t({type:"add",variant:"success",icon:"success",text:"Copied Project Link"})}function yp(t){let e=`FramerWeb/575ceb6 ${navigator.userAgent}`;Je(e),t==null||t({type:"add",variant:"success",icon:"success",text:"Copied Framer version: 575ceb6"})}function hn(t,e){let o=[];for(let r of t){let[s,i]=e(r);s!==void 0&&o.push(s),i&&i.length>0&&o.push(...hn(i,e))}return o}var To={},cr;function Cp(t,e){if(cr)return cr;let o=Zf(t,e);return cr=o,setTimeout(()=>{o===cr&&(cr=null)}),o}var Pp=!1;async function Zf(t,e){if(!Pp){Pp=!0;let r=hn(t,s=>s.role?[e.validate({action:s.role}).then(()=>{}),s.submenu]:[void 0,s.submenu]);await Promise.all(r)}let{states:o}=await e.validate({action:"*"});for(let r of o)To[r.action]=r}function Sp({appMenu:t,archiveProject:e,handleNewProject:o,handleProjectDuplication:r,handleDuplicationAsSite:s,handleTemplateDuplication:i,onPreviewToggle:n,onOpenPreviewInNewWindow:p,filePickerRef:a,openAccountSettings:c,onUploadImagePick:u,menuActionTargetService:m,saveProjectAsTemplate:f,saveTemplateAsProject:C,project:h,toast:g,unarchiveProject:b,user:j,userCanArchive:R}){let{isDarkMode:$,isOverridingSystem:U,setDarkMode:X,setOverrideSystem:z}=De(),G=!ro("canDesign"),me=!ro("canInviteCollaborators"),V=(0,gs.useMemo)(()=>{let I=Xf(t,j.isFramerEmployee?hp():void 0,g);return I.defaultActionHandler=async Q=>(m&&await Cp(t,m),{action:async()=>{m&&(window.focus(),await m.dispatch({action:Q}))},checked:()=>{var fe;let ee=To[Q];return(fe=ee==null?void 0:ee.checked)!=null?fe:!1},enabled:()=>{let ee=To[Q];return!!(ee!=null&&ee.enabled)},label:()=>{let ee=To[Q];return ee==null?void 0:ee.label},visible:()=>{let ee=To[Q];return ee&&ee.visible!==!1}}),I},[t,j.isFramerEmployee,g,m]);return(0,gs.useEffect)(()=>{let I=Q=>{!pn.hotKeysDisabled()&&V.handleKeyboardEvent(Q),Jf(Q)};return window.addEventListener("keydown",I,!0),()=>{window.removeEventListener("keydown",I,!0)}},[V]),V.updateActionHandlers({copyVersion:{action:()=>{yp(g)}},saveProjectAsTemplate:{action:()=>f(),label:()=>d.saveProjectAsTemplate,enabled:()=>!nt(h.space)&&G,visible:()=>pa(h)&&!h.archived},saveTemplateAsProject:{action:()=>C(),label:()=>d.saveTemplateAsProject,enabled:()=>G,visible:()=>Ft(h)&&!h.archived&&!nt(h.space)},archiveProject:{action:()=>e(),label:()=>d.archiveProject,enabled:()=>R,visible:()=>!h.archived},unarchiveProject:{action:()=>b(),label:()=>d.unarchiveProject,enabled:()=>R,visible:()=>h.archived},newProject:{action:()=>o(),label:()=>d.newProject},copyProjectLink:{action:()=>{vp(g)},label:()=>d.copyProjectLink},duplicateProject:{action:()=>r(),label:()=>d.duplicateProject,visible:()=>!Ft(h),enabled:()=>Zr(j,h)},duplicateAsSite:{action:()=>{F("ui_interaction",{id:"duplicate-as-site",page:"main-menu"}),s()},label:()=>d.duplicateAsSite,visible:()=>!Ft(h)&&!h.canvasFeatures.sites,enabled:()=>Zr(j,h)},duplicateTemplate:{action:()=>i(),label:()=>d.duplicateTemplate,ellipsis:()=>!0,visible:()=>Ft(h),enabled:()=>Zr(j,h)},showPreview:{action:()=>{vo.close().catch(N),n()},label:()=>d.showPreview,enabled:()=>!l.siteSettings.isOpen},showPreviewNewWindow:{action:p,label:()=>"Open Preview in New Tab",visible:()=>!W.isOn("sites")},goToProjects:{action:({ctrlKey:I,metaKey:Q})=>{var J;let ee=j.spaces.find(D=>h.space.id===D.id&&D.permissions.read),fe=Ft(h)?"templates":((J=h.collection)==null?void 0:J.id)||"recent",Ee=h.space.scope==="organization"&&ee?`${eo}folder/${fe}?team=${h.space.id}`:eo;I||Q?st(Ee):window.location.href=Ee}},toggleAppearanceSystem:{checked:()=>!U,action:()=>{z(!U)},enabled:()=>!l.siteSettings.isOpen},toggleAppearance:{action:()=>{X(!$)},label:()=>$?"Day Mode":"Night Mode",enabled:()=>!l.siteSettings.isOpen},publishSite:{action:async()=>{if(ke.isOn("aiAndTheming")&&!l.publishStore.customHostname){let I=l.publishStore.getHomeNode();if(I&&wa(I)){l.popover.active=1;return}}await l.publishStore.publish(l)},label:()=>l.publishStore.publishStatus!==1?"Publish Update":d.publishSite,enabled:()=>l.publishStore.canPublish(l)},openPublishedSite:{action:async()=>{var Q;let I=(Q=l.publishStore.customHostname)!=null?Q:l.publishStore.defaultHostname;I&&st(_r(l,I.hostname))},label:()=>d.openPublishedSite,enabled:()=>G&&!!l.publishStore.defaultHostname&&l.publishStore.defaultHostname.isPublished},inviteCollaborators:{action:()=>{l.popover.active=2,F("ui_interaction",{page:"main-menu",id:"share-project"})},label:()=>d.inviteCollaborators,ellipsis:()=>!0,enabled:()=>l.chromeStore.mainView!==2&&me},uploadImage:{action:()=>{a.current&&a.current.show().then(I=>u("menu",I)).catch(N)},label:()=>d.uploadImage,ellipsis:()=>!0,enabled:()=>G&&!l.siteSettings.isOpen},openAccountSettings:{action:()=>{c()}},exportToHTML:{visible:()=>ke.isOn("exportToHTML")&&!W.isOn("sites")&&h.settings.featureFlags.canExportToHtml==="on",enabled:()=>Boolean(wp())&&!l.siteSettings.isOpen,action:()=>{let I=wp();if(I)return bi({}),F("ui_interaction",{id:"export-prototype",page:"main-menu"}),Va(l,I)}},openSiteSettings:{visible:()=>W.isOn("sites"),enabled:()=>!l.siteSettings.isOpen,action:()=>l.siteSettings.open()},openGeneralSettings:{visible:()=>W.isOn("sites"),enabled:()=>{var I;return l.chromeStore.mainView!==4||((I=l.siteSettings.active)==null?void 0:I.tab)!=="project"},action:()=>l.siteSettings.setActiveTab({tab:"project"})},openDomainSettings:{visible:()=>W.isOn("sites"),enabled:()=>{var I;return l.chromeStore.mainView!==4||((I=l.siteSettings.active)==null?void 0:I.tab)!=="domains"},action:()=>l.siteSettings.setActiveTab({tab:"domains"})},openRedirects:{visible:()=>W.isOn("sites"),enabled:()=>{var I;return l.chromeStore.mainView!==4||((I=l.siteSettings.active)==null?void 0:I.tab)!=="redirects"},action:()=>l.siteSettings.setActiveTab({tab:"redirects"})},openVersions:{visible:()=>W.isOn("sites"),enabled:()=>{var I;return l.chromeStore.mainView!==4||((I=l.siteSettings.active)==null?void 0:I.tab)!=="versions"},action:()=>l.siteSettings.setActiveTab({tab:"versions"})},openAnalytics:{visible:()=>W.isOn("sites"),enabled:()=>{var I;return l.chromeStore.mainView!==4||((I=l.siteSettings.active)==null?void 0:I.tab)!=="analytics"},action:()=>{F("ui_interaction",{id:"open-site-settings-analytics",page:"main-menu"}),l.siteSettings.setActiveTab({tab:"analytics"}).catch(N)}},openPlans:{visible:()=>W.isOn("sites"),enabled:()=>{var I;return l.chromeStore.mainView!==4||((I=l.siteSettings.active)==null?void 0:I.tab)!=="plans"},action:()=>l.siteSettings.setActiveTab({tab:"plans"})},copyRemixLink:{label:()=>d.copyRemixLink,visible:()=>W.isOn("sites"),action:()=>Yl(l.projectStore.projectId,h.publicAccess!=="none")}}),pn.updateActionManager(V),V}function Jf(t){!Wr()&&t.key==="Alt"&&t.preventDefault()}function Xf(t,e,o){let r=s=>{Sa(l,"canDesign")||l.chromeStore.mainView===0&&fa(s)&&ga(s,o)};if(e){let[s,i]=e,n=gp("Preferences",s,t),p=new lr(n,r);return p.updateActionHandlers(i),p}else return new lr(t,r)}function wp(){let t=l.scopeStore.active;if(!Ji(t))return;if(l.selection.ids.length===0)return Ea(l.tree,t)||void 0;let e=l.selection.commonGroundNode;if(e&&qa(e))return e}var Ao=k(T());function kp({vekterChannel:t,initialThread:e}){let o=(0,Ao.useRef)(null),[r,s]=(0,Ao.useState)(Boolean(e));return(0,Ao.useEffect)(()=>{let i;if(t)return Vs.on(t).discover({timeout:3e4}).then(async n=>{o.current=n,i=n.feedbackStateStream({replay:"latest"}),await Promise.all([e?n.openThread(e):Promise.resolve(),i.read(async({isActive:p})=>{s(p)})])}).catch(eg),()=>{i==null||i.cancel(),o.current&&Vs.unregister(o.current)}},[t,e]),{isFeedbackActive:r}}var Qf="t";function Ip(t=window.location){let o=new URLSearchParams(t.search).get(Qf);if(o){let[r,s]=o.split(":");return{threadId:r,commentId:s}}return null}function eg(t){if(t instanceof ti.TimedOut){console.warn("FeedbackDocument service discovery timed out: Feedback functionality may be limited");return}setTimeout(()=>{throw t})}var Tp=k(T());function Ap({toast:t,userNotifications:e,isFeedbackActive:o}){let[r,s]=$r("has-seen-notifications-toast",!1);(0,Tp.useEffect)(()=>{if(!o||r)return;async function i(){(await e.getPermissionStatus()).status==="notDetermined"&&(t({type:"add",variant:"info",key:"notifications-opt-in-toast",text:"Stay up to date with browser notifications",action:{title:"Continue",onClick:()=>e.requestPermission()},icon:"notifications",duration:1e4,showCloseButton:"never"}),s(!0))}i()},[t,e,o,r,s])}var Mp=k(T());function tg(t,e){let o={variant:"success",text:"You are now subscribed to updates",action:{title:"Unsubscribe",onClick:s},icon:"success",key:"feedback-updates-subbed-toast",duration:5e3,showCloseButton:"never"},r={variant:"success",text:"You have unsubscribed from updates",icon:"success",action:{title:"Subscribe",onClick:i},key:"feedback-updates-unsubbed-toast",duration:5e3,showCloseButton:"never"};async function s(){t({type:"remove",key:o.key}),await e("unsubscribe"),t({type:"add",...r})}async function i(){t({type:"remove",key:r.key}),await e("subscribe"),t({type:"add",...o})}return{subbedToast:o,unsubbedToast:r}}function Lp({toast:t,isDocumentLoaded:e,action:o}){(0,Mp.useEffect)(()=>{let r=new URLSearchParams(window.location.search);if(e&&r.get("unsubscribed")==="true"){let{unsubbedToast:s}=tg(t,o);t({type:"add",...s});let i=new URL(window.location.href);i.searchParams.delete("unsubscribed"),window.history.replaceState({},document.title,i.href)}},[t,e,o])}var xp=k(T());function jp({channel:t}){return(0,xp.useMemo)(()=>t?ai.on(t).expect():null,[t])}var bs=k(T());function Ep(t){switch(t){case"granted":return{status:"granted"};case"denied":return{status:"denied"};case"default":default:return{status:"notDetermined"}}}var hs=class{constructor(){this.activeNotifications=new Map}async requestPermission(){return window.Notification?new Promise(e=>{let o=s=>e(Ep(s)),r=window.Notification.requestPermission(o);r&&r.then(o).catch(N)}):{status:"denied"}}async getPermissionStatus(){return window.Notification?Ep(window.Notification.permission):{status:"denied"}}async post(e){return new Promise(o=>{if(!window.Notification)return o({type:"cancel",reason:"unsupported"});if(e.notification.show==="backgrounded"&&!document.hidden)return o({type:"cancel",reason:"suppressed"});let r=new window.Notification(e.notification.title,{tag:e.notification.id,body:e.notification.body});this.activeNotifications.set(e.notification.id,r),r.onclick=()=>{window.focus(),o({type:"action"}),r.close()},r.onclose=()=>{this.activeNotifications.delete(e.notification.id),o({type:"cancel",reason:"dismissed"})}})}async cancel(e){if(!window.Notification)return;let o=this.activeNotifications.get(e.notificationId);o&&o.close()}};function Dp({channel:t}){let e=(0,bs.useMemo)(()=>new hs,[]);return(0,bs.useEffect)(()=>{if(t)return di.on(t).register(e)},[t,e]),e}var Qe=k(T());var Np="title_t1vefczm",Up="text_tu91b7",Pn="button_b1pbwhrm";var Cn="prototype-copy-link-popover";function Fp({password:t}){Qe.default.useEffect(()=>{F("ui_impression",{page:Cn})},[]);let e=Qe.default.useCallback(()=>{F("ui_interaction",{page:Cn,id:"copy-prototype-password"}),t&&Je(t).catch(N)},[t]),o=Qe.default.useCallback(()=>{F("ui_interaction",{page:Cn,id:"copy-prototype-link"}),Tl()},[]);return Qe.default.createElement(S,{padding:"13px 15px 15px 15px",gap:15},Qe.default.createElement("div",{className:Np},"Copy Link"),Qe.default.createElement("div",{className:Up},Qe.default.createElement(v,null,"Users will be required to input the"),Qe.default.createElement("br",null),Qe.default.createElement(v,null,"password to view the prototype.")),Qe.default.createElement(S,{direction:"row",gap:10,alignItems:"center",justifyContent:"center"},Qe.default.createElement(Ct,{className:Pn,title:"Copy Password",large:!0,onClick:e}),Qe.default.createElement(Ct,{className:Pn,title:"Copy Link",variant:"primary",large:!0,onClick:o})))}var de=k(T());var re=k(T()),$p=k(cf());var Op="container_c4mo4dy",Bp="title_thtz5ih",_p="description_dx2e80q",Hp="inputLabel_i1xbazds",Wp="icon_i1254ef3",Mo="fullWidth_f1czdr5w";var qp=rt("ai-domain-popover");function sg(){var o,r;let t=l.siteSettings.metadata.title,e=(o=l.projectStore.project)==null?void 0:o.title;return ig((r=t!=null?t:e)!=null?r:"My AI Site")}var Rp=({canPublish:t,publishStatus:e,onPublish:o,onDismiss:r})=>{let s=yo(sg),[i,n]=re.default.useState(s),[p,a]=re.default.useState(),[c,u]=re.default.useState(!0),m=vi();re.default.useEffect(()=>{F("ui_impression",{page:"ai-domain-popover"})},[]),Pl(i,500,j=>{let R=i.trim();if(sn(R)){a("Invalid Domain"),u(!1);return}l.publishStore.isCustomDomainAvailable(Vp(R)).then(U=>{if(!j.outdated){if(!U&&R===s){let X=Math.floor(Math.random()*1e3).toString(10).padStart(3,"0");n(`${R}-${X}`);return}a(U?null:"Domain Taken")}}).catch(U=>{qp.error("Failed to check domain availability",U)}).finally(()=>{j.outdated||u(!1)})});let f=j=>{j!==i&&(u(!0),n(j))},C=re.default.useCallback(()=>{F("ui_interaction",{page:"ai-domain-popover",id:"dismiss"}),r()},[r]),h=re.default.useCallback(async()=>{F("ui_interaction",{page:"ai-domain-popover",id:"publish"});let j=i.trim();if(sn(j)){a("Invalid Domain");return}try{await o(Vp(j))}catch($){qp.error("Failed to publish",$),a($ instanceof bo&&$.status===409?"Domain Taken":null)}},[i,o]),g=j=>{if(j.key==="Enter"){if(c||p){m.start("error").catch(N);return}h().catch(N)}},b=e===3;return re.default.createElement(S,{direction:"column",justifyContent:"flex-start",alignItems:"center",padding:"30px 15px 15px 15px",gap:15,className:Op},re.default.createElement("span",{className:Wp},re.default.createElement(ag,null)),re.default.createElement(S,{gap:10,direction:"column",justifyContent:"flex-start",alignItems:"stretch",paddingLeft:35,paddingRight:35,paddingBottom:15,className:Mo},re.default.createElement("p",{className:Bp},re.default.createElement(v,null,"Here\u2019s your free AI domain.")),re.default.createElement("p",{className:_p},re.default.createElement(v,null,"Your site\u2019s looking magical. Let\u2019s go live\u2014you get a free framer.ai domain, on us. Pick a custom name and then hit publish."))),re.default.createElement(S,{gap:5,className:Mo},re.default.createElement(Se.div,{variants:{default:{x:0},error:{x:[0,-4,4,0],transition:{duration:.2}}},animate:m},re.default.createElement(xt,null,re.default.createElement(jt,{id:"ai-domain",autoComplete:"off",value:i,onChange:f,autoFocus:!0,constantChange:!0,changeOnBlur:!1,enabled:t&&!b,onKeyDown:g}),re.default.createElement("span",{className:A(Hp,he)},".framer.ai")))),re.default.createElement(S,{direction:"row",gap:10,alignItems:"center",justifyContent:"stretch",className:Mo},re.default.createElement(Y,{onClick:C,className:Mo},"Not Now"),re.default.createElement(Y,{variant:"AIGradient",enabled:t&&p===null&&!b&&!c,onClick:h,className:Mo},ng(p,b||c))))};function ng(t,e){return e?re.default.createElement(vt,null):t||"Publish"}function ig(t,e=30){let o=(0,$p.default)(t,{strict:!0,lower:!0});for(;o.length>e;){let r=o.lastIndexOf("-");if(r<0){o.length>e&&(o=o.substring(0,e));break}o=o.substring(0,r)}return o||"my-ai-site"}function Vp(t){return`${t}.framer.ai`}function ag(){return re.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30"},re.default.createElement("g",null,re.default.createElement("defs",null,re.default.createElement("linearGradient",{id:"idPYJOK145Pg116851",gradientTransform:"rotate(180, 0.5, 0.5)"},re.default.createElement("stop",{offset:"0",stopColor:"#b8f",stopOpacity:"1"}),re.default.createElement("stop",{offset:"1",stopColor:"#0bf",stopOpacity:"1"}))),re.default.createElement("path",{d:"M 13.379 11.638 C 13.758 11.554 14.054 11.258 14.138 10.879 L 15.024 6.893 C 15.256 5.849 16.744 5.849 16.976 6.893 L 17.862 10.879 C 17.946 11.258 18.242 11.554 18.621 11.638 L 22.607 12.524 C 23.651 12.756 23.651 14.244 22.607 14.476 L 18.621 15.362 C 18.242 15.446 17.946 15.742 17.862 16.121 L 16.976 20.107 C 16.744 21.151 15.256 21.151 15.024 20.107 L 14.138 16.121 C 14.054 15.742 13.758 15.446 13.379 15.362 L 9.393 14.476 C 8.349 14.244 8.349 12.756 9.393 12.524 Z M 8.061 19.82 C 8.44 19.736 8.736 19.44 8.82 19.061 L 9.091 17.841 C 9.188 17.403 9.812 17.403 9.909 17.841 L 10.18 19.061 C 10.264 19.44 10.56 19.736 10.939 19.82 L 12.159 20.091 C 12.597 20.188 12.597 20.812 12.159 20.909 L 10.939 21.18 C 10.56 21.264 10.264 21.56 10.18 21.939 L 9.909 23.159 C 9.812 23.597 9.188 23.597 9.091 23.159 L 8.82 21.939 C 8.736 21.56 8.44 21.264 8.061 21.18 L 6.841 20.909 C 6.403 20.812 6.403 20.188 6.841 20.091 Z",fill:"url(#idPYJOK145Pg116851)"})))}var Ne=k(T());var zp="moveDraft_m1cpkqs3",Gp="moveDraftTitle_m1nbloso",Kp="buttons_bb1mirm",Zp="moveDraftDescription_mo8n8ae",Yp="moveDraftButton_mr6y2w0",Jp="confirmMoveDraftButton_c10bqkjb",Xp="buttonChevron_bd7crx9";function Qp({user:t,projectState:e,onShowMoveProjectMenu:o,onConfirmMoveProject:r,moveProjectDestination:s}){let{project:i}=e,n=Ne.default.useRef(null),[p,a]=Ne.default.useState(!1),c=Ne.default.useMemo(()=>ho(i,t),[i,t]);async function u(){if(n.current===null)return;let f=n.current.getBoundingClientRect();a(!0),await o({location:{x:f.left,y:f.bottom},showBackToDashboardItem:!1,skipConfirmation:!0}),a(!1)}let m=Ne.default.useCallback(async()=>{F("ui_interaction",{page:"invite-panel",id:"move-to-teams"}),await r()},[r]);return Ne.default.createElement(S,{padding:30,gap:15,alignItems:"center",justifyContent:"center",className:zp},Ne.default.createElement("div",{className:Gp},"Invite Collaborators"),Ne.default.createElement("div",{className:Zp},Ne.default.createElement(v,null,"Move your projects to a team"),Ne.default.createElement("br",null),Ne.default.createElement(v,null,"to add more collaborators.")),Ne.default.createElement(S,{className:Kp,direction:"row",gap:10},Ne.default.createElement(Y,{className:Yp,large:!0,onClick:u,ref:n},Ne.default.createElement("div",{className:he},s||c.label),Ne.default.createElement("div",{className:Xp},Ne.default.createElement(Sr,{isActive:p}))),Ne.default.createElement(Y,{onClick:m,large:!0,className:Jp,variant:"primary",enabled:!!s&&s!==c.label},Ne.default.createElement(v,null,"Move"))))}var at=k(T());var Mt=k(T());function eu(t,e){let o=[...t],r=o.findIndex(({user:s})=>s.id===e);return o.splice(r,1),o}function cg(t,e,o){let r=[...t],s=r.findIndex(({user:n})=>n.id===e),i=r[s];return i?(r.splice(s,1,{...i,success:o}),r):t}function pg(t,e){switch(e.type){case"addEntry":return{...t,invitedUsers:[e.entry,...t.invitedUsers]};case"resolveEntry":return{...t,invitedUsers:eu(t.invitedUsers,e.id),inviteMap:{...t.inviteMap,[e.resourceId]:e.id}};case"removeEntry":return{...t,invitedUsers:eu(t.invitedUsers,e.id)};case"updateInviteStatus":return{...t,invitedUsers:cg(t.invitedUsers,e.id,e.status)};default:Ie(e)}}function vs(t){let[e,o]=(0,Mt.useReducer)(pg,{invitedUsers:[],inviteMap:{}}),{inviteMap:r,invitedUsers:s}=e,i=(0,Mt.useRef)([]),n=(0,Mt.useCallback)(a=>!(a.user.id in r&&s.some(c=>c.user.id===a.user.id)),[r,s]),p=(0,Mt.useCallback)(a=>{let c=r[a.user.id];return c||a.user.id},[r]);return i.current=(0,Mt.useMemo)(()=>s.length>0?i.current:t.filter(n),[t,s,n]),{acl:i.current,invitedUsers:s,dispatchInvites:o,getStableEntryKey:p}}var ye=k(T());var ys=15,Ps=20,Lo=0;var tu="main_mtjdnlw",xo="buttons_b16j3fv2",ou="header_h7bdi9s",ru="separator_s12h9rvh",wn="separatorWithPadding_sql7wjp",Sn="isDisabled_i1gaa8io",su="inputGrid_ibeu8mf",Vt="sidePadding_smryu2",nu="users_u1kcrkj9",iu="roleSelect_rnllbx4",jo="userInfoName_u1a07q4t",Eo="userInfoDetail_u1wvxecz",Cs="userInfoDetailText_u1axfeak",au="userInfoStatus_ugv3bsa",lu="domains_d5ox40e",cu="errorMessage_een2nnp",Do="avatarGrid_amichmx",No="editableRole_eld01wx",pu="updating_uiyskyy",uu="badgeFramerEmployeeWrapper_bhwjfgd",du="badgeViewerWrapper_b128a741",mu="shareLinkIcon_s1azfp4q";var _e=k(T());var fu="container_c1246jw8",gu="menu_mxpor1j",hu="menuIsClosing_mfp352",kn="menuRow_mihampg",bu="checkboxLabel_c6nal8x",vu="checkboxDescription_cj7iy0t",In="checkboxDisabled_c14mb9fl",yu="clickable_c125bqli",Pu="separator_s43hwdv";function ws({alignmentRef:t,alignWidth:e,menuItems:o}){let[r,s]=_e.default.useState(!1),[i,n]=_e.default.useState(!1);return[{menuItems:o,alignmentRef:t,alignWidth:e,visible:r,closing:i,closeMenu:async()=>{n(!0),await mg(200),n(!1),s(!1)}},()=>{i||s(!0)}]}function Ss(t){let{menuItems:e,alignmentRef:o,alignWidth:r,visible:s,closing:i,closeMenu:n}=t,p=_e.default.useRef(null);return _e.default.useLayoutEffect(()=>{if(!s||!p.current||!o.current)return;let{top:a,left:c,width:u,height:m}=o.current.getBoundingClientRect();r&&(p.current.style.width=`${u}px`),p.current.style.marginTop=`${m}px`,p.current.style.top=`${a}px`,p.current.style.left=`${c}px`},[s,o,r]),_e.default.useEffect(()=>{let a=u=>{s&&u.target instanceof Node&&p.current&&!p.current.contains(u.target)&&(n(),u.stopPropagation())},c=u=>{s&&(n(),u.stopPropagation())};return document.addEventListener("mousedown",a,!0),document.addEventListener("keydown",c,!0),()=>{document.removeEventListener("mousedown",a,!0),document.removeEventListener("keydown",c,!0)}},[n,s]),s?_e.default.createElement(Hi,null,_e.default.createElement("div",{ref:p,className:fu},_e.default.createElement("div",{className:A(gu,i&&hu)},e.filter(a=>a.visible!==!1).map((a,c)=>_e.default.createElement(dg,{key:c,menuItem:a,closeMenu:n}))))):null}function dg({menuItem:t,closeMenu:e}){let{type:o}=t;switch(o){case"checkbox":return _e.default.createElement(S,{gap:10,direction:"row",alignItems:"center",className:A(kn)},_e.default.createElement(Jt,{id:t.actionId,value:t.checked,onChange:()=>t.action(t.actionId),enabled:!t.disabled}),_e.default.createElement("label",{htmlFor:t.actionId,className:A(bu,t.disabled&&In)},t.label,t.description&&_e.default.createElement("span",{className:A(vu,t.disabled&&In)}," ","\xB7 ",t.description)));case"option":return _e.default.createElement(S,{direction:"row",alignItems:"center",justifyContent:"space-between",onClick:()=>{t.action(),e()},className:A(kn,yu)},t.label,t.badge&&_e.default.createElement(Zo,{className:"badge"},t.badge));case"separator":return _e.default.createElement("div",{className:Pu});default:Ie(o,"All menu items should get rendered")}}function mg(t){return new Promise(e=>{setTimeout(e,t)})}function ks(t,e,o){t.popover.active=0,t.modalStore.set({type:"Confirmation",source:"invite_panel",title:"New Project Editor",description:"You are adding a new editor. This gives them access and may increase your bill. Manage members in Team Settings.",confirmLabel:"Confirm",onConfirm:()=>{Tn(t),e()},doNotShowAgainId:o,onCancel:()=>Tn(t),onDismiss:()=>Tn(t)})}var Tn=t=>{t.popover.active=2};async function Is(t){t.popover.active=0,await t.siteSettings.setActiveTab({tab:"plans",upsellPlan:"proSite"})}function Cu({isViewOnly:t,projectState:e,onUpsellEditors:o,handleInvite:r,handleApiError:s,pendingEntries:i,invitedUsers:n,dispatchInvites:p}){let{project:a}=e,{settings:c}=a,u=Cr(),m=(0,ye.useRef)(0),f=yt("canInviteEditors"),[C,h]=(0,ye.useState)(!1),[g,b]=(0,ye.useState)(""),[j,R]=(0,ye.useState)({role:"collaborator",permissions:Ut}),{role:$,permissions:U}=j,X=c.featureFlags.canInviteAnyDomain==="off";async function z(J){if(J.preventDefault(),!f)return o();let D=g.toLowerCase().trim();if(ss(D)&&!n.find(({user:te})=>te.name===D)&&!i.find(({user:te})=>te.name===D)){let[,te]=D.split("@"),ae=async()=>{if(te&&X&&c.allowedDomains.length>0&&!c.allowedDomains.includes(te)){h(!0);return}let ve=`${m.current++}`;p({type:"addEntry",entry:{user:{id:ve,name:D,initials:""},role:$,permissions:U,pending:!0,color:0,lastOpenedAt:"",success:null,email:D}}),b("");try{let je=await r({email:D,role:$,permissions:U});je&&p({type:"resolveEntry",id:ve,resourceId:je.user.id})}catch(je){s(je,ve),p({type:"removeEntry",id:ve})}};$==="viewer"||te==="framer.com"?ae().catch(N):ks(l,ae)}else u.start({x:0,transition:{type:"spring",velocity:600,stiffness:5e3,damping:20}}).catch(N)}function G(J){C&&h(!1),b(J)}let me=async J=>{R(D=>{let te=jr(D.permissions[J]),ae={...D.permissions,[J]:te};return{role:Object.entries(ae).filter(([H,B])=>B==="on").map(([H,B])=>H).length===0?"viewer":"collaborator",permissions:ae}})},V=ye.default.useRef(null),I=to("canUseEditorPermissions","upsell"),ee=[...Er.map(J=>{let{label:D,description:te}=Dr(J);return{type:"checkbox",label:D,description:te,actionId:J,action:me,checked:U[J]==="on",disabled:I}}),{type:"separator",visible:I},{type:"option",label:"Upgrade",badge:"Pro",action:()=>Is(l),visible:I}],[fe,Ee]=ws({alignmentRef:V,alignWidth:!0,menuItems:ee});return ye.default.createElement("div",{className:Vt},ye.default.createElement("form",{className:su,onSubmit:z},ye.default.createElement(Se.div,{animate:u,style:{originY:.9}},ye.default.createElement(xt,{ref:V,hasError:C,large:!0},ye.default.createElement(jt,{autoFocus:!0,type:"email",name:"email",placeholder:"name@email.com",value:g,onChange:G,constantChange:!0,enabled:!t,className:A(t&&Sn)}),ye.default.createElement(Y,{variant:"link",enabled:!t,onClick:Ee,className:A(iu,t&&Sn)},er(U,$),ye.default.createElement(bt,null)),ye.default.createElement(Ss,{...fe})),ye.default.createElement(go,{className:cu,visible:C},c.allowedDomains.length>2?ye.default.createElement(v,null,"The email domain you entered is not allowed"):ye.default.createElement(ye.default.Fragment,null,ye.default.createElement(v,null,"Only"),ye.default.createElement("span",{className:lu}," ",c.allowedDomains.map(J=>`@${J}`).join(", ")," "),ye.default.createElement(v,null,"emails are allowed")))),ye.default.createElement(Y,{enabled:!t,className:xo,large:!0,title:"Send",type:"submit",variant:"primary",onClick:qe})))}var q=k(T());function Iu({isViewOnly:t,onUpsellEditors:e,projectState:o,handleInvite:r,handleApiError:s,currentUserEntry:i,invitedUsers:n,activeEntries:p,inactiveEntries:a,pendingEntries:c,dispatchInvites:u,getStableEntryKey:m}){let[f,C]=gg(i,n,p,a,c);async function h(g){u({type:"updateInviteStatus",id:g,status:null});try{let b=n.find(({user:j})=>j.id===g);if(b)await r({email:b.email,role:b.role,permissions:b.permissions});else throw new Error}catch(b){s(b,g)}}return q.default.createElement(Yt,{initial:!1},q.default.createElement(S,{gap:ys,direction:"column",className:Vt},[f,C].map((g,b)=>g.length>0?q.default.createElement(q.default.Fragment,{key:`item-${b}`},b>0&&q.default.createElement("div",{className:ru}),q.default.createElement(S,{gap:Ps,direction:"column"},g.map(({entry:j,inactive:R})=>q.default.createElement(hg,{key:m(j),projectState:o,indicateFramerEmployee:!!j.user.isFramerEmployee&&!(i!=null&&i.user.isFramerEmployee),isViewOnly:t,entry:j,handleRetry:h,inactive:R,upsellEditors:e})))):null)))}function gg(t,e,o,r,s){let[i,n]=(0,q.useMemo)(()=>{let p=[],a=[],c=u=>{(u.entry.role==="viewer"?a:p).push(u)};return t&&c({entry:t,ordering:"9"}),o.forEach(u=>{c({entry:u,ordering:"8"})}),r.forEach(u=>{c({entry:u,inactive:!0,ordering:wu("7",u)})}),e.forEach(u=>{c({entry:u,ordering:wu("7",u)})}),s.forEach(u=>{let m={...u,user:{...u.user,initials:u.user.initials||u.user.name.substr(0,2).toLocaleUpperCase()}};c({entry:m,inactive:!0,pending:!0,ordering:"0"})}),[p.sort(Su),a.sort(Su)]},[t,e,o,r,s]);return[i,n]}function wu(t,e){return`${t}-${e.lastOpenedAt||0}`}function Su(t,e){return t.ordering!==e.ordering?t.ordering<e.ordering?1:-1:t.entry.user.name===e.entry.user.name?t.entry.user.id.localeCompare(e.entry.user.id):t.entry.user.name.localeCompare(e.entry.user.name,void 0,{sensitivity:"base"})}var ku={duration:.15,ease:"easeInOut"},An={initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,transition:ku},exit:{opacity:0,scale:.5,transition:ku}},hg=q.default.forwardRef(function({projectState:e,isViewOnly:o,inactive:r=!1,entry:s,handleRetry:i,upsellEditors:n,indicateFramerEmployee:p},a){let c=St(),{user:u,role:m,permissions:f,pending:C}=s,{isDarkMode:h}=De(),{project:g}=e,b=l.sessionStore.useState(Le=>Le.user.id),[j,R]=q.default.useState(null),[$,U]=q.default.useState(!1),[X,z]=q.default.useState(!1),[G,me]=q.default.useState(!1),V=u.id===b,I=u.id===g.owner.id,Q=m==="viewer",ee=yt("canInviteEditors"),fe=Q&&G&&!o,Ee=!r&&!V,J=(0,q.useCallback)(Le=>{var Ge;(Ge=l.remoteDocument)==null||Ge.setSpectatedUser(Le.id)},[]),D=()=>{let Le=()=>{z(!0),c==null||c.updateUserPermissions({id:u.id,role:"collaborator",permissions:Ut}).catch(()=>{z(!1)})};u.isFramerEmployee?Le():ks(l,Le)},te=j||f||na,ae=async Le=>{if(!te)return;if(!ee)return n();let Ge=jr(te[Le]),Xe={...te,[Le]:Ge},Ke={id:u.id,role:"collaborator",permissions:Xe};R(Ke.permissions),await(c==null?void 0:c.updateUserPermissions(Ke).catch(()=>{R(null)}))},ve=()=>{U(!0),C?c==null||c.removeInvite({id:u.id}).catch(()=>U(!1)):c==null||c.removeUserPermissions({id:u.id}).catch(()=>U(!1))},tt=q.default.useRef(null),je=!C,H=!I,B=to("canUseEditorPermissions","upsell"),_=[...Er.map(Le=>{let{label:Ge,description:Xe}=Dr(Le);return{type:"checkbox",label:Ge,description:Xe,actionId:Le,action:ae,checked:te?te[Le]==="on":!1,visible:je,disabled:B}}),{type:"separator",visible:je&&(H||B)},{type:"option",label:"Upgrade",badge:"Pro",action:()=>Is(l),visible:je&&B},{type:"option",label:"Remove",action:ve,visible:H}],[Fe,Oe]=ws({alignmentRef:tt,menuItems:_}),ze;C&&s.success===!1?ze=q.default.createElement(ut,{as:Se.button,variant:"link",className:A(No),onClick:()=>i(u.id),...An},q.default.createElement(v,null,"Retry")):V||I||Q||o?ze=q.default.createElement(Se.span,{key:"role",...An},q.default.createElement(ut,{as:Se.button,variant:"link",className:No,enabled:!1},q.default.createElement(v,null,er(f,m)))):ze=q.default.createElement(q.default.Fragment,null,q.default.createElement(ut,{ref:tt,as:Se.button,variant:"link",className:No,onClick:Oe},q.default.createElement(v,null,er(te,m)),q.default.createElement(bt,null)),q.default.createElement(Ss,{...Fe}));let Gt=p?`${u.name.split(" ")[0]} from Framer`:u.name;return q.default.createElement(Se.li,{ref:a,...An,className:A(Do,$&&pu),onPointerEnter:()=>me(!0),onPointerLeave:()=>me(!1)},q.default.createElement("div",null,q.default.createElement(tr,{entry:s,isDarkMode:h,onClick:Ee?()=>J(s.user):void 0,onClickHoverIcon:Ee?q.default.createElement(Jo,{width:"18",height:"18"}):void 0,greyScale:Q}),p?q.default.createElement("div",{className:uu,title:"Framer Employee"},q.default.createElement(kr,{width:"6",height:"9"})):Q?q.default.createElement("div",{className:du,title:"Framer Employee"},q.default.createElement(Jo,null)):null),q.default.createElement(S,{gap:Lo,direction:"column",justifyContent:"center"},q.default.createElement("div",{className:A(he,jo),title:u.name},q.default.createElement(v,null,Gt)),q.default.createElement("div",{className:Eo},ze)),q.default.createElement(Yt,{initial:!1,mode:"wait"},fe?q.default.createElement(Y,{enabled:!o,className:xo,large:!0,onClick:D},X?q.default.createElement(vt,null):q.default.createElement(v,null,"Upgrade")):q.default.createElement(v,{className:au},C?"Pending":xr(s,!r,{shortDate:!0}))))});var et=k(T());async function Tu(t,e,{isDarkMode:o,triggerRef:r}){let{top:s,left:i,height:n}=r!=null&&r.current?r.current.getBoundingClientRect():t.currentTarget.getBoundingClientRect(),p=[{action:"view",label:As("view"),checked:e==="view"},{action:"none",label:As("none"),checked:e==="none"}],a=await vo.show(p,{isDarkMode:o,location:{x:i-1,y:s+n+5}});return a?a.action:void 0}function As(t){switch(t){case"view":return"Anyone with link can view";case"none":return"Only members can access";default:yi(t)}}function Au({isViewOnly:t,isDraftProject:e,isCurrentUserOwner:o,onCopyProjectURL:r,projectState:s,onAccessChange:i,onShowUpsell:n}){let{project:p}=s,{publicAccess:a,settings:c}=p,u=yt("canUsePrivateLink"),m=!t&&c.featureFlags.canChangeProjectAccess==="on"&&(!e||o),{isDarkMode:f}=De(),C=l.wrapHandler(()=>{Je(Yr(p).toString()).catch(N),r()});return et.default.createElement("div",{className:Vt},et.default.createElement("div",{className:Do},et.default.createElement(uo,{color:Ye.linkAvatarBackground,textCustomStyles:mu,text:et.default.createElement(Oi,null)}),et.default.createElement(S,{direction:"column",gap:Lo,justifyContent:"center"},et.default.createElement("div",{className:A(he,jo)},et.default.createElement(v,null,"Project Link")),et.default.createElement("div",{className:A(Eo,Cs)},et.default.createElement(ut,{as:Se.button,variant:"link",className:No,enabled:m,onClick:async h=>{F("ui_interaction",{page:"invite-panel",id:"open-project-link-settings"});let g=await Tu(h,a||[],{isDarkMode:f});g==="none"&&!u?n("private-project-link"):g&&i(g)}},et.default.createElement(v,null,As(a)),m&&et.default.createElement(bt,null)))),et.default.createElement(Ct,{className:xo,large:!0,title:"Copy",onClick:C})))}var $t=k(T());function Mu({displayName:t,avatar:e}){let o=Nt.extractInitials(t||"");return $t.default.createElement("div",{className:Vt},$t.default.createElement("div",{className:Do},$t.default.createElement(uo,{color:Ye.tint,src:e||void 0,text:o}),$t.default.createElement(S,{direction:"column",gap:Lo,justifyContent:"center"},$t.default.createElement("div",{className:A(he,jo)},t),$t.default.createElement("div",{className:A(Eo,Cs)},$t.default.createElement(v,null,"All members can access")))))}function Lu({user:t,projectState:e,isDraftProject:o,isCurrentUserOwner:r,onAccessChange:s,onCopyProjectURL:i,onClose:n,onShowUpsell:p}){let{activeIds:a,project:c}=e,{space:u}=c,m=t.spaces.find(({id:V})=>V===u.id),f=ro("canInviteCollaborators"),{invitedUsers:C,acl:h,dispatchInvites:g,getStableEntryKey:b}=vs(e.acl),[j,R,$,U]=Nr({acl:h,activeIds:a,order:"chronologically",userId:t.id});function X(){p("editor-limit-enterprise-single"),n()}function z(V,I){V instanceof bo&&V.isTemporary&&g({type:"updateInviteStatus",id:I,status:!1})}let G=St();async function me(V){if(G)return G.inviteByEmail(V)}return at.default.createElement(S,{gap:ys,direction:"column",className:tu},at.default.createElement("div",{className:ou},at.default.createElement(v,null,"Invite")),at.default.createElement(Cu,{isViewOnly:f,onUpsellEditors:X,projectState:e,handleInvite:me,handleApiError:z,pendingEntries:U,invitedUsers:C,dispatchInvites:g}),at.default.createElement("div",{className:wn}),at.default.createElement(S,{gap:Ps,direction:"column"},u.displayName&&at.default.createElement(Mu,{displayName:u.displayName,avatar:m==null?void 0:m.avatar}),at.default.createElement(Au,{isViewOnly:f,isDraftProject:o,isCurrentUserOwner:r,projectState:e,onCopyProjectURL:i,onAccessChange:s,onShowUpsell:p})),at.default.createElement("div",{className:wn}),at.default.createElement("div",{className:nu},at.default.createElement(Iu,{isViewOnly:f,onUpsellEditors:X,projectState:e,handleInvite:me,handleApiError:z,currentUserEntry:j,activeEntries:R,inactiveEntries:$,pendingEntries:U,invitedUsers:C,dispatchInvites:g,getStableEntryKey:b})))}var Ue=k(T());var K=k(T());var xu="main_m1qqqi9r",ju="shareUsers_s1gmod5c",Eu="shareUsersGrid_s1cc20ej",Du="header_hw5sntf",Mn="isViewOnly_i1pvegcm",Nu="inputInner_ie61lu6",Uu="inputGrid_i2tj1sj",Fu="inputGridUnifiedPreview_i1h1ba5a",Ou="buttonPlus_b1fkm4u6",Bu="roleSelect_rdy16ua",_u="projectLink_p1k13gha",Hu="projectLinkSettings_p1ny9l3b",Wu="projectLinkCopy_p1m8xse2",qu="domains_d182d5ua",Vu="errorMessage_e33rzhp",$u="featureWarning_f1lgukk2";var le=k(T());var Uo="container_c10h7kck",zu="containerNoButton_c192aq9y",Gu="containerUnifiedPreview_c1u2lhos",Ku="editableRole_e172bf8b",ur="role_rurgo96",Fo="lastViewed_l18eroku",Oo="userInfo_u172nry5",Zu="badgeFramerEmployeeWrapper_b7ddp33",Bo="userInfoName_u1jixtuu",Ms="button_br40lcr",Ln="buttonSquare_blt5svh",Yu="collaboratorsIcon_cwxywkq";var Xu=({space:t})=>{let e=Nt.extractInitials(t.displayName||"");return le.default.createElement("li",{className:Uo},le.default.createElement("div",null,le.default.createElement(uo,{color:Ye.tint,text:e})),le.default.createElement("div",{className:Oo},le.default.createElement(Te,{className:A(he,Bo)},t.displayName),le.default.createElement(Te,{size:10,className:Fo},le.default.createElement(v,null,"All team members"))),le.default.createElement("div",{className:ur},le.default.createElement(v,null,"Can access")))},Qu=()=>le.default.createElement("li",{className:A(Uo,zu)},le.default.createElement("div",null,le.default.createElement("div",{className:Yu},le.default.createElement(bg,null))),le.default.createElement("div",{className:Oo},le.default.createElement(Te,{className:A(he,Bo)},le.default.createElement(v,null,"Project Collaborators")),le.default.createElement(Te,{size:10,className:Fo},le.default.createElement(v,null,"All collaborators can view"))));function bg(){return le.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"30",height:"30"},le.default.createElement("g",null,le.default.createElement("defs",null,le.default.createElement("path",{d:"M 15 7 C 17.209 7 19 8.791 19 11 C 19 13.209 17.209 15 15 15 C 12.791 15 11 13.209 11 11 C 11 8.791 12.791 7 15 7 Z",id:"a1000z"}),le.default.createElement("clipPath",{id:"a1001z"},le.default.createElement("use",{xlinkHref:"#a1000z"}))),le.default.createElement("use",{xlinkHref:"#a1000z",fill:"transparent",clipPath:"url(#a1001z)",strokeWidth:"3",stroke:"#FFFFFF"})),le.default.createElement("path",{d:"M 9 21 L 9 21 C 9 19.205 10.455 17.75 12.25 17.75 L 17.75 17.75 C 19.545 17.75 21 19.205 21 21 L 21 21",fill:"transparent",strokeWidth:"1.5",stroke:"#FFFFFF",strokeLinecap:"round"}))}var Z=k(T());var ed={duration:.15,ease:"easeInOut"},_o={initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,transition:ed},exit:{opacity:0,scale:.5,transition:ed}},Ho={["owner"]:"Owner",["collaborator"]:"Can edit",["viewer"]:"Can view",["prototypeViewer"]:"Can view prototype"},vg=[{label:Ho["collaborator"],action:"collaborator"},{label:Ho["viewer"],action:"viewer"},{type:"separator"},{label:"Remove",action:"remove"}],yg=[{label:Ho["collaborator"],action:"collaborator",disabled:!0},{label:Ho["viewer"],action:"viewer",disabled:!0},{type:"separator"},{label:"Remove",action:"removeInvite"}],td=Z.default.forwardRef(function({canInviteEditors:e,inactive:o=!1,entry:r,handleRetry:s,immutable:i,upsellEditors:n,indicateFramerEmployee:p,onClick:a,onClickHoverIcon:c},u){let m=St(),{user:f,role:C,pending:h}=r,[g,b]=(0,Z.useState)(C),{isDarkMode:j}=De(),R=Xr();async function $(z){let{top:G,left:me}=z.currentTarget.getBoundingClientRect(),V=await R({location:{x:me,y:G},items:h?yg:vg,enableTranslate:!0});if(!V)return;let{action:I}=V;if(I!==C)if(I==="collaborator"){if(!e)return n();b(I),m==null||m.updateUserPermissions({id:f.id,role:I,permissions:Ut}).catch(N)}else I==="viewer"?(b(I),m==null||m.updateUserPermissions({id:f.id,role:I,permissions:null}).catch(N)):V.action==="remove"?m==null||m.removeUserPermissions({id:f.id}).catch(N):V.action==="removeInvite"&&(m==null||m.removeInvite({id:f.id}).catch(N))}let U;h&&r.success===!1?U=Z.default.createElement(ut,{as:Se.button,..._o,type:"button",className:A(Ms),onClick:()=>s(f.id)},"Retry"):C==="owner"||i?U=Z.default.createElement(Se.span,{..._o,key:"role"},Ho[C]):U=Z.default.createElement(ut,{as:Se.button,variant:"link",className:Ku,onClick:$},Ho[g],Z.default.createElement(bt,null));let X=p?`${f.name.split(" ")[0]} from Framer`:f.name;return Z.default.createElement(Se.li,{ref:u,..._o,className:A(Uo)},Z.default.createElement("div",null,Z.default.createElement(tr,{entry:r,isDarkMode:j,onClick:a,onClickHoverIcon:c}),p?Z.default.createElement("div",{className:Zu,title:"Framer Employee"},Z.default.createElement(kr,{width:"6",height:"9"})):null),Z.default.createElement("div",{className:Oo},Z.default.createElement(Te,{className:A(he,Bo),title:f.name},X),Z.default.createElement(Te,{size:10,className:Fo},h?Z.default.createElement(v,null,"Pending"):xr(r,!o))),Z.default.createElement("div",{className:ur},Z.default.createElement(Yt,{initial:!1,mode:"wait"},U)))}),od=Z.default.forwardRef(({entry:t,handleRetry:e,isDarkMode:o,isUnifiedPreviewEnabled:r},s)=>{let{user:i,pending:n}=t,[p,a]=Z.default.useState(!1),c=St(),u=Z.default.useCallback(()=>{if(!c)return;a(!0),(n?c.removeInvite:c.removeUserPermissions)({id:i.id}).catch(()=>a(!1))},[n,i.id,c]),m;return n&&t.success===!1?m=Z.default.createElement(ut,{as:Se.button,..._o,className:A(Ms,r&&Ln),onClick:()=>e(i.id)},r?Z.default.createElement(Fi,{color:Ye.previewRemovePrototypeUserIcon}):"Retry"):m=Z.default.createElement(ut,{as:Se.button,..._o,className:A(Ms,r&&Ln),onClick:u},r?Z.default.createElement(Ir,{color:Ye.previewRemovePrototypeUserIcon}):Z.default.createElement(v,null,"Remove")),p?null:Z.default.createElement(Se.li,{ref:s,..._o,className:A(Uo,r&&Gu)},Z.default.createElement("div",null,Z.default.createElement(tr,{entry:t,isDarkMode:o})),Z.default.createElement("div",{className:Oo},Z.default.createElement(Te,{className:A(he,Bo),title:i.name},i.name),Z.default.createElement(Te,{size:10,className:Fo},n?Z.default.createElement(v,null,"Pending"):Z.default.createElement(v,null,"Can view prototype"))),Z.default.createElement("div",{className:ur},m))});function Ls({currentUserId:t,isUnifiedPreviewEnabled:e=!1,isViewOnly:o,projectState:r,type:s,onUpsellEditors:i}){let{activeIds:n,project:p}=r,{space:a,settings:c}=p,{isDarkMode:u}=De(),m=Cr(),f=(0,K.useRef)(0),{invitedUsers:C,acl:h,dispatchInvites:g,getStableEntryKey:b}=vs(r.acl),j=yt("canInviteEditors"),[R,$]=(0,K.useState)(!1),[U,X]=(0,K.useState)(""),z=j?"collaborator":"viewer",[G,me]=(0,K.useState)(s==="project"?z:"prototypeViewer"),[V,I,Q,ee]=Nr({acl:h,activeIds:n,order:"alphabetically",filter:({role:H})=>{switch(s){case"project":return H!=="prototypeViewer";case"prototype-view":return H==="prototypeViewer";default:return Ie(s)}},userId:t});(0,K.useEffect)(()=>{s==="project"&&me(j?"collaborator":"viewer")},[j,s]);function fe(H,B){H instanceof bo&&H.isTemporary&&g({type:"updateInviteStatus",id:B,status:!1})}let Ee=St();async function J(H){if(Ee)return Ee.inviteByEmail(H)}async function D(H){g({type:"updateInviteStatus",id:H,status:null});try{let B=C.find(({user:Ce})=>Ce.id===H);if(B)await J({email:B.email,role:B.role,permissions:B.permissions});else throw new Error}catch(B){fe(B,H)}}async function te(H){if(H.preventDefault(),G==="collaborator"&&!j)return i();let B=U.toLowerCase().trim();if(ss(B)&&!C.find(({user:Ce})=>Ce.name===B)&&!ee.find(({user:Ce})=>Ce.name===B)){let[,Ce]=B.split("@");if(Ce&&Pg(s,c)&&c.allowedDomains.length>0&&!c.allowedDomains.includes(Ce)){$(!0);return}let _=`${f.current++}`,Fe={user:{id:_,name:B,initials:""},role:G,permissions:G==="collaborator"?Ut:null,pending:!0,color:0,lastOpenedAt:"",success:null,email:B};g({type:"addEntry",entry:Fe}),X(""),m.start({scale:1,transition:{type:"spring",velocity:-20,restDelta:.01,restSpeed:.01,stiffness:2e3,damping:40}}).catch(N),a.scope==="organization"&&G==="collaborator"&&Jl({teamLicenseType:p.teamLicenseType})&&Xl();try{let Oe=await J({email:Fe.email,role:Fe.role,permissions:Fe.permissions});Oe&&g({type:"resolveEntry",id:_,resourceId:Oe.user.id})}catch(Oe){fe(Oe,_),g({type:"removeEntry",id:_})}}else m.start({x:0,transition:{type:"spring",velocity:600,stiffness:5e3,damping:20}}).catch(N)}async function ae(H){if(o)return;let{top:B,left:Ce}=H.currentTarget.getBoundingClientRect(),_=["collaborator","viewer"].map(Oe=>({action:Oe,label:Zs(Oe)})),Fe=await vo.show(_,{enableTranslate:!0,isDarkMode:u,location:{x:Ce,y:B}});Fe&&me(Fe.action)}function ve(H){R&&$(!1),X(H)}let tt=(0,K.useMemo)(()=>{let H=[];return V&&H.push({entry:V,immutable:!0}),C.forEach(B=>{H.push({entry:B,immutable:o})}),I.forEach(B=>{H.push({entry:B,immutable:o})}),Q.forEach(B=>{H.push({entry:B,inactive:!0,immutable:o})}),ee.forEach(B=>{H.push({entry:B,inactive:!0,immutable:o})}),H},[V,C,I,Q,ee,o]),je=(0,K.useCallback)(H=>{var B;(B=l.remoteDocument)==null||B.setSpectatedUser(H.id)},[]);return K.default.createElement(K.default.Fragment,null,K.default.createElement("form",{className:A(Uu,e&&s==="prototype-view"&&Fu),onSubmit:te},K.default.createElement(Se.div,{animate:m,style:{originY:.9}},K.default.createElement(xt,{hasError:R,large:!0},K.default.createElement(jt,{autoFocus:!0,type:"email",name:"email",placeholder:"email@example.com",value:U,onChange:ve,constantChange:!0,enabled:!o,className:A(Nu,o&&Mn)}),s==="project"&&K.default.createElement(Y,{variant:"link",onClick:ae,className:A(Bu,o&&Mn)},Zs(G),K.default.createElement(bt,null))),K.default.createElement(go,{className:Vu,visible:R},c.allowedDomains.length>2?K.default.createElement(v,null,"The email domain you entered is not allowed"):K.default.createElement(K.default.Fragment,null,K.default.createElement(v,null,"Only"),K.default.createElement("span",{className:qu}," ",c.allowedDomains.map(H=>`@${H}`).join(", ")," "),K.default.createElement(v,null,"emails are allowed")))),e&&s==="prototype-view"?K.default.createElement(Y,{className:Ou,enabled:!o,large:!0,title:"Send",type:"submit",variant:"primary",onClick:qe},K.default.createElement(Ui,null)):K.default.createElement(Y,{enabled:!o,large:!0,title:"Send",type:"submit",variant:"primary",onClick:qe})),K.default.createElement("section",{className:A(ju)},K.default.createElement("ul",{className:Eu},s==="prototype-view"&&K.default.createElement(Qu,null),s==="project"&&a.displayName&&K.default.createElement(Xu,{space:a,key:a.id}),K.default.createElement(Yt,{initial:!1},tt.map(({entry:H,immutable:B,inactive:Ce})=>s==="project"?K.default.createElement(td,{isUnifiedPreviewEnabled:e,indicateFramerEmployee:!!H.user.isFramerEmployee&&!(V!=null&&V.user.isFramerEmployee),canInviteEditors:j,key:b(H),entry:H,handleRetry:D,immutable:B,inactive:Ce,upsellEditors:()=>i(),onClick:!Ce&&H!==V?()=>je(H.user):void 0,onClickHoverIcon:K.default.createElement(Jo,null)}):K.default.createElement(od,{isUnifiedPreviewEnabled:e,key:b(H),entry:H,handleRetry:D,isDarkMode:u}))))))}function Pg(t,e){switch(t){case"project":return e.featureFlags.canInviteAnyDomain==="off";case"prototype-view":return e.featureFlags.canInviteAnyDomainToPrototype==="off";default:return Ie(t)}}function rd(t){let{user:e,projectState:o,isDraftProject:r,isCurrentUserOwner:s,onAccessChange:i,onCopyProjectURL:n,onClose:p,onShowUpsell:a}=t,{project:c}=o,{publicAccess:u,settings:m}=c,f=ro("canInviteCollaborators"),C=l.wrapHandler(()=>{Je(Yr(c).toString()).catch(N),n()}),h=yt("canUsePrivateLink");function g(){F("ui_interaction",{page:"invite-panel",id:"open-project-link-settings"})}function b(){h?i("none"):a("private-project-link"),p()}function j(){a("editor-limit-enterprise-single"),p()}return Ue.default.createElement(Ue.default.Fragment,null,Ue.default.createElement("div",{className:xu},Ue.default.createElement("section",null,Ue.default.createElement("div",{className:Du},Ue.default.createElement(v,null,"Invite Collaborators"))),Ue.default.createElement(Ls,{...t,isViewOnly:f||r,currentUserId:e.id,type:"project",onUpsellEditors:j}),Ue.default.createElement("section",{className:_u},Ue.default.createElement(Xo,{enabled:!f&&m.featureFlags.canChangeProjectAccess==="on"&&(!r||s),large:!0,className:Hu,onClick:g},Ue.default.createElement(Qt,{key:"public",title:"Anyone with the link can view",selected:u==="view",onSelect:()=>i("view")}),Ue.default.createElement(Qt,{key:"space",title:"Only collaborators can access",selected:u==="none",onSelect:b})),Ue.default.createElement(Ct,{title:"Copy Link",onClick:C,className:Wu})),Ue.default.createElement(S,{direction:"row",gap:6,alignItems:"center",className:$u},Ue.default.createElement(mo,null),Ue.default.createElement("div",null,Ue.default.createElement(v,null,"Our permission model will be updated soon")," \xB7 ",Ue.default.createElement(fo,{href:_a},"Learn More")))))}function nd(t){let e=t.projectStore.useState(({project:i})=>(i==null?void 0:i.settings.resourceLimits.searchablePages)||null),o=oo("TreeStore",()=>Boolean(t.treeStore.treeIndex.searchComponentNodeIds.size)),r=oo("Tree",()=>Ha(t));return{show:o&&e!==null&&r>e,limit:e}}var Pe=k(T());var Wo=k(T());var Cg=rt("app");function id(t,e){var h;let o=e.treeVersion||0,r=((h=l.remoteDocument)==null?void 0:h.treeVersion())||0,s=o!==0&&r!==0,i=s&&o!==r,[n,p]=Wo.default.useState(i),[a,c]=Wo.default.useState([]),[u,m]=Wo.default.useState(!1),f=yo(()=>new AbortController),C=Wo.default.useCallback(()=>{f.abort(),c([]),m(!1),p(!1)},[f]);return Wo.default.useEffect(()=>(i&&Sg(t,o,r,f.signal).then(g=>c(g)).catch(g=>{g.name!=="AbortError"&&(Cg.reportError(g),m(!0))}).finally(()=>p(!1)),()=>{f.abort()}),[]),{isEnabled:s,isLoadingChanges:n,hasChanges:a.length>0,hasError:u,changes:a,resetChanges:C}}function wg(){return{fetchingApiMs:0,computingMs:0,totalMs:0}}async function Sg(t,e,o,r){let s=new xa(wg()),i=s.time("totalMs"),n=s.time("fetchingApiMs"),{diffs:p}=await Mg(t,e,o,r);n.done();let a=s.time("computingMs"),c=kg(p);a.done(),i.done();let u=s.get();return F("changelog",{projectId:t,...u}),c}function kg(t){var s;if(Object.entries(t).length===0)return[];let e={["WebPage"]:[],["SmartComponent"]:[],["CollectionItem"]:[]},o;for(let i of Object.values(t)){if(((s=i.to)==null?void 0:s.__class)!=="RootNode")continue;let n=Or(i.to);we(Zi(n),"Expected RootNode to deserialize as RootNode"),o=n}we(o,"Expected RootNode to be in diffs");for(let i of Object.values(t)){let n=i.to||i.from;if(!n)continue;let p=Or(n,n.parentid);if(!p)continue;let a=Ig(p,t,o);a&&e[a.type].push({type:a.type,nodeId:p.id,name:a.name,status:Tg(i),userIds:new Set(i.userIds)})}let r=[];for(let[i,n]of Object.entries(e))n.sort(i==="WebPage"?Ag:ad),r.push(...n);return r}function Ig(t,e,o){var r,s,i;if(Yi(t)){let n=o.homePageNodeId;return{type:"WebPage",name:t.id===n?"Home":Aa(t,n)||Ma(t,n)||Fr(t)}}else{if(Mr(t))return{type:"SmartComponent",name:t.name||Fr(t)};if(Lr(t)){we(t.parentid,"Expected CollectionItemNode to have parentid");let n=((r=e[t.parentid])==null?void 0:r.to)||((s=e[t.parentid])==null?void 0:s.from);we(n,"Expected CollectionItemNode's parent to exist in the diffs map");let p=Or(n,n.parentid);we(Xi(p),"Expected CollectionItemNode's parent to be a CollectionNode");let a=p.name||Fr(p),c=p.variables.find(f=>f.type==="slug"),u=c&&((i=t.getControlProp(c.id))==null?void 0:i.value);return{type:"CollectionItem",name:Ki(u)?`${a}/${u}`:`${a}/Item`}}}}function Tg(t){return we(t.from||t.to,"classifyStatus expects a NodeDiff with at least one of `from`/`to`"),t.from===null?1:t.to===null?2:0}function ad(t,e){return t.name.localeCompare(e.name,void 0,{sensitivity:"base"})}function Ag(t,e){return t.name==="Home"&&e.name==="Home"?0:t.name==="Home"?-1:e.name==="Home"?1:ad(t,e)}async function Mg(t,e,o,r){let s=await fetch(`/projects/${t}/tree/v2/changes/${e}-${o}`,await ka.withAuthorizationHeader({signal:r}));if(!s.ok)throw new Error(`Non-OK HTTP response: ${s.status}`);return s.json()}var Ae=k(T());var ld="container_c1ei30bi",xn="removed_rg4mzjt",cd="icon_i1rud32t",pd="name_nauun69",ud="nameLink_n8oy0xx",dd="avatarList_a1mis7ef";var md=Ae.default.memo(function({changes:e}){let{isDarkMode:o}=De(),{acl:r}=l.projectStore.useState();return Ae.default.createElement($i,{className:ld},Ae.default.createElement(S,null,e.map((s,i)=>Ae.default.createElement(Eg,{key:i,change:s,acl:r,isDarkMode:o}))))}),xg=3,jg={["WebPage"]:Ae.default.createElement(Ei,null),["SmartComponent"]:Ae.default.createElement(Ni,{width:"12",height:"12"}),["CollectionItem"]:Ae.default.createElement(Bi,null)};function Eg({change:t,acl:e,isDarkMode:o}){let r=e.filter(s=>t.userIds.has(s.user.id));return Ae.default.createElement(S,{direction:"row",alignItems:"center"},Ae.default.createElement("div",{className:A(cd,t.status===2&&xn)},jg[t.type]),Ae.default.createElement(S,{direction:"row",alignItems:"center",className:pd},Dg(t)),Ae.default.createElement("div",{className:dd},Ae.default.createElement(aa,{entries:r,isDarkMode:o,maxAvatars:xg,small:!0,ignoreStatus:!0})))}function Dg(t){return t.status===2?Ae.default.createElement(Ae.default.Fragment,null,Ae.default.createElement("span",{className:A(xn,he)},t.name),Ae.default.createElement(Zo,{variant:"neutral"},"REMOVED")):Ae.default.createElement(Ae.default.Fragment,null,Ae.default.createElement(fo,{onClick:()=>Ng(t.nodeId),className:A(he,ud)},t.name),t.status===1&&Ae.default.createElement(Zo,null,"NEW"))}function Ng(t){let e=l.tree.getNode(t);e&&(ba(e)?l.scopeStore.select(e.id):Lr(e)&&(l.scopeStore.select(Ur),l.selection.set(e.id)))}function fd({permissions:t,stagingEnabled:e,upsellPublishMultiPageSite:o}){if(!(e?t.canPublishToStaging:t.canPublish))return{buttonLabel:"No permissions to update",tooltipText:e&&!t.canPublishToStaging?"You need at least one assigned role to deploy to the staged site":"You do not have permission to deploy to the live site"};if(o)return{buttonLabel:"Exceeded page limit",tooltipText:"The Mini plan only allows a /home page and a /404 page. Upgrade your plan or delete all other web pages to update your site."}}var gd="container_c70v5i5",dr="title_t1m6d3um",xs="button_ba9eeph",hd="tooltip_tklurhb",bd="site_sg8hahu",vd="icon_i7ed8wv",yd="hostname_h42o8li",Pd="link_l1agk2wg",Cd="description_d1854po0",jn="info_i1p0yt0i",En="infoHover_ishjax2",wd="warning_w1gzj9e3",Sd="warningHover_w15kuguu",Dn="divider_d1q39ypx",kd="changeLogTitleLoading_c1exh9nz",Id="infoCard_itq4iqk",Td="infoCardTitle_irnc4ju",Ad="iconWrapper_i16wl99r",Md="infoCardCopy_i1kdm6pf";var ft=k(T());var Ld="search-upsell";function xd({searchIndexingUpsell:t,onClose:e}){let o=or(()=>{e(),F("ui_interaction",{page:Ld,id:"confirm-upsell"}),l.publishStore.handleSearchLimitUpsell(l,t.limit)},[e,t.limit]);return(0,ft.useEffect)(()=>{F("ui_impression",{page:Ld})},[]),ft.default.createElement(S,{className:Id,gap:15,padding:"20px 15px",alignItems:"center"},ft.default.createElement("div",{className:Ad},ft.default.createElement(mo,null)),ft.default.createElement(S,{gap:4,paddingTop:5,alignItems:"center"},ft.default.createElement("h6",{className:A(dr,Td)},"Search limit reached"),ft.default.createElement("div",{className:Md},`You have more than ${t.limit} page${t.limit===1?"":"s"},`,ft.default.createElement("br",null),"site search will be disabled.")),ft.default.createElement(Y,{variant:"link",bold:!0,onClick:o},"Upgrade"))}var ie=k(T());function Og(t,e){if(t.status==="invalid_dns")return{tooltipText:"Invalid DNS"};if(la(e.status))return{tooltipText:"Optimization issues"}}function Nn({hostname:t,deployment:e,displayMinimalUI:o,isLatest:r,isPending:s,isOptimizing:i,onOpenVersion:n,onOpenPendingDomain:p,onOpenWarning:a}){let c=Og(t,e),u=ie.default.useRef(null),{triggerProps:m,tooltipProps:f}=Tr({interactive:!0,disabled:!(c!=null&&c.tooltipText),triggerRef:u}),C=()=>{F("ui_interaction",{page:"publish-popover",id:t.type==="custom"?"open-custom-link":"open-published-link"})};return ie.default.createElement("div",{className:bd},ie.default.createElement("div",{className:vd},ie.default.createElement(Di,null)),ie.default.createElement("div",{className:A(yd,he)},ie.default.createElement(fo,{href:_r(l,t.hostname),onMouseDown:C,className:Pd},t.hostname)),ie.default.createElement("div",{className:Cd},s&&ie.default.createElement("span",{className:A(jn,!o&&En),onClick:p},ie.default.createElement(v,null,"Pending Connection\u2026")),!s&&ie.default.createElement(ie.default.Fragment,null,ie.default.createElement("span",{className:A(jn,!o&&En),onClick:n},ie.default.createElement(v,null,"Updated")," ",ie.default.createElement(Bg,{isoTimestamp:e.createdAt}),!r&&ie.default.createElement(ie.default.Fragment,null," (",t.deploymentId,")")),r&&ie.default.createElement("span",null," \xB7 ",e.deployedBy.name),c&&ie.default.createElement(ie.default.Fragment,null,ie.default.createElement("span",null," \xB7 "),ie.default.createElement("span",{ref:u,...m,className:A(wd,!o&&Sd),onClick:a},ie.default.createElement(v,null,"Warning")),ie.default.createElement(Ar,{...f},c.tooltipText)),!c&&i&&ie.default.createElement(ie.default.Fragment,null,ie.default.createElement("span",null," \xB7 "),ie.default.createElement(v,null,"Optimizing...")))))}function Bg({isoTimestamp:t}){return ie.default.createElement("time",{dateTime:t,title:Sl(t)},sa(ra(t),{addSuffix:!0}))}var ge=k(T());function jd({enabled:t,onClick:e,onSuccess:o,publishStatus:r,infoTooltip:s}){let[i,n]=(0,ge.useState)(),p=(0,ge.useRef)();(0,ge.useEffect)(()=>()=>{p.current&&window.clearTimeout(p.current)},[]);let a=(0,ge.useCallback)(async()=>{let h=await e();n(h?0:1),h&&o(),p.current&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>n(void 0),2e3)},[e,o]),{label:c,content:u}=(0,ge.useMemo)(()=>{if(s)return{label:s.buttonLabel,content:ge.default.createElement(S,{justifyContent:"center",alignItems:"center",direction:"row",gap:8},ge.default.createElement(mo,null),ge.default.createElement(v,null,s.buttonLabel))};if(i===0){let h="Updated";return{label:h,content:ge.default.createElement(S,{gap:3,direction:"row",justifyContent:"center",alignItems:"center"},ge.default.createElement(ji,null,ge.default.createElement(Yo,null)),ge.default.createElement(v,null,h))}}else return i===1?{label:"Update failed",content:ge.default.createElement(v,null,"Update failed")}:r===3?{label:"Publishing\u2026",content:ge.default.createElement(vt,null)}:r===2?{label:"Update",content:ge.default.createElement(v,null,"Update")}:{label:"Publish",content:ge.default.createElement(v,null,"Publish")}},[i,r,s]),m=ge.default.useRef(null),{triggerProps:f,tooltipProps:C}=Tr({className:hd,direction:"right",disabled:!s,triggerRef:m});return ge.default.createElement("div",{ref:m,...f},ge.default.createElement(Y,{variant:"withDepthPrimary",large:!0,title:c,enabled:t,onClick:a,className:xs},u),ge.default.createElement(Ar,{...C},s==null?void 0:s.tooltipText))}function Ed({projectId:t,canPublish:e,onPublish:o,publishStatus:r,onClose:s,defaultHostname:i,customHostname:n,defaultHostnameDeployment:p,customHostnameDeployment:a,deploymentStrategy:c}){return!i||!p||!c?null:Pe.default.createElement(Hg,{projectId:t,canPublish:e,onPublish:o,publishStatus:r,onClose:s,defaultHostname:i,customHostname:n,defaultHostnameDeployment:p,customHostnameDeployment:a,deploymentStrategy:c})}var _g="publish-popover";function Hg({projectId:t,canPublish:e,onPublish:o,publishStatus:r,onClose:s,defaultHostname:i,customHostname:n,defaultHostnameDeployment:p,customHostnameDeployment:a,deploymentStrategy:c}){let{isEnabled:u,isLoadingChanges:m,hasChanges:f,hasError:C,changes:h,resetChanges:g}=id(t,p),b=or(()=>{l.chromeStore.displayMinimalUI||(s(),l.siteSettings.setActiveTab({tab:"domains"}).catch(N))},[s]),j=or(()=>{l.chromeStore.displayMinimalUI||(s(),l.siteSettings.setActiveTab({tab:"versions"}).catch(N))},[s]),R=Xs(p.status);(0,Pe.useEffect)(()=>{F("ui_impression",{page:_g})},[]);let $=Gr(),U=Wa(l,oo),X=nd(l),z=n&&a,G=c==="manual",me=fd({permissions:$,stagingEnabled:Boolean(z)&&G,upsellPublishMultiPageSite:U}),V=Pe.default.createElement(jd,{onClick:o,onSuccess:g,enabled:e&&!U,publishStatus:r,infoTooltip:me});return Pe.default.createElement(S,{padding:15,gap:15,className:gd},Pe.default.createElement("span",{className:dr},"Domains"),Pe.default.createElement(Nn,{hostname:i,deployment:p,displayMinimalUI:l.chromeStore.displayMinimalUI,isLatest:!0,isOptimizing:R,onOpenVersion:j,onOpenPendingDomain:b,onOpenWarning:b}),z&&G&&V,z&&Pe.default.createElement(Nn,{hostname:n,deployment:a,displayMinimalUI:l.chromeStore.displayMinimalUI,isLatest:n.deploymentId===i.deploymentId,isPending:n.status!=="active",isOptimizing:Xs(a.status),onOpenVersion:j,onOpenPendingDomain:b,onOpenWarning:b}),(!z||!G)&&Pe.default.createElement(S,{gap:10},!z&&!l.siteSettings.isOpen&&!l.chromeStore.displayMinimalUI&&Pe.default.createElement(Y,{large:!0,className:xs,onClick:b},Pe.default.createElement(v,null,"Add Custom Domain")),V),X.show?Pe.default.createElement(Pe.default.Fragment,null,Pe.default.createElement("div",{className:Dn}),Pe.default.createElement(xd,{searchIndexingUpsell:X,onClose:s})):u&&Pe.default.createElement(Pe.default.Fragment,null,Pe.default.createElement("div",{className:Dn}),Pe.default.createElement(S,{direction:"row",justifyContent:"space-between"},Pe.default.createElement("span",{className:A(dr,m&&kd)},m?"Loading Changes...":C?"Error Loading Changes":`${h.length} ${h.length===1?"Change":"Changes"}`),m&&Pe.default.createElement(vt,{inline:!0})),!m&&f&&Pe.default.createElement(md,{changes:h})))}var Me=k(T());var Rt=k(T());function Dd({background:t,onBackgroundChange:e}){var a;let o=Rt.default.useCallback(c=>{c==="linear-gradient"||c==="radial-gradient"||e({backgroundType:c})},[e]),r=Rt.default.useCallback(c=>e({backgroundColor:c}),[e]),s=Rt.default.useCallback(c=>{c.then(u=>{var m;return e({backgroundImage:(m=u[0])==null?void 0:m.filename})}).catch(u=>N(u))},[e]),i=Rt.default.useCallback(c=>e({backgroundImageResize:c}),[e]),n=Rt.default.useCallback(c=>{let u=t.backgroundImage;if(!u)return;let m=Ti(u,c);e({backgroundImage:m})},[e,t.backgroundImage]),p=Rt.default.useMemo(()=>new Set(t.backgroundImage!==void 0?[t.backgroundImage]:[]),[t.backgroundImage]);return Rt.default.createElement(dl,{tabsToShow:["solid","image"],currentType:t.backgroundType,value:(a=t.backgroundColor)!=null?a:"",imageReferences:p,imageResize:t.backgroundImageResize&&[t.backgroundImageResize]||[],onChangeFillType:o,onChange:r,onChangeColorStops:qe,onChangeImages:s,onChangeImageResize:i,onChangeAssetSize:n})}var Nd=k(T());function Ud({projectState:t,isViewOnly:e,currentUserId:o}){return Nd.default.createElement(Ls,{type:"prototype-view",currentUserId:o,isViewOnly:e,projectState:t,onUpsellEditors:qe,isUnifiedPreviewEnabled:!0})}var ce=k(T());var Fd="editButton_ej3nt2e",Od="text_t1oh1mju",Bd="input_it68dxq",_d="inputWrapper_ibybjdi",Hd="successIndicator_s1k5u65i";function Wd({isCurrent:t,initialPassword:e="",onPasswordChange:o}){let[r,s]=(0,ce.useState)(!0),[i,n]=(0,ce.useState)(e),[p,a]=(0,ce.useState)(!1),[c,u]=(0,ce.useState)(!1),m=i.length>=8;return(0,ce.useEffect)(()=>{t||(n(e),s(!0),u(!1))},[t,e]),(0,ce.useEffect)(()=>{if(!p)return;let h=setTimeout(()=>a(!1),3e3);return()=>{clearTimeout(h)}},[p,a]),ce.default.createElement("form",{onSubmit:async h=>{if(h.preventDefault(),r){s(!1);return}if(m)try{await o(i),a(!0),s(!0),u(!1)}catch{u(!0)}}},ce.default.createElement("input",{type:"hidden",autoFocus:!0}),ce.default.createElement(S,{padding:"2px 15px 15px 15px",gap:10},ce.default.createElement(S,{direction:"row",alignItems:"center",justifyContent:"flex-start",gap:15},ce.default.createElement(xt,{className:_d,large:!0,hasError:!m||c},ce.default.createElement(jt,{className:Bd,large:!0,value:i,onChange:n,readOnly:r,autoFocus:!1,constantChange:!0}),p&&ce.default.createElement("div",{className:Hd},ce.default.createElement(Yo,null))),ce.default.createElement(Y,{type:"submit",large:!0,className:Fd,enabled:r||m},r?ce.default.createElement(qg,null):ce.default.createElement(Yo,{animate:!1}))),ce.default.createElement(go,{style:{marginTop:"-1.5px"},visible:!m||c},m?ce.default.createElement(v,null,"Could not save password"):ce.default.createElement(v,null,"8 characters minimum")),ce.default.createElement("div",{className:Od},"All editors of this project can see and edit the password."),ce.default.createElement(Ct,{enabled:r,title:"Copy Password",variant:"primary",large:!0,onClick:()=>{Je(i).catch(N)}})))}function qg(){return ce.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},ce.default.createElement("path",{d:"M 9.828 3.343 C 10.024 3.148 10.34 3.148 10.536 3.343 L 12.657 5.464 C 12.852 5.66 12.852 5.976 12.657 6.172 L 6.26 12.568 C 6.051 12.777 5.784 12.92 5.494 12.978 L 3.139 13.449 C 2.789 13.519 2.481 13.211 2.551 12.861 L 3.022 10.506 C 3.08 10.216 3.223 9.949 3.432 9.74 Z M 11.939 1.232 C 12.135 1.037 12.451 1.037 12.646 1.232 L 14.768 3.354 C 14.963 3.549 14.963 3.865 14.768 4.061 L 14.061 4.768 C 13.865 4.963 13.549 4.963 13.354 4.768 L 11.232 2.646 C 11.037 2.451 11.037 2.135 11.232 1.939 Z",fill:"currentColor"}))}var M=k(T());var qd=k(T()),Vg=0;function $g(t){let e=++Vg;return(t||"")+e}function io(t){return qd.default.useRef($g(t)).current}var pe=k(T());var Vd="container_c1soe0x8",$d="divider_d1ybdwop",qo="settingsRow_s1giq8pn",ao="settingsControl_s1ovmgzl",Rd="checkboxRow_c198tspn",zd="checkbox_co5w69a",zt="settingsLabel_s1mkh3b7",Gd="settingsLabelDisabled_sqzwbmz",Kd="manageAccessButton_m1lifmfp",Zd="manageAccessButtonDisabled_m1d53y1l",Yd="manageAccessIcon_m1mpkz3u",Jd="manageAccessIconDisabled_mv2lvgv",Xd="proBadge_po5uar2",Qd="noBackgroundTitle_n1qz2scu",em="disabledBackground_dgq9dul",tm="disabledBackgroundTitle_d1dop2e9",om="iconInfo_i1lt0ix9",rm="tooltipWrapper_tpmmgsr",sm="tooltip_t136xnnt";var zg=pe.default.forwardRef(function(e,o){return pe.default.createElement("svg",{ref:o,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",className:e.className},pe.default.createElement("path",{d:"M 0 6 C 0 2.686 2.686 0 6 0 C 9.314 0 12 2.686 12 6 C 12 9.314 9.314 12 6 12 C 2.686 12 0 9.314 0 6 Z M 6 10 C 6.552 10 7 9.552 7 9 C 7 8.448 6.552 8 6 8 C 5.448 8 5 8.448 5 9 C 5 9.552 5.448 10 6 10 Z M 5 6 C 5 6.552 5.448 7 6 7 C 6.552 7 7 6.552 7 6 L 7 3 C 7 2.448 6.552 2 6 2 C 5.448 2 5 2.448 5 3 Z",fill:Ye.informationIcon}))});function lo(t){let{enabled:e,id:o,onChange:r,value:s,label:i,upsellType:n,tooltipText:p}=t,[a,c]=(0,pe.useState)(!1),[u,m]=(0,pe.useState)({top:0,left:0}),f=(0,pe.useRef)(null),C=(0,pe.useRef)(null);return(0,pe.useLayoutEffect)(()=>{let h=f.current,g=C.current;if(!h||!g)return;let{right:b,height:j,top:R}=h.getBoundingClientRect(),{height:$}=g.getBoundingClientRect(),U=b+wr.tooltipArrowHeight+5,X=R+j/2-$/2;m({left:U,top:X})},[a]),pe.default.createElement("div",{className:Rd},pe.default.createElement(Jt,{enabled:e,className:zd,id:o,onChange:r,value:s}),pe.default.createElement("label",{className:A(zt,!e&&Gd),htmlFor:o},pe.default.createElement(v,null,i),p&&pe.default.createElement(zg,{className:om,ref:f,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)})),n&&pe.default.createElement("span",{className:Xd},n==="professional"?pe.default.createElement(Li,null):pe.default.createElement(xi,null)),t.onManageSettings&&pe.default.createElement("div",{role:"button",className:A(Kd,!t.canManageSettings&&Zd),onClick:t.onManageSettings,onKeyDown:()=>{},tabIndex:0,"data-testid":"manage-access"},pe.default.createElement(v,null,"Manage"),pe.default.createElement(Gg,{className:A(Yd,!t.canManageSettings&&Jd)})),a&&pe.default.createElement("div",{className:rm,style:u,ref:C},pe.default.createElement(qi,{direction:"left",delay:50,text:p,tint:Ye.tint,className:sm})))}function Gg({className:t}){return pe.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"8",height:"8"},pe.default.createElement("path",{d:"M 4 1 L 7 4 L 4 7",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round"}))}function im({background:t,deviceHand:e,deviceTheme:o,deviceRotated:r,presetOrientationIsPortrait:s,canChangeResponsive:i,isDeviceHandEnabled:n=!0,isDeviceOrientationEnabled:p,isViewOnly:a,onAccessChange:c,onBackground:u,onBackgroundDelete:m,onDeviceHandChange:f,onDeviceThemeChange:C,onDeviceOrientationChange:h,onManageAccess:g,onManagePassword:b,onResponsiveChange:j,onShowUpsell:R,onTouchCursorChange:$,projectState:U,responsive:X,shareLink:z,shareLinkActions:G,touchCursor:me}){var Ke;M.default.useEffect(()=>{l.processWhenReady(()=>{l.previewStore.highlights=z.highlights})},[z.highlights]);let V=io("toggle-responsive-"),I=io("toggle-touch-cursor-"),Q=io("share-preview-show-highlights-"),ee=io("share-preview-show-full-screen-"),fe=io("share-preview-set-public-access-"),Ee=io("share-preview-set-prototype-password-"),{canUsePrivateLink:J,canUsePrototypePassword:D,canChangePrototypeAccess:te,canHidePreviewInterface:ae}=U.project.settings.featureFlags,ve=J==="upsell",tt=ae==="upsell",je=D==="upsell",H=M.default.useCallback(async se=>{if(ve){R("private-links");return}try{await c(se?"none":"view")}catch{}},[ve,c,R]),B=M.default.useCallback(se=>{G.setFullscreen(se)},[G]),Ce=M.default.useCallback(async se=>{try{await c(se?"password":"view")}catch{}},[c]),[_,Fe]=M.default.useState(l.previewStore.pluginComponentId),Oe=M.default.useCallback(se=>{Fe(se),l.previewStore.pluginComponentId=se},[]),ze=M.default.useMemo(()=>{var po;let se={};ki.forEachComponent(lt=>{Si(lt)&&(se[lt.identifier]=lt.name)});let Be=l.tree.get(Pa);if((po=Be==null?void 0:Be.children)!=null&&po.length)for(let lt of Be.children)wi(lt.annotations,"framerPreviewPlugin")&&(se[lt.codeComponentIdentifier]=lt.title);return Object.entries(se)},[]),Gt=!a&&!_&&i,Le=_?!1:X,Ge=[M.default.createElement(Qo,{key:s?"Portrait":"Landscape",title:s?"Portrait":"Landscape",identifier:!1,selected:p&&!r,enabled:!a&&p,onSelect:h},s?M.default.createElement(zs,null):M.default.createElement(Rs,null)),M.default.createElement(Qo,{key:s?"Landscape":"Portrait",title:s?"Landscape":"Portrait",identifier:!0,selected:p&&r,enabled:!a&&p,onSelect:h},s?M.default.createElement(Rs,null):M.default.createElement(zs,null))],Xe=(0,M.useMemo)(()=>{if(D==="on"){if(te==="off")return"\u201CAnyone with the link can open prototypes\u201D must be enabled in your team settings.";if(z.publicAccess==="none")return"Disable the \u201CPrivate Link\u201D setting."}},[D,te,z.publicAccess]);return M.default.createElement("div",{className:A(Vd,"unified-preview")},M.default.createElement("div",null,M.default.createElement("div",{className:qo},M.default.createElement("div",{className:zt},"Theme"),M.default.createElement("div",{className:ao},M.default.createElement(Gs,{enabled:!a},M.default.createElement(Qo,{title:"Dark",identifier:"dark",selected:o==="dark",onSelect:C,enabled:!a}),M.default.createElement(Qo,{title:"Light",identifier:"light",selected:o==="light",onSelect:C,enabled:!a})))),M.default.createElement("div",{className:qo},M.default.createElement("div",{className:zt},"Device"),M.default.createElement("div",{className:ao},M.default.createElement(Gs,{enabled:!a&&p},s?Ge:Ge.reverse()))),M.default.createElement("div",{className:qo},M.default.createElement("div",{className:zt},"Hand"),M.default.createElement("div",{className:ao},M.default.createElement(Xo,{enabled:!a&&n&&!_},[["None",void 0],["Model 1","hand-1"],["Model 2","hand-2"]].map(([se,Be])=>M.default.createElement(Qt,{key:`${Be}`,identifier:Be,title:se,selected:e===Be,onSelect:f}))))),M.default.createElement("div",{className:qo},M.default.createElement("div",{className:zt},M.default.createElement(v,null,"Background")),M.default.createElement("div",{className:ao},M.default.createElement(Zg,{background:t,enabled:!a,onClick:u,onDelete:m}))),ze.length>0&&M.default.createElement("div",{className:qo},M.default.createElement("div",{className:zt},M.default.createElement(v,null,"Custom UI")),M.default.createElement("div",{className:ao},M.default.createElement(Xo,null,M.default.createElement(Qt,{title:"None",selected:!_,onSelect:Oe}),ze.map(([se,Be])=>M.default.createElement(Qt,{key:se,identifier:se,title:Be,selected:se===_,onSelect:Oe}))))),M.default.createElement("div",{className:$d}),M.default.createElement(lo,{enabled:Gt,id:V,onChange:j,value:Le,label:"Responsive Design"}),M.default.createElement(lo,{enabled:!a,id:I,onChange:$,value:me,label:"Touch Cursor"}),M.default.createElement(lo,{enabled:!a,id:Q,onChange:G.setHighlights,value:z.highlights,label:"Interaction Highlights"}),M.default.createElement(lo,{enabled:!a&&ae!=="off",id:ee,onChange:B,value:z.fullscreen,label:"Hide Framer Interface",upsellType:tt?"professional":void 0}),M.default.createElement(lo,{enabled:!a&&(ve||z.publicAccess!=="password"&&J==="on"&&te==="on"),id:fe,onChange:H,value:z.publicAccess==="none",label:"Private Link",upsellType:ve?"professional":void 0,canManageSettings:!a&&z.publicAccess==="none",onManageSettings:g}),M.default.createElement(lo,{enabled:!a&&(je||z.publicAccess!=="none"&&D==="on"),id:Ee,onChange:Ce,value:z.publicAccess==="password",label:"Set Password",upsellType:je?"enterprise":void 0,tooltipText:Xe,canManageSettings:!a&&z.publicAccess==="password"&&!!((Ke=U.project.shareLinks[0])!=null&&Ke.password),onManageSettings:b})))}function Zg({background:t,enabled:e=!0,onClick:o,onDelete:r}){let{backgroundEnabled:s,backgroundType:i,backgroundColor:n,backgroundImage:p}=t,a=Ye.swatchBackgroundPlaceholderForFill,c=e?"Add\u2026":"None",u=jl(n!=null?n:"",{currentType:i,imageReferences:p!==void 0?new Set([p]):void 0});s&&(a=u,c=xl(i,n));let m=M.default.useCallback(b=>{e&&(b.stopPropagation(),o())},[e,o]),f=M.default.useCallback(b=>{e&&b.key==="Enter"&&(b.stopPropagation(),o())},[e,o]),C=M.default.useCallback(b=>{e&&(b.stopPropagation(),r())},[e,r]),h=M.default.useCallback(b=>{e&&b.key==="Enter"&&(b.stopPropagation(),r())},[e,r]),g=wt("sites");return M.default.createElement("div",{role:"button",tabIndex:0,className:A(ol,ao,!e&&em),onClick:m,onKeyDown:f},M.default.createElement("div",{className:A(rl,g&&sl)},M.default.createElement(cl,{background:a})),M.default.createElement("div",{className:A(he,nl,!s&&Qd,!e&&tm)},c),s&&M.default.createElement("div",{role:"button",tabIndex:0,className:A(il,g&&al),onClick:C,onKeyDown:h,title:"Remove"},M.default.createElement(Ir,null)))}var Vo=k(T());function am(){let[,t]=Vo.default.useState(0),[e]=Vo.default.useState(()=>new tl({triggerRender:()=>t(o=>o+1)}));return e}function mr({navigation:t,id:e,title:o,popout:r,parent:s}){let i=Yg(r);t.updatePopout(e,i,o);let n=Vo.default.useRef(i);return n.current=i,{present:Vo.default.useCallback(()=>{t.present(e,n.current,{parent:s!=null?s:null,title:o})},[e,t,s,o])}}function Yg(t){let e=Vo.default.useRef(t);return(e.current.type!==t.type||!va(e.current.props,t.props)||e.current.key!==t.key)&&(e.current=t),e.current}function cm(t){var J;Me.default.useEffect(()=>{F("ui_impression",{page:"shared-preview-settings"})},[]);let{isDarkMode:e,setDarkMode:o}=De(),[r,s]=Jg(),i=l.previewStore.useState(D=>D.previewNode),{isResponsive:n,canChangeResponsive:p}=l.previewStore.useState(({metadata:{isResponsive:D,canChangeResponsive:te}})=>({isResponsive:Boolean(D),canChangeResponsive:Boolean(te)})),a=Me.default.useMemo(()=>({backgroundEnabled:r.backgroundEnabled,backgroundType:r.backgroundType,backgroundColor:r.backgroundColor,backgroundImage:r.backgroundImage,backgroundImageResize:r.backgroundImageResize}),[r]),c=Me.default.useCallback(D=>{s({...D,backgroundEnabled:!0})},[s]),u=Me.default.useCallback(()=>{s({backgroundEnabled:void 0})},[s]),m=Me.default.useCallback(D=>{oc({model:D}),s({deviceHand:D,deviceSkin:"realistic"})},[s]),f=Me.default.useCallback(D=>{o(D==="dark"),s({deviceTheme:D})},[o,s]),C=Me.default.useCallback(D=>{F("ui_interaction",{page:"shared-preview-settings",id:"device-orientation"}),s({deviceRotated:D})},[s]),h=Me.default.useCallback(D=>{p&&s({responsive:D})},[s,p]),g=Me.default.useCallback(D=>{s({touch:D})},[s]),b=am(),{projectState:j,isViewOnly:R,currentUserId:$}=t,{present:U}=mr({navigation:b,id:"manage-access",title:"Manage Access",popout:Me.default.createElement(Ud,{projectState:j,isViewOnly:R,currentUserId:$}),parent:"share-panel"}),{present:X}=mr({navigation:b,id:"background",title:"Background",popout:Me.default.createElement(Dd,{background:a,onBackgroundChange:c}),parent:"share-panel"}),z="manage-password",{present:G}=mr({navigation:b,id:z,title:"Password",popout:Me.default.createElement(Wd,{isCurrent:b.stack.findIndex(D=>D.id===z)===b.currentStackIndex,initialPassword:(J=j.project.shareLinks[0])==null?void 0:J.password,onPasswordChange:t.onPasswordChange}),parent:"share-panel"}),me=r.backgroundType===void 0,V=Me.default.useCallback(()=>{s(me?{backgroundEnabled:!0,backgroundType:"color",backgroundColor:l.documentSettings.hasDarkAppearance?"#252525":"#eee"}:{backgroundEnabled:!0}),X()},[s,me,X]),I=r.deviceRotated!==void 0?r.deviceRotated:Oa(i,r.devicePreset),Q=Ua(r.devicePreset),ee=Js({devicePreset:r.devicePreset,deviceSkin:r.deviceSkin,deviceRotated:I}),fe=Js({devicePreset:r.devicePreset,deviceRotated:I}),{present:Ee}=mr({navigation:b,id:"share-panel",title:"Settings",popout:Me.default.createElement(im,{background:a,deviceHand:ee?r.deviceHand:void 0,deviceTheme:e?"dark":"light",deviceRotated:I,presetOrientationIsPortrait:Q,canChangeResponsive:p,isDeviceHandEnabled:fe&&!r.responsive,isDeviceOrientationEnabled:Fa(r.devicePreset)&&!r.responsive,isViewOnly:R,onAccessChange:t.onAccessChange,onBackground:V,onBackgroundDelete:u,onDeviceHandChange:m,onDeviceThemeChange:f,onDeviceOrientationChange:C,onManageAccess:U,onManagePassword:G,onResponsiveChange:h,onShowUpsell:t.onShowUpsell,onTouchCursorChange:g,projectState:t.projectState,responsive:n,shareLink:t.shareLink,shareLinkActions:t.shareLinkActions,touchCursor:r.touch})});return b.currentStackIndex===-1&&Ee(),Me.default.createElement(el.Provider,{value:b},Me.default.createElement(Vi,{stack:b.stack,currentIndex:b.currentStackIndex,onBack:b.goBack}))}function Jg(){let[t,e]=Me.default.useState(()=>lm(l.previewStore.previewNode)),o=Me.default.useRef(t);Me.default.useEffect(()=>{let s=l.changes.observe("Tree","AssetMap",l.previewStore,()=>{let i=lm(l.previewStore.previewNode);ya(o.current,i)||(e(i),o.current=i)});return()=>l.changes.removeObserver(s)},[]);let r=Me.default.useCallback(s=>{let i=l.previewStore.previewNode;!i||!Ys(i)||l.process(()=>{var n;(n=l.tree.current(i))==null||n.set({previewSettings:new ta({...i.previewSettings,...s})})})},[]);return[t,r]}function lm(t){return t&&Ys(t)?{...Ks,...t.previewSettings,devicePreset:Na(t)}:Ks}var ue=k(T());var pm="container_caidnv",um="header_hbqy5kl",Un="title_t1az7ntz",dm="learnMore_l1fksb8w",Es="text_t75mjrz",mm="alignCenter_abdabce",fm="steps_s1n7d5a1",gm="cardsGrid_cqkaik3",fr="card_c10poimu";var $e=k(T());function hm(){return $e.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},$e.default.createElement("path",{d:"M 23.544 0 L 8.553 0 C 5.754 0 3.556 2.2 3.556 4.9 L 3.556 21.2 C 3.556 24 5.754 26.2 8.553 26.2 L 13.35 26.2 L 22.045 32 L 20.246 26.2 L 23.544 26.2 C 26.242 26.2 28.441 24 28.441 21.3 L 28.441 4.9 C 28.541 2.2 26.342 0 23.544 0 Z M 22.844 14.7 C 22.844 18.5 19.746 21.3 16.048 21.3 C 12.35 21.3 9.252 18.5 9.252 14.7 L 9.252 6.7 C 9.252 5.6 9.952 4.9 10.951 4.9 C 11.951 4.9 12.65 5.5 12.65 6.7 L 12.65 14.5 C 12.65 16.6 13.95 18.2 16.148 18.2 C 18.247 18.2 19.546 16.5 19.546 14.5 L 19.546 6.7 C 19.546 5.6 20.246 4.9 21.245 4.9 C 22.245 4.9 22.944 5.5 22.944 6.7 L 22.944 14.7 Z",fill:"rgb(37,105,230)"}))}function bm(){return $e.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},$e.default.createElement("g",null,$e.default.createElement("path",{d:"M 16 32 C 24.837 32 32 24.837 32 16 C 32 7.163 24.837 0 16 0 C 7.163 0 0 7.163 0 16 C 0 24.837 7.163 32 16 32",fill:"rgb(255,80,54)"}),$e.default.createElement("path",{d:"M 15.994 14.91 C 15.994 14.91 15.787 14.57 15.338 13.986 C 14.683 13.145 13.975 12.347 13.218 11.598 C 12.18 10.557 10.77 9.972 9.3 9.972 C 7.83 9.969 6.419 10.55 5.378 11.588 C 4.359 12.603 3.781 13.978 3.768 15.416 C 3.75 16.859 4.282 18.254 5.256 19.318 C 8.007 22.34 11.906 24.059 15.992 24.052 C 20.079 24.059 23.978 22.34 26.73 19.318 C 27.704 18.254 28.236 16.859 28.218 15.416 C 28.205 13.978 27.627 12.602 26.608 11.587 C 25.567 10.549 24.156 9.968 22.686 9.971 C 21.216 9.971 19.806 10.556 18.767 11.597 C 18.011 12.347 17.303 13.144 16.649 13.985 C 16.198 14.569 15.993 14.909 15.993 14.909",fill:"rgb(255,255,255)"}),$e.default.createElement("path",{d:"M 7.024 15.522 C 7.024 16.73 8.003 17.71 9.211 17.71 C 10.419 17.71 11.398 16.73 11.398 15.522 C 11.398 14.314 10.419 13.335 9.211 13.335 C 8.003 13.335 7.024 14.314 7.024 15.522 M 15.994 14.91 C 14.302 16.601 14.302 19.343 15.994 21.034 C 16.806 20.222 17.262 19.121 17.262 17.972 C 17.262 16.823 16.806 15.722 15.994 14.91 M 24.971 15.522 C 24.971 16.73 23.992 17.71 22.784 17.71 C 21.576 17.71 20.597 16.73 20.597 15.522 C 20.597 14.314 21.576 13.335 22.784 13.335 C 23.992 13.335 24.971 14.314 24.971 15.522",fill:"rgb(0,0,0)"})))}function vm(){return $e.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},$e.default.createElement("g",{transform:"translate(-0.001 0)"},$e.default.createElement("path",{d:"M 27.399 4.594 C 24.462 1.653 20.476 0 16.318 0 C 12.161 0 8.174 1.653 5.237 4.594 C 4.277 5.538 3.986 6.97 4.501 8.214 C 5.017 9.458 6.236 10.265 7.584 10.254 C 8.466 10.261 9.315 9.916 9.941 9.294 C 11.64 7.588 13.953 6.636 16.361 6.651 C 20.003 6.675 23.276 8.878 24.668 12.242 C 26.06 15.606 25.3 19.476 22.739 22.065 C 22.11 22.704 21.779 23.536 21.779 24.41 C 21.773 25.289 22.119 26.134 22.74 26.756 C 23.361 27.379 24.206 27.728 25.085 27.725 C 25.964 27.729 26.808 27.384 27.431 26.765 C 33.535 20.629 33.521 10.713 27.399 4.594 Z",fill:"rgb(0,167,157)"}),$e.default.createElement("path",{d:"M 26.802 22.747 C 26.179 22.128 25.334 21.783 24.456 21.787 C 23.577 21.783 22.733 22.128 22.11 22.747 C 20.41 24.459 18.092 25.416 15.678 25.401 C 12.033 25.363 8.762 23.151 7.372 19.782 C 5.982 16.413 6.742 12.54 9.301 9.945 C 10.187 9.115 10.551 7.868 10.249 6.692 C 9.948 5.516 9.029 4.597 7.852 4.296 C 6.675 3.994 5.428 4.358 4.597 5.244 C -1.528 11.36 -1.533 21.282 4.587 27.405 C 10.707 33.528 20.634 33.532 26.76 27.416 C 27.399 26.776 27.719 25.945 27.719 25.06 C 27.762 24.193 27.428 23.349 26.802 22.747 Z",fill:"rgb(34,63,130)"}),$e.default.createElement("path",{d:"M 22.206 8.985 C 22.248 9.028 22.291 9.028 22.334 9.071 C 24.089 10.764 25.08 13.097 25.08 15.536 C 25.08 17.974 24.089 20.307 22.334 22.001 C 21.689 22.621 21.325 23.478 21.325 24.372 C 21.325 25.267 21.689 26.123 22.334 26.744 C 22.984 27.384 23.859 27.725 24.786 27.725 C 25.693 27.725 26.568 27.384 27.218 26.744 C 30.269 23.819 31.994 19.777 31.994 15.552 C 31.994 11.326 30.269 7.284 27.218 4.359 L 27.133 4.274 Z",fill:"rgb(0,167,157)"})))}function ym(){return $e.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},$e.default.createElement("path",{d:"M 24.492 8.444 C 22.751 8.444 20.606 9.508 17.893 11.697 C 17.174 12.292 16.517 12.849 15.962 13.355 C 15.432 12.861 14.776 12.292 14.032 11.697 C 11.356 9.508 9.174 8.444 7.47 8.444 C 3.356 8.444 0 11.849 0 16 C 0 20.189 3.356 23.556 7.47 23.556 C 9.211 23.556 11.356 22.492 14.069 20.303 C 14.789 19.708 15.445 19.151 16 18.645 C 16.53 19.139 17.186 19.708 17.931 20.303 C 20.644 22.492 22.789 23.556 24.53 23.556 C 28.644 23.556 32 20.151 32 16 C 31.962 11.849 28.593 8.444 24.492 8.444 Z M 11.659 17.304 C 8.833 19.556 7.647 19.67 7.457 19.67 C 5.464 19.67 3.849 18.012 3.849 15.987 C 3.849 13.962 5.476 12.317 7.457 12.317 C 7.672 12.317 8.833 12.444 11.659 14.684 C 12.215 15.127 12.744 15.595 13.186 16 C 12.719 16.405 12.227 16.835 11.659 17.304 Z M 17.047 17.633 L 14.587 17.304 L 14.397 14.848 L 15.962 13.342 L 16.29 15.798 L 18.763 15.987 Z M 24.492 19.683 C 24.278 19.683 23.117 19.556 20.29 17.316 C 19.735 16.873 19.205 16.405 18.763 16 C 19.205 15.595 19.722 15.152 20.252 14.722 C 23.079 12.444 24.265 12.317 24.454 12.317 C 26.448 12.317 28.063 13.975 28.063 16 C 28.101 18.025 26.473 19.683 24.492 19.683 Z",fill:"#ff606a"}))}function Ds(t){F("ui_interaction",{page:"preview-tool-bar",id:t})}var Qg=()=>Ds("user-test-link_usertesting"),eh=()=>Ds("user-test-link_userzoom-go"),th=()=>Ds("user-test-link_userbrain"),oh=()=>Ds("user-test-link_loopback");function Cm({isPrivateLinkEnabled:t}){return t?ue.default.createElement(S,{justifyContent:"center",alignItems:"center",padding:30,gap:15},ue.default.createElement("div",{className:Un},"User Test"),ue.default.createElement("div",{className:A(Es,mm)},"Disable the ",ue.default.createElement("strong",null,"Private Link")," option in",ue.default.createElement("br",null)," Settings to user test this prototype."),ue.default.createElement(Pm,{link:"https://www.framer.com/support/using-framer/private-links/"})):ue.default.createElement("div",{className:pm},ue.default.createElement(S,{className:um,gap:0,direction:"row",justifyContent:"space-between",alignItems:"baseline"},ue.default.createElement("div",{className:Un},"User Test"),ue.default.createElement(Pm,{link:"https://www.framer.com/support/using-framer/user-testing/"})),ue.default.createElement("div",{className:Es},"Follow these steps to test your prototype:"),ue.default.createElement("ol",{className:A(Es,fm)},ue.default.createElement("li",null,"Enable ",ue.default.createElement("strong",null,"Hide Framer Interface")),ue.default.createElement("li",null,"Copy the link of the prototype"),ue.default.createElement("li",null,"Test on the platform of your choice")),ue.default.createElement("div",{className:gm},ue.default.createElement("a",{className:fr,href:"https://app.usertesting.com/users/sign_in",target:"_blank",onClick:Qg},ue.default.createElement(hm,null),"UserTesting"),ue.default.createElement("a",{className:fr,href:"https://www.userzoom.com/log-in/",target:"_blank",onClick:eh},ue.default.createElement(bm,null),"UserZoom"),ue.default.createElement("a",{className:fr,href:"https://dashboard.userbrain.net/login",target:"_blank",onClick:th},ue.default.createElement(vm,null),"Userbrain"),ue.default.createElement("a",{className:fr,href:"https://lookback.io/sign-in",target:"_blank",onClick:oh},ue.default.createElement(ym,null),"Lookback")))}function Pm({link:t}){return ue.default.createElement("a",{className:dm,href:t,target:"_blank"},"Learn More")}var wm=t=>t==="editor-limit-enterprise-single";function Sm({canPublish:t,isViewOnly:e,user:o,projectState:r,activePopover:s,onActivePopoverChange:i,onAccessChange:n,onShareLinkAccessChange:p,onShareLinkPasswordChange:a,onCopyProjectURL:c,onShowMoveProjectMenu:u,onConfirmMoveProject:m,moveProjectDestination:f,shareLink:C,shareLinkActions:h,onPublish:g,publishStatus:b,defaultHostname:j,customHostname:R,defaultHostnameDeployment:$,customHostnameDeployment:U,deploymentStrategy:X,onUpgradePlan:z}){var Ge;let G=(0,de.useRef)(null),{id:me,space:V}=r.project,I=(0,de.useMemo)(()=>{let Xe=o.spaces.find(Ke=>Ke.id===V.id);return We(Xe)?Xe.license:null},[V.id,o.spaces]),Q=document.getElementById("toolbar-invite-button"),ee=document.getElementById("toolbar-share-button"),fe=document.getElementById("toolbar-user-test-button"),Ee=document.getElementById("toolbar-copy-link-button"),J=document.getElementById("toolbar-publish-button"),D=to("canUsePrivateLink","upsell"),te=to("canInviteEditors","upsell"),[ae,ve]=(0,de.useState)(null),tt=(0,de.useMemo)(()=>wm(ae)?"invite-panel-editors-upsell":ae==="private-project-link"?"invite-panel-private-link-upsell":ae==="private-links"?"private-prototype-link-upsell":"unknown-page",[ae]),je=(0,de.useMemo)(()=>{let Xe=o.spaces.find(se=>se.id===r.project.space.id);if(!Xe)return!1;let Ke=ae==="private-project-link"&&D||ae==="private-links"&&D||wm(ae)&&te;return Xe.permissions.write&&Ke},[te,D,r.project.space.id,ae,o.spaces]);function H(){ve(null)}function B(){i(0)}let Ce=(0,de.useCallback)(()=>{b!==3&&i(0)},[b,i]),_=nt(r.project.space),Fe=o.id===r.project.owner.id,Oe=_&&Fe,ze=wt("sites"),Gt=Qr(),Le=!ze||!Gt;return de.default.createElement(_i,{ref:G,className:Ml},s===2&&de.default.createElement(Xt,{className:Jr,anchor:ze?Q:G.current,alignSelf:ze?"center":"end",attachTo:"bottom",offset:ze?{x:0,y:wr.tooltipArrowHeight+1}:{x:15,y:-5},arrow:{anchor:Q,alignSelf:"center"},onClose:B},Oe?de.default.createElement(Qp,{user:o,projectState:r,onShowMoveProjectMenu:u,onConfirmMoveProject:m,moveProjectDestination:f}):Le?de.default.createElement(rd,{user:o,projectState:r,isDraftProject:_,isCurrentUserOwner:Fe,onAccessChange:n,onCopyProjectURL:c,onClose:B,onShowUpsell:ve}):de.default.createElement(Lu,{user:o,projectState:r,isDraftProject:_,isCurrentUserOwner:Fe,onAccessChange:n,onCopyProjectURL:c,onClose:B,onShowUpsell:ve})),s===3&&de.default.createElement(Xt,{className:Ll,anchor:ee,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:20},onClose:B},de.default.createElement(cm,{currentUserId:o.id,isViewOnly:e,onAccessChange:p,onPasswordChange:a,projectState:r,shareLink:C,shareLinkActions:h,onShowUpsell:ve})),s===4&&de.default.createElement(Xt,{anchor:fe,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:25},onClose:B},de.default.createElement(Cm,{isPrivateLinkEnabled:C.publicAccess==="none"})),s===9&&de.default.createElement(Xt,{anchor:Ee,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:25},onClose:B},de.default.createElement(Fp,{password:(Ge=r.project.shareLinks[0])==null?void 0:Ge.password})),s===6&&de.default.createElement(Xt,{className:Jr,anchor:G.current,alignSelf:"end",attachTo:"bottom",offset:{x:15,y:-5},arrow:{anchor:J,alignSelf:"center"},onClose:Ce},de.default.createElement(Ed,{projectId:me,canPublish:t,onPublish:g,publishStatus:b,onClose:B,defaultHostname:j,customHostname:R,defaultHostnameDeployment:$,customHostnameDeployment:U,deploymentStrategy:X})),s===1&&de.default.createElement(Xt,{className:Jr,anchor:G.current,alignSelf:"end",attachTo:"bottom",offset:{x:15,y:-5},arrow:{anchor:J,alignSelf:"center"},backdropEnabled:!1,focusTrapEnabled:!1},de.default.createElement(Rp,{canPublish:t,publishStatus:b,onPublish:g,onDismiss:B})),ae&&V.scope==="organization"&&de.default.createElement(rs,{canUpgrade:je,teamId:V.ownerId,teamLicense:I,trackingPage:tt,upsellType:ae,onDismiss:H,onUpgradePlan:z}))}var co=k(T());function km({isUserPartOfTeam:t,api:e,projectTeamId:o,autoJoinDefaultRole:r}){let[s,i]=co.default.useState(),[n,p]=co.default.useState(!0),[a,c]=co.default.useState(!1),[u,m]=$r("recommended-teams-joined-pending-welcome-modal",[]),f=r==="editor"?"an Editor":`a ${oa(r)}`,C=co.default.useCallback(async()=>{if(s)try{F("ui_interaction",{page:"canvas-autojoin-toast",id:"joinTeam"}),c(!0),await e.joinRecommendedTeam(s.id,"recommended-canvas"),m(h=>[...h,s.id]),c(!1),i(void 0),E({variant:"success",key:"joined-team-sucess",icon:"success",text:`You have joined the ${s.displayName} team as ${f}`,type:"add"})}catch{E({variant:"error",key:"joined-team-error",icon:"error",text:"Failed to join team",type:"add"})}},[s,e,m,f]);return co.default.useEffect(()=>{let h=!0;if(t){p(!1);return}return e.fetchRecommendedTeams().then(g=>{if(!h)return;let b=g.find(({id:j})=>o===j);b&&i(b),p(!1)}).catch(()=>{}),()=>{h=!1}},[t,e,o]),co.default.useEffect(()=>{let h="recommended-team";s?(F("ui_impression",{page:"canvas-autojoin-toast"}),E({variant:"info",key:h,text:`Join the ${s.displayName} team as ${f}`,action:{onClick:C,title:"Join"},styleOverride:"fallback-tool",permanent:!!s||a,type:"add",icon:"view-only",duration:1/0})):E({type:"remove",key:h})}),{isShowingRecommendedTeamToast:n||!!s}}var Re=k(T());var oe=k(T());var Im="description_d1mpdoho",Fn="resource_rbg65ev",Tm="divider_d1m3gl5g",On="icon_i5ixusr";var ih="request-editor-access";function Am({space:t,projectAccessStatus:e,teamAccessStatus:o,onRequestProjectEditAccess:r,onRequestTeamEditAccess:s,onDismiss:i,showRequestTeamEditorAccess:n}){return(0,oe.useEffect)(()=>{F("ui_impression",{page:ih})},[]),(t==null?void 0:t.scope)!=="organization"?null:oe.default.createElement(Et,{visible:!0,onDismiss:i},oe.default.createElement(S,{gap:15},oe.default.createElement(S,{gap:20},oe.default.createElement(Te,{className:Dt.title},oe.default.createElement(v,null,"Request Edit Access")),oe.default.createElement(Te,{className:Im},oe.default.createElement(v,null,"You are currently a viewer in this project."),oe.default.createElement("br",null),oe.default.createElement(v,null,"Request edit access below."))),oe.default.createElement("hr",{className:Tm}),oe.default.createElement(S,{gap:15},oe.default.createElement(S,{direction:"row",gap:0,justifyContent:"space-between"},oe.default.createElement(S,{direction:"row",gap:10,justifyContent:"center",alignItems:"center"},oe.default.createElement(S,{className:On,justifyContent:"center",alignItems:"center"},oe.default.createElement(ah,null)),oe.default.createElement(Te,{className:Fn},oe.default.createElement(v,null,"This Project"))),oe.default.createElement(Y,{large:!0,variant:"primary",title:"Request Access",onClick:r,enabled:e!=="pending"&&e!=="loading"},oe.default.createElement(v,null,e==="pending"?"Pending":"Request"))),t&&n&&oe.default.createElement(S,{direction:"row",gap:0,justifyContent:"space-between"},oe.default.createElement(S,{direction:"row",gap:10,justifyContent:"center",alignItems:"center"},oe.default.createElement(S,{className:On,justifyContent:"center",alignItems:"center"},oe.default.createElement(ec,{avatar:null,displayName:t.displayName,organization:null})),oe.default.createElement(Te,{className:Fn},oe.default.createElement(v,null,"All Projects in Team"))),oe.default.createElement(Y,{large:!0,variant:"primary",title:"Request Access",onClick:s,enabled:o!=="pending"&&o!=="loading"},oe.default.createElement(v,null,o==="pending"?"Pending":"Request"))))))}function ah(){return oe.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},oe.default.createElement("path",{d:"M 9.828 3.343 C 10.024 3.148 10.34 3.148 10.536 3.343 L 12.657 5.464 C 12.852 5.66 12.852 5.976 12.657 6.172 L 6.26 12.568 C 6.051 12.777 5.784 12.92 5.494 12.978 L 3.139 13.449 C 2.789 13.519 2.481 13.211 2.551 12.861 L 3.022 10.506 C 3.08 10.216 3.223 9.949 3.432 9.74 Z M 11.939 1.232 C 12.135 1.037 12.451 1.037 12.646 1.232 L 14.768 3.354 C 14.963 3.549 14.963 3.865 14.768 4.061 L 14.061 4.768 C 13.865 4.963 13.549 4.963 13.354 4.768 L 11.232 2.646 C 11.037 2.451 11.037 2.135 11.232 1.939 Z",fill:"currentColor"}))}var Ns=Ql(E);function lh({isUserPartOfTeam:t,isUserEditorInTeam:e}){return t&&!e}function Mm({project:t,isUserPartOfTeam:e,isUserEditorInTeam:o,toastKey:r}){let[s,i]=(0,Re.useState)(!1),[n,p]=(0,Re.useState)(),[a,c]=(0,Re.useState)(),u=nt(t.space),m=(0,Re.useMemo)(()=>u?"Dismiss":e&&a==="pending"||!e&&n==="pending"?"Request Pending":"Request Access",[e,u,n,a]),f=(0,Re.useCallback)(async()=>{F("ui_interaction",{page:"request-editor-access",id:"request-project-editor-access"});try{p("loading");let{status:g}=await nn({resourceType:"project",resourceId:t.id});p(g),Ns.projectSuccess()}catch{p(void 0),Ns.projectError()}},[t.id]),C=(0,Re.useCallback)(async()=>{if(t.space.displayName){F("ui_interaction",{page:"request-editor-access",id:"request-team-editor-access"});try{c("loading");let{status:g}=await nn({resourceType:"team",resourceId:t.space.ownerId});c(g),p(g),Ns.teamSuccess(t.space.displayName)}catch{c(void 0),Ns.teamError(t.space.displayName)}}},[t.space.displayName,t.space.ownerId]);return(0,Re.useEffect)(()=>{if(!r)return;E({variant:"info",key:r,text:"You do not have editing rights for this project",action:u?void 0:{title:m,onClick:()=>{i(!0)}},permanent:!u,styleOverride:u?void 0:"request-editor-access",showCloseButton:u?"auto":"never",type:"add",icon:"view-only",duration:1/0})},[r,m,u]),(0,Re.useEffect)(()=>{if(!r)return;let g=!0;return(async()=>{try{let{accessRequests:b}=await ch(t.id);if(!g)return;b.team&&e&&(c(b.team.status),p(b.team.status)),b.project&&p(b.project.status)}catch(b){N(b)}})(),()=>{g=!1}},[r,t.id,e]),(0,Re.useMemo)(()=>!s||t.space.scope!=="organization"?null:Re.default.createElement(Am,{projectAccessStatus:n,teamAccessStatus:a,onRequestProjectEditAccess:f,onRequestTeamEditAccess:C,showRequestTeamEditorAccess:lh({isUserPartOfTeam:e,isUserEditorInTeam:o}),space:t.space,onDismiss:()=>{i(!1)}}),[f,C,s,t.space,n,a,e,o])}function ch(t){return w.get(`/web/access-requests/projects/${t}`)}var Lm=k(T());function xm({disabled:t}){let e="missing-permissions",o=l.scopeStore.useState(m=>m.active.id===Ur),r=l.siteSettings.useState(m=>m.active),s=o?"CMS":r?"SiteSettings":"Canvas",i=Gr(),n=s==="Canvas"&&!i.canDesign||s==="CMS"&&!i.canEditContent||s==="SiteSettings"&&!i.canEditSiteSettings,p=wt("sites"),a=Qr(),u=!t&&p&&a&&n;Lm.default.useEffect(()=>{u?E({type:"add",key:e,variant:"info",text:ph(s),permanent:!0,icon:"view-only",duration:1/0}):E({type:"remove",key:e})},[e,u,s])}function ph(t){switch(t){case"Canvas":return"You do not have design editing rights";case"CMS":return"You do not have content editing rights";case"SiteSettings":return"You do not have settings editing rights";default:Ie(t,"All sections should have a toast text")}}var uh=rt("projectHandlers"),dh=(0,L.lazy)(()=>import("https://app.framerstatic.com/AccountSettingsModal-OZI7QVXA.js")),mh=(0,L.lazy)(()=>import("https://app.framerstatic.com/WelcomeWindow-DNTN2SLY.js")),fh=(0,L.lazy)(()=>import("https://app.framerstatic.com/TeamCreationModal-MKOOJ4R5.js")),jm=t=>yl(t,21),Dm=new URL(window.location.href),Em=Dm.searchParams.get("preview"),gh=Em?Em==="1":void 0,hh=typeof window!="undefined"&&!qr()?Ip(window.location):null,bh=!!Dm.searchParams.get("tutorial"),vh=l.wrapHandler(t=>l.publishStore.publish(l,t));function Nm({projectState:t,activeNodeId:e,initialUser:o,api:r,assetService:s,filePickerRef:i}){var Yn;let{project:n}=t;(0,L.useEffect)(()=>{l.processWhenReady(()=>{l.projectStore.project=n})},[n]);let[p,a]=(0,L.useState)(!1),[c,u]=(0,L.useState)(!1),m=Dl(Zt().api,o),{user:f}=m,[C,h]=(0,L.useState)(null),[g,b]=(0,L.useState)(null),[j,R]=(0,L.useState)(!1),[$,U]=(0,L.useState)(null),X=(0,L.useCallback)(P=>{l.popover.active=P},[]),{publishStatus:z,defaultHostname:G,customHostname:me,defaultHostnameDeployment:V,customHostnameDeployment:I,deploymentStrategy:Q}=l.publishStore.useState(),{active:ee}=l.popover.useState(),fe=P=>O=>{O.preventDefault(),O.stopPropagation(),P()},Ee=Xc(P=>{let O=Ot("showPreview");we(O,"togglePreviewVisible key binding is not set"),P(O,fe(Po),"Toggle Preview");let ne=Ot("openFullScreen");we(ne,"openFullScreen key binding is not set"),P(ne,fe(()=>Kr().openFullScreen()),"Present Preview");let Ze=Ot("showPreviewNewWindow");we(Ze,"openExternalPreviewWindow key binding is not set"),P(Ze,fe(rn),"Open in New Tab");let ct=Ot("toggleHighlightsInLivePreview");we(ct,"toggleHighlightsInLivePreview key binding is not set"),P(ct,fe(()=>l.previewStore.toggleHighlights()),"Show Interaction Highlights");let Kt=Ot("toggleConsole");we(Kt,"toggleConsole key binding is not set"),P(Kt,fe(()=>Kr().toggleConsole()),"Toggle Preview Console");let Lt=Ot("togglePreviewInterface");we(Lt,"togglePreviewInterface key binding is not set"),P(Lt,fe(()=>l.fullsizePreviewStore.togglePreviewUIVisible()),"Toggle Preview interface");let ot=Ot("reload");we(ot,"reload key binding is not set"),P(ot,fe(()=>Kr().reload()),"Reset Preview"),P("CommandOrControl+S",fe(()=>{zr()||E({type:"add",variant:"success",icon:"success",text:"Framer automatically saves your work",key:"auto-save-toast"})}),"Save")},[]),J=l.documentSettings.isNewlyCreatedProject,D=t.aclById[n.owner.id],te=W.isOn("skipInterstitial"),ae=((Yn=t.aclById[f.id])==null?void 0:Yn.role)||n.userRole,ve=ae==="viewer",tt=ae==="owner",je=ae==="viewer",[H,B]=(0,L.useState)(Ft(n)&&!J);W.update(n.canvasFeatures);let{collections:Ce}=sp(f.spaces,f.id,r),_=(0,L.useMemo)(()=>f.spaces.find(P=>P.id===n.space.id),[n.space.id,f.spaces]);(0,L.useEffect)(()=>{We(_)&&!l.persistedUserDefaults.showPackagesDefaultValueSet&&!_.configuration.hidePackages&&(l.persistedUserDefaults.showPackages=!_.configuration.hidePackages)},[_]);let Fe=(0,L.useMemo)(()=>f.spaces.filter(We),[f.spaces]),Oe=(0,L.useRef)(!0);(0,L.useEffect)(()=>{if(Oe.current){Oe.current=!1;return}s.refresh().catch(N)},[_,s]);let ze=Xr(),Gt=(0,L.useMemo)(()=>Ce?Kl(Ce):null,[Ce]),{canMoveProject:Le,availableCollectionsBySpace:Ge}=Zl({project:n,user:f,collectionsBySpace:Gt});cp({channel:Ve,project:n,canMoveProject:Le,onShowMoveProjectMenu:Ws,onShowUpgradeOrTrialModal:Xe});function Xe(P,O){We(_)&&U({upsell:P,trackingPage:O})}(0,L.useEffect)(()=>{let P=n.settings.featureFlags,O=We(_)?_.license.featureFlags:{};ea(),n.teamExperiments&&ke.update(n.teamExperiments),Hr.update({...O,...P})},[_,n.settings,n.teamExperiments]),(0,L.useEffect)(()=>{b(null)},[n.space,n.collection]),(0,L.useEffect)(()=>{l.processWhenReady(()=>{l.chromeStore.isPreviewingFeaturedTemplate=(D==null?void 0:D.user.isFramerEmployee)===!0&&te&&ve})},[te,D==null?void 0:D.user.isFramerEmployee,ve]);let{isPreviewingFeaturedTemplate:Ke}=l.chromeStore.useState(),se=ve||n.archived||Ke!==!1,Be=l.modalStore.useState(),po=(0,L.useRef)(!1);(0,L.useEffect)(()=>{if(n.space.scope==="organization"||se||bh||Be.active.type!=="None")return;if(!f.spaces.some(O=>We(O)&&O.permissions.write)){l.processWhenReady(()=>l.modalStore.set({type:"CreateTeam",source:"automatic"})),po.current=!0;return}po.current||ts.defaultProjectLocation.then(({defaultTeam:O})=>{if(!(O!=null&&O.spaceId))return;let{displayName:ne,spaceId:Ze}=O;b({spaceId:Ze,destinationLabel:jm(`${ne} / All`),spaceName:ne})}).catch(uh.reportError).finally(()=>{l.modalStore.set({type:"DeprecatedDrafts",source:"automatic"}),po.current=!0})},[se,n.space.scope,Be,f.spaces]);let lt=se&&!qr(),Bn=H&&!qr(),Us=l.codeEditorStore.useState(P=>P.currentCodeFileId),[_n,hr]=np({project:n}),Fs=ip({project:n,shareLink:_n}).href,{updateHistoryData:br,setHistoryState:Os}=rp({project:n,projectInitialQueryString:window.location.search,activeNodeId:e,currentCodeFileId:Us,shareLinkUrl:Fs},P=>{if(P.key==="project")Po({visible:!1,source:"back_navigation"});else if(P.key==="preview"){Po({visible:!0,source:"back_navigation"});let{previewItem:O}=P;O&&(l.previewStore.item=O)}else Ie(P)});(0,L.useEffect)(()=>{br({project:n,activeNodeId:e,currentCodeFileId:Us,shareLinkUrl:Fs})},[br,n,e,Us,Fs]),(0,L.useEffect)(()=>{gh&&l.processWhenReady(()=>{Po({visible:!0,shownOnLaunch:!0})})},[]),(0,L.useEffect)(()=>{let P=l.changes.observe(l.chromeStore,()=>{l.chromeStore.mainView===3?Os("preview"):Os("project")});return()=>l.changes.removeObserver(P)},[Os]),(0,L.useEffect)(()=>{let P=l.changes.observe(l.previewStore,()=>{let O=l.previewStore.item;br({previewItem:O});let ne=(O==null?void 0:O.type)==="node"?O.nodeId:void 0;hr.setNodeId(ne)});return()=>l.changes.removeObserver(P)},[br,hr]);let vr=nt(_)&&tt||We(_)&&_.permissions.write&&!ve;async function Hn(){let[,P]=Nt.extract(on(n.title));F("ui_interaction",{page:"project-menu-bar",id:"archive-project"});try{await r.updateProject({archived:!0}),E({type:"add",variant:"success",key:`archive-${n.id}`,text:`Archived ${P}`,icon:"success",duration:3e3})}catch{E({type:"add",variant:"error",key:`archive-${n.id}`,text:`Failed to archive ${P}`,icon:"error",duration:3e3})}r.wait(()=>{window.location.href=eo})}function Fm(){n.space.scope==="organization"?h(n):Hn()}let Bs=(0,L.useCallback)(async()=>{F("ui_interaction",{page:"canvas-unarchive-toast",id:"unarchive-project"});try{await r.updateProject({archived:!1}),E({type:"add",variant:"success",key:`unarchived-${n.id}`,text:"This project has been unarchived",icon:"success"})}catch{E({type:"add",variant:"error",key:`unarchived-${n.id}`,text:"Failed to unarchive project",icon:"error"})}},[r,n.id]);async function Om(){F("ui_interaction",{page:"project-menu-bar",id:"save-project-as-template"});let P=`save-as-template-${n.id}`;try{await r.updateProject({type:"template"}),E({type:"add",variant:"success",key:P,text:"This project has been added to Templates",icon:"success",duration:5e3,action:{title:"See Templates",onClick:()=>{window.location.href=`${Zt().app}${eo}folder/templates?team=${n.space.id}`}}})}catch{E({type:"add",variant:"error",key:P,text:"This project could not be saved as template",icon:"error",duration:3e3})}}async function Bm(){F("ui_interaction",{page:"project-menu-bar",id:"save-project-as-template"});let P=`save-as-project-${n.id}`;try{await r.updateProject({type:"default"}),B(!1),E({type:"add",variant:"success",key:P,text:"This project is no longer a template",icon:"success",duration:3e3})}catch{E({type:"add",variant:"error",key:P,text:"This template could not be converted to a project",icon:"error",duration:3e3})}}let $o="view-only-access",{isShowingRecommendedTeamToast:_m}=km({isUserPartOfTeam:typeof _!="undefined",api:m,projectTeamId:n.space.ownerId,autoJoinDefaultRole:n.settings.featureFlags.canInviteEditors==="on"?n.settings.autoJoinDefaultRole:"viewer"}),Hm=lt&&je&&!n.archived&&!_m&&!Ke?$o:void 0,Wn=Mm({project:n,isUserPartOfTeam:typeof _!="undefined",isUserEditorInTeam:typeof _!="undefined"&&_.permissions.write,toastKey:Hm});xm({disabled:je}),(0,L.useEffect)(()=>{lt?n.archived?E({key:$o,variant:"info",text:`This file is archived and view-only. ${vr?"Unarchive the file to edit.":""}`,action:vr?{title:"Unarchive",onClick:()=>Bs()}:void 0,type:"add",icon:"view-only",duration:1/0,permanent:!0}):Ke&&E({key:$o,type:"add",variant:"prominent-info",icon:"view-only",text:"You\u2019re previewing a view-only version of this template",duration:1/0,permanent:!0,action:{title:"Use Template",onClick:()=>st(hi({duplicateFrom:n.id}))}}):!J&&Bn?E({key:$o,type:"add",variant:"info",icon:"warning",text:"You\u2019re viewing a template project",duration:1/0,showCloseButton:"never",action:se?void 0:{title:"Edit Template",onClick:()=>B(!1)}}):E({key:$o,type:"remove"})},[lt,n.archived,Bs,vr,J,Bn,se,n.id,Ke]),zl(on(n.title));let Wm=jp({channel:Ve});mp({user:f,channel:Ve,permissions:{isViewOnly:se||H}});let qm=Dp({channel:Ve}),{isFeedbackActive:Vm}=kp({vekterChannel:Ve,initialThread:hh});Ap({toast:E,userNotifications:qm,isFeedbackActive:Vm}),Lp({toast:E,isDocumentLoaded:p,action:async P=>P==="subscribe"?r.subscribeToNotifications():r.unsubscribeFromNotifications()}),(0,L.useEffect)(()=>{Ri.init({userId:f.id,appVersion:Ca,projectId:n.id}),l.processWhenReady(()=>{f.id&&(l.documentSettings.currentUserId=f.id),f.email&&(l.documentSettings.currentUserEmail=f.email),f.spaces&&(l.documentSettings.spaces=f.spaces)})},[n.id,f.email,f.id,f.spaces]);let $m=lp();Tc(P=>{P(za,()=>{setTimeout(()=>a(!0))}),P(Ga,async O=>{if(!O)return;let ne=`renamed-${n.id}`;try{await r.updateProject({title:O})}catch{E({type:"add",variant:"error",key:ne,text:"Failed to update project name",icon:"error"})}})});let Rm=L.default.useCallback(async()=>{if(ke.isOn("insertPages")){bl({insertPanel:!0,spaceId:_==null?void 0:_.id},!0).catch(N);return}st(hl(n,f))},[_,n,f]),qn=L.default.useCallback(async()=>{st(tn(n))},[n]),[Vn,_s]=(0,L.useState)(null),Hs=L.default.useCallback(async()=>{st(tn(n,{sites:!0})),_s(null)},[n]),$n=wt("packages"),Rn=!wt("codeModules"),zm=L.default.useCallback(async()=>{let P=[];if(Rn&&P.push("Legacy Code"),$n&&P.push("Packages"),P.length)_s({unsupportedFeatures:P});else return Hs()},[Hs,$n,Rn]);Sp({appMenu:l.chromeStore.displayMinimalUI?un.mobileWebAppMenu:un.webAppMenu,archiveProject:Fm,onPreviewToggle:Po,onOpenPreviewInNewWindow:rn,filePickerRef:i,openAccountSettings:Kn,onUploadImagePick:$m,menuActionTargetService:Wm,saveProjectAsTemplate:Om,saveTemplateAsProject:Bm,project:n,toast:E,unarchiveProject:Bs,user:f,userCanArchive:vr,handleNewProject:Rm,handleProjectDuplication:qn,handleDuplicationAsSite:zm,handleTemplateDuplication:qn}),ul({globalKeyBindings:Ee});async function Gm(P){F("ui_interaction",{page:"project-menu-bar",id:"change-access"});try{await r.updateProject({publicAccess:P})}catch{E({type:"add",variant:"error",key:`access-change-${n.id}`,text:"Failed to change the access level of this project",icon:"error"})}}async function Km(P){var ne;let O=(ne=n.shareLinks[0])==null?void 0:ne.id;we(O!==void 0,"Invalid share link with undefined id"),hr.setPublicAccess(P),await r.updateShareLink({id:O,publicAccess:P})}async function Zm(P){var ne;let O=(ne=n.shareLinks[0])==null?void 0:ne.id;we(O!==void 0,"Invalid share link with undefined id"),await r.updateShareLink({id:O,password:P})}function Ym(){F("ui_interaction",{page:"project-menu-bar",id:"copy-link"})}function Jm(P,O,ne=!1){let Ze=ho(n,f),ct=Ze.spaceName.trim(),Kt=P?[{label:`Go to ${ct}`,handler:()=>{window.location.href=Ze.href}},{type:"separator"}]:[];if(!Le||se)return Kt;let Lt=[];for(let[ot,nf]of Object.entries(Ge)){let{displayName:zo,collections:af}=nf,lf=af.map(gt=>{var Qn,ei;let[Jn,Xn]=Nt.extract(ca(gt));return{label:Xn,handler:()=>{zn({spaceId:ot,destinationLabel:`${zo} / ${Xn}`,collection:gt,spaceName:zo,skipConfirmation:O})},checked:g&&O?g.spaceId===ot&&(((Qn=g.collection)==null?void 0:Qn.id)===gt.id||!g.collection&&gt.id==="recent"):n.space.id===ot&&(((ei=n.collection)==null?void 0:ei.id)===gt.id||!n.collection&&gt.id==="recent"),value:{spaceId:ot,collection:gt},icon:Jn?{src:Jn}:void 0}});if(zo!==""){let gt=jm(zo);Lt.push({label:gt,submenu:lf,checked:g&&O?g.spaceId===ot:n.space.id===ot,handler:()=>zn({spaceId:ot,destinationLabel:gt,spaceName:zo,skipConfirmation:O})})}else Lt.push({label:"Drafts",checked:g&&O?g.spaceId===ot:n.space.id===ot,disabled:!0,visible:!ne})}return[...Kt,{label:"Move to\u2026",disabled:!0},...Lt]}async function Ws(P){let{location:O,showBackToDashboardItem:ne=!0,skipConfirmation:Ze,hideDrafts:ct}=P;await ze({items:Jm(ne,Ze,ct),location:O,within:document.body.getBoundingClientRect(),className:`${pp} ${ha}`})}let Xm=(0,L.useCallback)(()=>{l.siteSettings.setActiveTab({tab:"plans"}).catch(N)},[]),Ro=async({spaceId:P,destinationLabel:O,collection:ne,dismissModal:Ze=!0})=>{let ct=ne&&ne.id!=="personal"&&ne.id!=="recent"?ne.id:null,Kt="move-project-toast";try{await r.updateProject({spaceId:P,collectionId:ct}),n.space.id!==P&&await r.getACL(),E({type:"add",variant:"success",icon:"success",text:Nt.removeFromText(`Project moved to ${O}`),key:Kt})}catch(Lt){ql({err:gi(Lt),targetTeamId:P,projectId:n.id,projectTitle:n.title,destination:O,onClickOpenPlans:Xm})}R(!1),Ze&&(X(0),l.modalStore.dismiss())};async function zn(P){var ne,Ze,ct;let O=(Ze=(ne=n.collection)==null?void 0:ne.id)!=null?Ze:"recent";if(!(((ct=P.collection)==null?void 0:ct.id)===O&&P.spaceId===n.space.id)){if(n.space.id!==P.spaceId){if(b(P),P.skipConfirmation)return;R(!0);return}await Ro(P)}}let Gn=()=>{b(null),R(!1)},Qm=()=>{h(null)};function Kn(){u(!c)}function ef(P){window.location.href=`${eo}?team=${P.id}&open-settings=1`}let[Ch,tf]=vl(f.id),of=l.wrapHandler(()=>{l.modalStore.dismiss(),tf(Date.now())}),Zn=()=>l.siteSettings.setActiveTab({tab:"plans"});function rf(){if(!f.isOnLatestTerms)return Be.active.type==="CompleteSignup"?L.default.createElement(Zc,{accountApi:m}):L.default.createElement(Rl,{fetchMe:m.fetchMe});if(Be.active.type==="Welcome")return L.default.createElement(Gi,{isOn:"sites"},L.default.createElement(mh,{onClose:of,onOpenTutorialInCurrentProject:()=>l.chromeStore.isTutorialActive=!0}));if(Be.active.type==="DeprecatedDrafts")return L.default.createElement(qc,{user:f,project:n,onShowMoveProjectMenu:Ws,moveProjectDestination:g==null?void 0:g.destinationLabel,onConfirmMoveProject:async()=>{g&&await Ro({...g,dismissModal:!1})},onDismiss:()=>l.modalStore.set({type:"None",source:"automatic"})});if(Be.active.type==="CreateTeam")return L.default.createElement(fh,{api:m,noEditRights:!0,onComplete:async P=>{let O=f.spaces.find(ne=>ne.ownerId===P);We(O)&&await Ro({spaceId:O.id,destinationLabel:O.displayName,dismissModal:!0})}});if(We(_)&&$)return L.default.createElement(rs,{canUpgrade:_.permissions.write,teamId:_.ownerId,teamLicense:_.license,trackingPage:$.trackingPage,upsellType:$.upsell,onDismiss:()=>U(null),onUpgradePlan:Zn});if(C)return L.default.createElement(Gl,{action:"archive",project:C,onConfirm:Hn,onClose:Qm});if(g&&j)return L.default.createElement(Wl,{isMovedFromDrafts:nt(n.space),teamName:g.spaceName,onCancel:Gn,onConfirm:()=>Ro(g),onDismiss:Gn});if(c)return L.default.createElement(dh,{userTeams:Fe,onOpenTeamSettings:ef,api:m,onDismiss:Kn});if(Wn)return Wn;if(Vn)return L.default.createElement(Dc,{onConfirm:Hs,onDismiss:()=>_s(null),unsupportedFeatures:Vn.unsupportedFeatures})}let qs=(0,L.useMemo)(()=>_?We(_)?_.ownerId:null:n.space.scope==="user"||n.userRole==="prototypeViewer"||n.userRole==="viewer"?null:n.space.ownerId,[_,n.space.ownerId,n.space.scope,n.userRole]);(0,L.useEffect)(()=>{qs&&l.libraryStore.getLibraryForTeam(qs).catch(N)},[qs]),(0,L.useEffect)(()=>{Uc(n)},[n]);let{notice:sf}=Vl();return $l(sf,_==null?void 0:_.ownerId),L.default.createElement(L.default.Fragment,null,L.default.createElement(Sm,{projectState:t,user:f,isViewOnly:se,activePopover:ee,onActivePopoverChange:X,onAccessChange:Gm,onShareLinkAccessChange:Km,onShareLinkPasswordChange:Zm,onCopyProjectURL:Ym,onShowMoveProjectMenu:Ws,moveProjectDestination:g==null?void 0:g.destinationLabel,onConfirmMoveProject:async()=>{g&&await Ro({...g,dismissModal:!1})},shareLink:_n,shareLinkActions:hr,onPublish:vh,publishStatus:z,canPublish:l.publishStore.canPublish(l),defaultHostname:G,customHostname:me,defaultHostnameDeployment:V,customHostnameDeployment:I,deploymentStrategy:Q,onUpgradePlan:Zn}),L.default.createElement(da,null,rf()))}function Um(){var b,j,R;let t=window.framerUser,e=(j=(b=window.bootstrap)==null?void 0:b.project)==null?void 0:j.id;if(!e)throw Error("Can\u2019t find project id");Bl(),Hl(),_l(t.id,e,!W.isOn("sites")),Ol(e);let o=os({projectId:e}),r=l.treeStore.getSocketURL(o.socketURL),s=yh({projectId:e,userId:t.id}),i=$a({url:r,documentConnection:s});(R=l.remoteDocument)==null||R.setSocket(i),l.publishStore.initialize(e,i);let[n,p]=ic(e,i),a=nc(Zt().api,i,n,p),c=oo("DocumentSettings",()=>{var $;return($=l.documentSettings.activeNode)==null?void 0:$.id}),u=Ph(),m=yo(()=>new Ii(a));(0,He.useEffect)(()=>{l.webAssetsService=m,oi.on(Ve).register(m),m.refresh().catch(N)},[m]);let f=(0,He.useRef)(null);(0,He.useEffect)(()=>{pl(m,f)},[m,f]),(0,He.useEffect)(()=>{Za(a,m)},[a,m]);let C=dc({channel:Ve,socket:i});uc({channel:Ve,api:a,projectId:e,fileUpdatesService:C}),bc({channel:Ve,api:a,socket:i,fileUpdatesService:C}),Pc({api:a,channel:Ve}),wc({api:a,channel:Ve}),gc({channel:Ve,toast:E}),lc({api:a,channel:Ve}),(0,He.useEffect)(()=>{a.setInitialProject(ts.project)},[a]),(0,He.useEffect)(()=>i.onMessage($=>{if($.type!=="notifyProjectChange")return;let{scope:U}=$.value;U==="acl"?a.getACL():U==="assets"?m.refresh().catch(N):U==="metadata"?a.getProject():U==="sites"?l.publishStore.loadHostnames().catch(N):U==="settings"&&l.publishStore.loadProjectSettings().catch(N)}),[a,m,i]);let{isDarkMode:h}=De(),g=(0,He.useRef)(n);return g.current=n,(0,He.useEffect)(()=>{s.setGetUserInfoFunction($=>{let U=g.current.aclById[$];if(!U)return null;let X=ia(U.color,h),z=U.user.name.split(" ")[0],G=g.current.userStates[$];return G?{...U.user,shortName:z,color:X,state:G}:null})},[s,h]),He.default.createElement(kl.Provider,{value:Il(a)},He.default.createElement(Lc,{socket:i,projectId:e,userId:t.id,documentConnection:s}),He.default.createElement(Wi,{mode:u},n.project&&He.default.createElement(Nm,{projectState:n,activeNodeId:c,initialUser:t,api:a,assetService:m,filePickerRef:f})),He.default.createElement(Cl,{ref:f}))}function yh({projectId:t,userId:e}){let o=(0,He.useRef)();if(o.current===void 0){let r=l.getLocalDocumentHandler(t,e),s=new ns(r);r.setRemoteConnection(s),o.current=s}return o.current}function Ph(){let t=l.toolStore.useState(o=>o.shapeModeActive),e=l.scopeStore.useState(o=>Mr(o.active));if(t)return"graphics";if(e)return"component"}Fl();zi();Ya(gr.default.createElement(ll,null,gr.default.createElement(es,{location:"project",title:"Failed to load project",description:gr.default.createElement(v,null,"Something unexpected happened on our end while loading the project.")},gr.default.createElement(Um,null))),document.getElementById("root"));
//# sourceMappingURL=https://app.framerstatic.com/web.R2ABYSXZ.js.map
